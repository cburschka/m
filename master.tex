%% LyX 2.1.4 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[oneside,ngerman]{scrbook}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\usepackage{refstyle}
\usepackage{float}
\usepackage{mathtools}
\usepackage{enumitem}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{stmaryrd}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.

\AtBeginDocument{\providecommand\defref[1]{\ref{def:#1}}}
\AtBeginDocument{\providecommand\lemref[1]{\ref{lem:#1}}}
\RS@ifundefined{subref}
  {\def\RSsubtxt{section~}\newref{sub}{name = \RSsubtxt}}
  {}
\RS@ifundefined{thmref}
  {\def\RSthmtxt{theorem~}\newref{thm}{name = \RSthmtxt}}
  {}
\RS@ifundefined{lemref}
  {\def\RSlemtxt{lemma~}\newref{lem}{name = \RSlemtxt}}
  {}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% Textclass specific LaTeX commands.
\usepackage{enumitem}		% customizable list environments
\newlength{\lyxlabelwidth}      % auxiliary length 
\theoremstyle{plain}
\ifx\thechapter\undefined
\newtheorem{thm}{\protect\theoremname}
\else
\newtheorem{thm}{\protect\theoremname}[chapter]
\fi
  \theoremstyle{definition}
  \newtheorem{defn}[thm]{\protect\definitionname}
  \theoremstyle{remark}
  \newtheorem{notation}[thm]{\protect\notationname}
% labeling-like list based on enumitem's description list with
% mandatory second argument (label-pattern):
\newenvironment{elabeling}[2][]%
{\settowidth{\lyxlabelwidth}{#2}
\begin{description}[font=\normalfont,style=sameline,
leftmargin=\lyxlabelwidth,#1]}
{\end{description}}
  \theoremstyle{remark}
  \newtheorem*{notation*}{\protect\notationname}
  \theoremstyle{remark}
  \newtheorem*{rem*}{\protect\remarkname}
  \theoremstyle{definition}
  \newtheorem*{example*}{\protect\examplename}
  \theoremstyle{plain}
  \newtheorem{prop}[thm]{\protect\propositionname}
 \newlist{casenv}{enumerate}{4}
 \setlist[casenv]{leftmargin=*,align=left,widest={iiii}}
 \setlist[casenv,1]{label={{\itshape\ \casename} \arabic*.},ref=\arabic*}
 \setlist[casenv,2]{label={{\itshape\ \casename} \roman*.},ref=\roman*}
 \setlist[casenv,3]{label={{\itshape\ \casename\ \alph*.}},ref=\alph*}
 \setlist[casenv,4]{label={{\itshape\ \casename} \arabic*.},ref=\arabic*}
  \theoremstyle{plain}
  \newtheorem{lem}[thm]{\protect\lemmaname}
  \theoremstyle{plain}
  \newtheorem{conjecture}[thm]{\protect\conjecturename}
  \theoremstyle{plain}
  \newtheorem{fact}[thm]{\protect\factname}
  \theoremstyle{plain}
  \newtheorem{cor}[thm]{\protect\corollaryname}
  \theoremstyle{remark}
  \newtheorem{claim}[thm]{\protect\claimname}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usepackage[nottoc]{tocbibind} 
\usepackage{hyperref}
\usepackage{tikz}
%\tikzstyle{every node}=[circle, draw=black,inner sep=0.2em]
%\usetikzlibrary{fixedpointarithmetic}
%\usetikzlibrary{positioning}
%\let\nchapter\chapter
%\renewcommand*\chapter[1]{\nchapter*{#1}\addcontentsline{toc}{chapter}{#1}}
%\theoremstyle{definition}
%\newtheorem{notation}[thm]{Notation}
%\newtheorem*{notation*}{Notation}
%\numberwithin{thm}{chapter}

\usepackage{prettyref}
\newrefformat{chap}{\textbf{Kapitel~\ref{#1}}}
\newrefformat{sec}{\textbf{Abschnitt~\ref{#1}}}
\newrefformat{sub}{\textbf{Abschnitt~\ref{#1}}}
\newrefformat{thm}{\textbf{Theorem~\ref{#1}}}
\newrefformat{lem}{\textbf{Lemma~\ref{#1}}}
\newrefformat{prop}{\textbf{Satz~\ref{#1}}}

\makeatother

\usepackage{babel}
  \providecommand{\claimname}{Behauptung}
  \providecommand{\conjecturename}{Vermutung}
  \providecommand{\corollaryname}{Korollar}
  \providecommand{\definitionname}{Definition}
  \providecommand{\examplename}{Beispiel}
  \providecommand{\factname}{Fakt}
  \providecommand{\lemmaname}{Lemma}
  \providecommand{\notationname}{Notation}
  \providecommand{\propositionname}{Satz}
  \providecommand{\remarkname}{Bemerkung}
 \providecommand{\casename}{Fall}
\providecommand{\theoremname}{Theorem}

\begin{document}

\title{Logische Charakterisierungen von Symmetrischen Schaltkreisfamilien}


\subject{Master-Arbeit}


\author{Christoph Burschka\\
\texttt{christoph@burschka.de}}


\publishers{Betreuerin: Prof. Dr. Nicole Schweikardt\\
Goethe-Universität Frankfurt am Main\\
Wintersemester 2015 / 2016}

\maketitle
\tableofcontents{}


\chapter{Einleitung}

Wir betrachten die logische Charakterisierung von Booleschen Schaltkreisklassen.

\pagebreak{}


\chapter{Ergebnisse}

Es werden die folgenden Äquivalenzen (nach Anderson und Dawar 2014\cite{anderson_et_al:LIPIcs:2014:4445})
zwischen Fixpunktlogiken und Schaltkreisklassen nachgewiesen:
\begin{thm}
\textbf{\label{thm:fp}}

Die folgenden Paare von Klassen von Anfragen auf endlichen Strukturen
sind äquivalent:\end{thm}
\begin{enumerate}
\item Die Logik $\mathrm{FP}+\mathbf{ORD}$ und $P$-uniforme $\mathrm{SBC}$-Schaltkreise.
\item Die Logik $\mathrm{FP}+C$ und $P$-uniforme $\mathrm{SBC}+\mathbf{MAJ}$-Schaltkreise.
\item Die Logik $\mathrm{FP}+\mathbf{ARB}$ und $P/\mathrm{poly}$-uniforme
$\mathrm{SBC}+\mathbf{MAJ}$-Schaltkreise.
\item Die Logik $\mathrm{FP}+\mathbf{ARB}+C$ und $P/\mathrm{poly}$-uniforme
$\mathrm{SBC+\mathbf{MAJ}}-$Schaltkreise.\end{enumerate}
\begin{thm}
$\mathrm{FO}+\Upsilon$, invariantes $\mathrm{FO}\left(\mathrm{arb}\right)$
\begin{enumerate}
\item Jede $\left(\mathrm{FO}+\Upsilon\right)\left[\sigma\right]$-Formel
$\varphi$ ist äquivalent zu einer arb-invarianten $\mathrm{FO}\left[\sigma_{\mathrm{arb}}\right]$-Formel
$\varphi$.
\item Es existiert eine $\sigma$-Anfrage, die in der arb-invarianten $\mathrm{FO}\left[\sigma_{\mathrm{arb}}\right]$-Logik
definierbar ist, aber nicht $\left(\mathrm{FO}+\Upsilon\right)\left[\sigma\right]$-definierbar
ist.
\end{enumerate}
\end{thm}
\pagebreak{}


\chapter{Grundlagen}

Diese Arbeit verwendet verschiedene Begriffe der endlichen Modelltheorie
und der Graphentheorie. Diese Begriffe werden im folgenden formal
definiert.


\section{Notationen}
\begin{defn}
\textbf{\label{def:Tupel}Tupel}

Ein Tupel $\left(x_{1},\cdots,x_{n}\right)$ von Elementen einer Menge
$U$ wird durch $\bar{x}\in U^{n}$ notiert.
\begin{itemize}
\item Die \textbf{Stelligkeit} $\mathrm{ar}\left(\bar{x}\right)$ eines
Tupels $\bar{x}$ sei die Anzahl seiner Elemente, und ein $n$-stelliges
Tupel heiße kurz ,,$n$-Tupel``.
\item Für ein $m$-Tupel $\bar{x}$ und ein $n$-Tupel $\bar{y}$ sei $\bar{x}\bar{y}$
das $\left(m+n\right)$-Tupel $\left(x_{1},\cdots,x_{m},y_{1},\cdots,y_{n}\right)$.
\item Das $0$-stellige Tupel wird durch $\left\langle \right\rangle $
notiert.
\item Es sei $\left[\bar{x}\right]=\left\{ x_{1},\cdots,x_{k}\right\} $
die Menge der Elemente des Tupels $\bar{x}$. Umgekehrt sei für eine
geordnete Menge $U=\left\{ u_{1},\cdots,u_{k}\right\} $ das Tupel
$\bar{U}=\left(u_{1},\cdots,u_{k}\right)$ mit $u_{1}<\cdots<u_{k}$
definiert.
\end{itemize}
\end{defn}

\begin{defn}
\textbf{\label{def:Relation}Relation}

Für eine Menge $A$ und $k\in\mathbb{N}$ sei $R\subseteq A^{k}$
eine $k$-stellige Relation über $A$. Sei $2^{A}=\left\{ A'\mid A'\subseteq A\right\} $
die Potenzmenge von $A$.

Für jede Relation $R\subseteq A^{k}$ sei $\left[R\right]:A^{k}\rightarrow\left\{ 0,1\right\} $
die folgende Funktion: 
\[
\left[R\right]\left(\bar{a}\right)\coloneqq\begin{cases}
1 & \mathrm{falls}\,\,\bar{a}\in R\\
0 & \mathrm{sonst}
\end{cases}
\]
 
\end{defn}

\begin{notation}
\textbf{Minimum / Maximum}

Für eine Ordnung $\preceq$ auf einer Menge $X$ seien $\min_{\preceq}\left(X\right)\in X$
und $\max_{\preceq}\left(X\right)\in X$ diejenigen Elemente (sofern
vorhanden), so dass für alle Elemente $z\in X$ gilt:
\[
\min_{\preceq}\left(X\right)\preceq z\preceq\max_{\preceq}\left(X\right)
\]


Für eine Funktion $f:U\rightarrow\mathbb{N}$ und eine Menge $X\subseteq U$
bezeichnen $\min_{x\in X}f\left(x\right)\in\mathbb{N}$ und $\max_{x\in X}f\left(x\right)\in\mathbb{N}$
die folgende Abkürzungen:
\begin{eqnarray*}
\min_{x\in X}f\left(x\right) & \coloneqq & \min_{\leqslant}\left\{ f\left(x\right)\mid x\in X\right\} \\
\max_{x\in X}f\left(x\right) & \coloneqq & \max_{\leqslant}\left\{ f\left(x\right)\mid x\in X\right\} 
\end{eqnarray*}

\end{notation}

\begin{defn}
\textbf{Asymptotische Klassen}

Für jede Funktion $f:\mathbb{N}\rightarrow\mathbb{N}$ definieren
wir die Funktionsklassen $\mathcal{O}\left(f\right),\Omega\left(f\right)$:
\begin{itemize}
\item Es gelte $g\in\mathcal{O}\left(f\right)$ genau dann wenn für ein
$n_{0}\in\mathbb{N}$, ein $c\in\mathbb{N}$ und alle $n\geqslant n_{0}$
gilt: $g\left(n\right)\leqslant c\cdot f\left(n\right)$.
\item Es gelte $g\in\Omega\left(f\right)$ genau dann wenn $f\in\mathcal{O}\left(g\right)$.
\end{itemize}
\end{defn}

\begin{defn}
\textbf{Intervall}

Die Menge $\left\{ i\in\mathbb{N}\mid a\leqslant i\leqslant b\right\} $
wird durch $\left[a,b\right]$ abgekürzt. Ein reelles Intervall $\left\{ i\in\mathbb{R}\mid a\leqslant i\leqslant b\right\} $
oder $\left\{ i\in\mathbb{R}\mid a\leqslant i<b\right\} $ wird durch
$\mathbb{R}_{\left[a,b\right]}$ oder $\mathbb{R}_{\left[a,b\right[}$
abgekürzt.
\end{defn}

\begin{defn}
\textbf{Abbildung}

Für eine Abbildung $\pi:A\rightarrow B$ und $a\in A$ wird $\pi\left(a\right)$
auch durch $\pi a$ abgekürzt.

Es sei $\mathbf{id}:A\rightarrow A$ die Identität mit $\mathbf{id}\left(a\right)=a$
für alle $a\in A$.

Jede Abbildung $\pi:A\rightarrow B$ wird auf natürliche Weise auf
Tupel, Teilmengen und Relationen von $A$ erweitert:
\begin{eqnarray*}
\pi\left(x_{1},\cdots,x_{k}\right) & \coloneqq & \left(\pi x_{1},\cdots,\pi x_{n}\right)\\
\pi\left\{ x_{1},\cdots,x_{n}\right\}  & \coloneqq & \left\{ \pi x_{1},\cdots,\pi x_{n}\right\} \\
\pi\left\{ \left(x_{1,1},\cdots,x_{1,k}\right),\cdots,\left(x_{n,1},\cdots,x_{n,k}\right)\right\}  & \coloneqq & \left\{ \left(\pi x_{1,1},\cdots,\pi x_{1,k}\right),\cdots,\left(\pi x_{n,1},\cdots,\pi x_{n,k}\right)\right\} 
\end{eqnarray*}


Eine Abbildung $\pi:A\rightarrow B$ (mit $A=\left\{ a_{1},\cdots,a_{n}\right\} $
wird extensional durch $\left(\begin{array}{c}
a_{1}\\
\pi a_{1}
\end{array}\cdots\begin{array}{c}
a_{n}\\
\pi a_{n}
\end{array}\right)$ notiert.

Wenn $\bar{a}=\left(a_{1},\cdots,a_{n}\right)$ und $\bar{b}=\left(\pi a_{1},\cdots\pi a_{n}\right)\in B^{n}$,
so wird $\pi:A\rightarrow B$ kurz durch $\left(\bar{a}\mapsto\bar{b}\right)$
notiert.

Für zwei Abbildungen $\pi_{1}:B\rightarrow C$ und $\pi_{2}:A\rightarrow B$
sei $\pi_{1}\circ\pi_{2}:A\rightarrow C$ (kurz $\pi_{1}\pi_{2}$)
die folgende Abbildung: 
\[
\pi_{1}\pi_{2}\coloneqq\left(\begin{array}{c}
a_{1}\\
\pi_{1}\left(\pi_{2}\left(a_{1}\right)\right)
\end{array}\cdots\begin{array}{c}
a_{n}\\
\pi_{1}\left(\pi_{2}\left(a_{n}\right)\right)
\end{array}\right)
\]


Für zwei Abbildungen $\pi:A\rightarrow B$ und $\pi':A'\rightarrow B'$
mit disjunkten Definitionsbereichen sei $\pi\cup\pi':A\uplus A'\rightarrow B\cup B'$
die folgende Abbildung:
\[
\left(\pi\cup\pi'\right)x\coloneqq\begin{cases}
\pi x & \mathrm{falls}\,\,x\in A\\
\pi'x & \mathrm{falls}\,\,x\in A'
\end{cases}
\]


Für $\pi:A\rightarrow B$ und $A'\subseteq A$ sei $\pi_{\mid A'}:A'\rightarrow B$
die Reduktion auf eine Teilmenge des Definitionsbereichs, und $\pi_{\backslash A'}:A\backslash A'\rightarrow B$
die Reduktion auf das Komplement.

Die Menge $\mathrm{Abb}\left(A,B\right)$ bezeichne für $\left|A\right|=\left|B\right|$
alle $n!$ Bijektionen $\pi:A\rightarrow B$.
\end{defn}

\begin{defn}
\textbf{Permutation}

Eine Permutation von $U$ ist eine bijektive Abbildung $\pi:U\rightarrow U$.

Die Menge aller Permutationen von $U$ sei $\mathrm{Sym}_{U}$; diese
bilden eine Symmetrie-Gruppe bezüglich der Verkettung $\circ:\mathrm{Sym}_{U}\times\mathrm{Sym}_{U}\rightarrow\mathrm{Sym}_{U}$
mit dem neutralen Element $\mathbf{id}$.

Es sei $\pi^{-1}$ die inverse Abbildung mit $\pi^{-1}\pi=\pi\pi^{-1}=\mathbf{id}$.

Eine Transposition sei eine Permutation, die zwei Elemente $u_{i}$
und $u_{j}$ vertauscht und alle anderen Elemente fixiert. Diese wird
kurz durch $\left(u_{i}u_{j}\right)$ notiert.
\end{defn}
\pagebreak{}


\section{Relationale Strukturen}

Wir betrachten Anfragen und Eigenschaften auf Graphen und allgemeinen
relationalen Strukturen.
\begin{defn}
\textbf{Relationale Signatur}

Eine relationale Signatur $\sigma$ ist eine Menge von Relationssymbolen.
Jedes Symbol $R\in\sigma$ hat eine feste Stelligkeit $\mathrm{ar}\left(R\right)=k\in\mathbb{N}_{\geqslant1}$.
Gegebenenfalls wird die Stelligkeit kompakt durch $R/k\in\sigma$
notiert.
\end{defn}

\begin{defn}
\textbf{Endliche Struktur}

Eine endliche $\sigma$-Struktur $\mathfrak{A}=\left(A,\left(R^{\mathfrak{A}}\right)_{R\in\sigma}\right)$
besteht aus einem endlichen, nicht-leeren Universum $A$ und einer
Interpretation $R^{\mathfrak{A}}\subseteq A^{k}$ für jedes Symbol
$R/k\in\sigma$.

Wir formalisieren die Interpretation als eine Abbildung $\square^{\mathfrak{A}}:\sigma\rightarrow\bigcup_{k\in\mathbb{N}}2^{\left(A^{k}\right)}$,
die jedem Symbol eine Relation der entsprechenden Stelligkeit zuweist.
Damit kann die Interpretation gegebenenfalls auch explizit durch $\mathfrak{A}=\left(A,\square^{\mathfrak{A}}\right)$
notiert werden, um die Zuordnung von Symbolen und Relationen zu verdeutlichen:
\[
\mathfrak{A}:=\left(A,\left(\begin{array}{ccc}
R_{1} & \cdots & R_{k}\\
R_{1}^{\mathfrak{A}} & \cdots & R_{k}^{\mathfrak{A}}
\end{array}\right)\right)
\]

\begin{enumerate}
\item Für eine endliche Menge $U$ sei $\mathbf{FIN}^{U}\left(\sigma\right)$
die Menge aller $\sigma$-Strukturen über dem Universum $U$.
\item Für $n\in\mathbb{N}_{\geqslant1}$ seien $\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
die $\sigma$-Strukturen über einem beliebigen Universum der Größe
$n$.
\item Seien $\mathbf{FIN}\left(\sigma\right)\coloneqq\bigcup_{n\in\mathbb{N}_{\geqslant1}}\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
die endlichen $\sigma$-Strukturen.
\end{enumerate}
\end{defn}

\begin{defn}
\textbf{Geordnete Struktur}

Sei $\sigma$ eine relationale Signatur, die nicht das zweistellige
Symbol $\leqslant$ enthält.

Für $a,b\in\mathbb{N}$ seien $\mathbf{FIN}_{\leqslant}^{\left[a,b\right]}\left(\sigma\right)\subseteq\mathbf{FIN}^{\left[a,b\right]}\left(\sigma\cup\left\{ \leqslant\right\} \right)$
die endlichen $\sigma\cup\left\{ \leqslant\right\} $-Strukturen über
$\left[a,b\right]$, wobei $\leqslant$ durch die natürliche Ordnung
von $\left[a,b\right]$ interpretiert wird, und sei $\mathbf{FIN}_{\leqslant}\left(\sigma\right)\coloneqq\bigcup_{a,b\in\mathbb{N}}\mathbf{FIN}_{\leqslant}^{\left[a,b\right]}\left(\sigma\right)$
die Klasse aller endlichen geordneten $\sigma\cup\left\{ \leqslant\right\} $-Strukturen. 

Der Lesbarkeit halber wird die Infixnotation $a\leqslant b$ anstelle
von $\left(a,b\right)\in\leqslant$ oder $\leqslant\left(a,b\right)$
verwendet.

Die Symbole $\dot{\leqslant}$ und $\dot{=}$ seien gleichbedeutend
mit den Symbolen $\leqslant$ und $=$, und werden der Lesbarkeit
halber in Gleichungen wie $\varphi=x\dot{=}y$ und $\varphi=x\dot{\leqslant}y$
verwendet.
\end{defn}

\begin{defn}
\textbf{\label{def:Isomorphismus}Isomorphismus}

Für zwei $\sigma$-Strukturen $\mathfrak{A}$ und $\mathfrak{B}$
sei eine bijektive Abbildung $\pi:A\rightarrow B$ ein Isomorphismus,
falls $\pi R^{\mathfrak{A}}=R^{\mathfrak{B}}$ für alle Symbole $R\in\sigma$
gilt.

Die Abbildung $\pi$ wird auf natürliche Weise auf Strukturen erweitert:
\[
\pi\mathfrak{A}\coloneqq\left(\pi A,\left(\pi R^{\mathfrak{A}}\right)_{R\in\sigma}\right)
\]


Der Isomorphismus wird kurz durch $\pi:\mathfrak{A}\tilde{\rightarrow}\mathfrak{B}$
notiert. Zwei Strukturen heißen isomorph (kurz $\mathfrak{A}\cong\mathfrak{B}$),
falls ein $\pi:\mathfrak{A}\tilde{\rightarrow}\mathfrak{B}$ existiert.

Ein Automorphismus $\pi:\mathfrak{A}\tilde{\rightarrow}\mathfrak{A}$
sei ein Isomorphismus von $\mathfrak{A}$ zu sich selbst. Die Menge
aller Automorphismen von $\mathfrak{A}$ sei $\mathrm{Aut}_{\mathfrak{A}}$;
diese bilden wiederum eine Gruppe bezüglich $\circ$ und dem neutralen
Element $\mathbf{id}$.
\end{defn}

\begin{defn}
\textbf{\label{def:Disjunkte-Vereinigung}Vereinigung von Strukturen}

Zwei Strukturen können vereinigt werden, wenn sie entweder disjunkte
Signaturen oder die gleiche Signatur besitzen. Für eine $\sigma_{1}$-Struktur
$\mathfrak{A}$ und eine $\sigma_{2}$-Struktur $\mathfrak{B}$ gilt:
\begin{enumerate}
\item Wenn $\sigma_{1}\cap\sigma_{2}=\emptyset$, so ist $\mathfrak{A}\cup\mathfrak{B}$
die folgende $\left(\sigma_{1}\cup\sigma_{2}\right)$-Struktur:
\[
\mathfrak{A}\cup\mathfrak{B}\coloneqq\left(A\cup B,\left(R^{\mathfrak{A}}\right)_{R\in\sigma_{1}},\left(R^{\mathfrak{B}}\right)_{R\in\sigma_{2}}\right)
\]

\item Wenn $\sigma_{1}=\sigma_{2}=\sigma$, so ist $\mathfrak{A}\cup\mathfrak{B}$
die folgende $\sigma$-Struktur:
\[
\mathfrak{A}\cup\mathfrak{B}\coloneqq\left(A\cup B,\left(R^{\mathfrak{A}}\cup R^{\mathfrak{B}}\right)_{R\in\sigma}\right)
\]

\end{enumerate}
Falls das Universum der beiden Strukturen ebenfalls disjunkt ist,
so heißt $\mathfrak{A}\cup\mathfrak{B}=\mathfrak{A}\uplus\mathfrak{B}$
die \textbf{disjunkte Vereinigung} der Strukturen.
\end{defn}

\begin{defn}
\textbf{\label{def:Induzierte-Teilstruktur}Induzierte Teilstruktur}

Für eine Relation $R\subseteq A^{k}$ und eine Teilmenge $A'\subseteq A$
sei $R_{\mid A'}\coloneqq R\cap\left(A'\right)^{k}$ die von $A'$
induzierte Teilrelation.

Für eine $\sigma$-Struktur $\mathfrak{A}$ sei $\mathfrak{A}_{\mid A'}\coloneqq\left(A',\left(R_{\mid A'}^{\mathfrak{A}}\right)_{R\in\sigma}\right)$
die von der Teilmenge $A'$ in $\mathfrak{A}$ induzierte Teilstruktur.
\end{defn}

\begin{defn}
\textbf{Anfrage}

Eine $k$-stellige $\sigma$\textbf{-Anfrage} $q$ sei eine Abbildung
jeder endlichen $\sigma$-Struktur $\mathfrak{A}\in\mathbf{FIN}\left(\sigma\right)$
auf eine $k$-stellige Relation $q\left(\mathfrak{A}\right)\subseteq A^{k}$.
Wir schreiben auch $\mathrm{ar}\left(q\right)=k$.

Eine $\sigma$\textbf{-Eigenschaft} $S\subseteq\mathbf{FIN}\left(\sigma\right)$
sei eine Klasse von $\sigma$-Strukturen und entspreche der 0-stelligen
Anfrage $q_{S}$:
\begin{eqnarray*}
q_{S}\left(\mathfrak{A}\right) & \coloneqq & \begin{cases}
\left\{ \left\langle \right\rangle \right\}  & \mathrm{falls}\,\mathfrak{A}\in S\\
\emptyset & \mathrm{sonst}
\end{cases}
\end{eqnarray*}


Per Definition sind alle $\sigma$-Anfragen und $\sigma$-Eigenschaften
unter Isomorphismen abgeschlossen: Für $\pi:\mathfrak{A}\tilde{\rightarrow}\mathfrak{B}$
gilt $\pi q\left(\mathfrak{A}\right)=q\left(\pi\mathfrak{A}\right)$
und $\mathfrak{A}\in S\Leftrightarrow\pi\mathfrak{A}\in S$.
\end{defn}
\pagebreak{}


\chapter{Logik}


\section{Logische Grundlagen}

Wir betrachten logische Sprachen auf relationalen Signaturen $\sigma$,
deren Ausdrücke auf endlichen $\sigma$-Strukturen ausgewertet werden.
\begin{defn}
Sei $\mathbf{var}$ die Menge aller erststufigen Variablen.

Für einen Ausdruck $\omega$ sei $\mathrm{var}\left(\omega\right)$
die Menge der darin vorkommenden Variablen, und $\mathrm{frei}\left(\omega\right)\subseteq\mathrm{var}\left(\omega\right)$
die Menge der freien Variablen.

In einer Struktur $\mathfrak{A}$ sei eine \textbf{Belegung} $\beta$
eine partielle Abbildung $\beta:\mathbf{var}\rightarrow A$ von Variablen
auf Elemente des Universums.
\end{defn}
Die Auswertungsfunktion für eine Struktur $\mathfrak{A}$ und eine
Belegung $\beta$ wird durch $\left\llbracket \cdot\right\rrbracket \left(\mathfrak{A},\beta\right)$
notiert.
\begin{defn}
Eine Logik $\mathcal{L}\left[\sigma\right]$ besteht aus der Sprache
der $\mathcal{L}\left[\sigma\right]$-Terme, der Sprache der $\mathcal{L}\left[\sigma\right]$-Formeln,
und der Auswertungsfunktion $\left\llbracket \cdot\right\rrbracket $.

Für einen $\mathcal{L}\left[\sigma\right]$-Term $t$ ist $\left\llbracket t\right\rrbracket \left(\mathfrak{A},\beta\right)\in A$
ein Element des Universums. Für eine $\mathcal{L}\left[\sigma\right]$-Formel
$\varphi$ ist $\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\beta\right)\in\left\{ 0,1\right\} $
ein Wahrheitswert.
\end{defn}

\begin{defn}
Für eine Formel $\varphi$ und ein Tupel $\bar{x}\in\mathbf{var}^{k}$
mit $\mathrm{frei}\left(\varphi\right)=\left\{ x_{1},\cdots,x_{k}\right\} $
und $\left|\left\{ x_{1},\cdots,x_{k}\right\} \right|=k$ sei das
Tupel $\bar{x}=x_{1}\cdots x_{k}$ ein \textbf{Argument }von $\varphi$.
Die Argumente von $\varphi$ unterscheiden sich nur in der Reihenfolge
der Variablen. Durch $\varphi\left(\bar{x}\right)$ wird ein bestimmtes
Argument $\bar{x}$ festgelegt.

Die \textbf{Stelligkeit }einer logischen Formel (beziehungsweise ihrer
Argumente) bezeichne die Anzahl der frei vorkommenden Variablen: $\mathrm{ar}\left(\varphi\right)=\left|\mathrm{frei}\left(\varphi\right)\right|$.

Ein \textbf{Satz} sei eine Formel ohne freie Variablen.
\end{defn}

\begin{defn}
Es sei $\mathtt{MF}\left(\omega\right)$ die maximale Anzahl freier
Variablen jedes Teilausdrucks von $\omega$: 
\begin{eqnarray*}
\mathtt{MF}\left(\omega\right) & \coloneqq & \max\left\{ \mathrm{ar}\left(\omega'\right)\mid\omega'\,\mbox{ist Teilausdruck von}\,\omega\right\} 
\end{eqnarray*}

\end{defn}

\begin{defn}
Für eine $k$-stellige Formel $\varphi$ und eine Belegung $\beta:\mathrm{frei}\left(\varphi\right)\rightarrow A$
schreiben wir $\mathfrak{A}\models\varphi^{\beta}$ genau dann wenn
$\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\beta\right)=1$.

Für $\varphi\left(\bar{x}\right)$ und $\bar{a}\in A^{\mathrm{ar}\left(\varphi\right)}$
schreiben wir $\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\bar{a}\right)$
anstelle von $\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\left(\bar{x}\mapsto\bar{b}\right)\right)$,
beziehungsweise $\mathfrak{A}\models\varphi\left[\bar{a}\right]$
anstelle von $\mathfrak{A}\models\varphi^{\bar{x}\mapsto\bar{a}}$.

Entsprechend sei $q_{\varphi\left(\bar{x}\right)}\left(\mathfrak{A}\right)\coloneqq\left\{ \bar{a}\in A^{k}\mid\mathfrak{A}\models\varphi\left[\bar{a}\right]\right\} $
die Relation der $\varphi$ erfüllenden Tupel. Somit beschreibt jede
$\mathcal{L}\left[\sigma\right]$-Formel $\varphi\left(\bar{x}\right)$
eine $\sigma$-Anfrage $q_{\varphi\left(\bar{x}\right)}$, und jeder
Satz eine $\sigma$-Eigenschaft.

(Da die Reihenfolge der Spalten der Relation von der Wahl des Arguments
$\bar{x}$ abhängt, wird es stets mit angegeben.)
\end{defn}

\begin{defn}
Für eine Formel $\varphi$ und eine Belegung $\beta:X\rightarrow A$
mit $X\subsetneqq\mathrm{frei}\left(\varphi\right)$ sei $\varphi^{\beta}$
ein \textbf{partiell belegter} Ausdruck; es sei $\mathrm{frei}\left(\varphi^{\beta}\right)=\mathrm{frei}\left(\varphi\right)\backslash X$.

Es stehe $\left\llbracket \varphi^{\beta}\right\rrbracket \left(\mathfrak{A},\beta'\right)$
für die Auswertung $\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\beta\cup\beta'\right)$
mit $\beta':\mathrm{frei}\left(\varphi^{\beta}\right)\rightarrow A$.
$q_{\varphi^{\beta}\left(\bar{x}'\right)}=\left\{ \bar{a}\in A^{\ell}\mid\mathfrak{A}\models\varphi^{\beta}\left[\bar{a}\right]\right\} $
die von $\varphi^{\beta}$ definierte $\sigma$-Anfrage.
\end{defn}

\begin{defn}
Für eine $\mathcal{L}\left[\sigma\right]$-Formel $\varphi$ und $n\in\mathbb{N}$
drücke $\models_{n}\varphi$ aus, dass diese von allen $\sigma$-Strukturen
$\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
der Größe $n$ unter allen Belegungen erfüllt wird. Die Notation $\models_{\mathrm{fin}}\varphi$
drücke aus, dass $\varphi$ von allen endlichen $\sigma$-Strukturen
$\mathfrak{A}\in\mathbf{FIN}\left(\sigma\right)$ unter allen Belegungen
erfüllt wird.

Falls $\models_{n}\left(\varphi\leftrightarrow\psi\right)$, so heißen
$\varphi$ und $\psi$ $n$-\textbf{äquivalent}. Insbesondere bedeutet
dies, dass $\varphi$ und $\psi$ die gleiche Anfrage $q_{\varphi\left(\bar{x}\right)}=q_{\psi\left(\bar{x}\right)}$
auf Strukturen der Größe $n$ definieren.
\end{defn}
\pagebreak{}


\section{Prädikatenlogik erster Stufe}

Diese Arbeit befasst sich ausschließlich mit relationalen Logiken
ohne Funktions- oder Konstantensymbole.
\begin{defn}
\label{def:fo}Die Syntax und Semantik der relationalen Logik erster
Stufe $\mathrm{FO}\left[\sigma\right]$ sind wie folgt definiert.\end{defn}
\begin{elabeling}{00.00.0000}
\item [{(TV)}] Für jede Variable $x\in\mathbf{var}$ ist $x$ ein $\mathrm{FO}\left[\sigma\right]$-Term.
\[
\mathrm{frei}\left(x\right)=\mathrm{var}\left(x\right)=\left\{ x\right\} 
\]
\[
\mathtt{MF}\left(x\right)=1
\]
\[
\left\llbracket x\right\rrbracket \left(\mathfrak{A},\beta\right)=\beta x
\]

\item [{(AR)}] Für jedes Relationssymbol $R/k\in\sigma$ und jedes $k$-Tupel
von $\mathrm{FO}\left[\sigma\right]$-Termen $\bar{x}$ ist $R\bar{x}$
eine $\mathrm{FO}\left[\sigma\right]$-Formel.
\begin{eqnarray*}
\mathrm{frei}\left(R\bar{x}\right)=\bigcup_{i=1}^{k}\mathrm{frei}\left(x_{i}\right) &  & \mathrm{var}\left(R\bar{x}\right)=\bigcup_{i=1}^{k}\mathrm{var}\left(x_{i}\right)
\end{eqnarray*}
\[
\mathtt{MF}\left(R\bar{x}\right)=\max\left(\max_{i=1}^{k}\mathtt{MF}\left(x_{i}\right),\left|\bigcup_{i=1}^{k}\mathrm{frei}\left(x_{i}\right)\right|\right)
\]
\begin{eqnarray*}
\left\llbracket R\bar{x}\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \left[R^{\mathfrak{A}}\right]\left(\left\llbracket x_{1}\right\rrbracket \left(\mathfrak{A},\beta\right),\cdots,\left\llbracket x_{k}\right\rrbracket \left(\mathfrak{A},\beta\right)\right)
\end{eqnarray*}

\item [{(AE)}] Für zwei $\mathrm{FO}\left[\sigma\right]$-Terme $x_{1},x_{2}$
ist $x_{1}\dot{=}x_{2}$ eine $\mathrm{FO}\left[\sigma\right]$-Formel.
\begin{eqnarray*}
\mathrm{frei}\left(x_{1}\dot{=}x_{2}\right)=\bigcup_{i=1}^{2}\mathrm{frei}\left(x_{i}\right) &  & \mathrm{var}\left(x_{1}\dot{=}x_{2}\right)=\bigcup_{i=1}^{2}\mathrm{var}\left(x_{i}\right)
\end{eqnarray*}
\[
\mathtt{MF}\left(x_{1}\dot{=}x_{2}\right)=\max\left(\max_{i=1}^{2}\mathtt{MF}\left(x_{i}\right),\left|\bigcup_{i=1}^{2}\mathrm{frei}\left(x_{i}\right)\right|\right)
\]
\begin{eqnarray*}
\left\llbracket x\dot{=}y\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \begin{cases}
1 & \mathrm{falls}\,\left\llbracket x\right\rrbracket \left(\mathfrak{A},\beta\right)=\left\llbracket y\right\rrbracket \left(\mathfrak{A},\beta\right)\\
0 & \mathrm{sonst}
\end{cases}
\end{eqnarray*}

\item [{(N)}] Für eine $\mathrm{FO}\left[\sigma\right]$-Formel $\varphi$
ist $\neg\varphi$ eine $\mathrm{FO}\left[\sigma\right]$-Formel.
\begin{eqnarray*}
\mathrm{frei}\left(\neg\varphi\right)=\mathrm{frei}\left(\varphi\right) &  & \mathrm{var}\left(\neg\varphi\right)=\mathrm{var}\left(\varphi\right)
\end{eqnarray*}
\[
\mathtt{MF}\left(\neg\varphi\right)=\mathtt{MF}\left(\varphi\right)
\]
\[
\left\llbracket \neg\varphi\right\rrbracket \left(\mathfrak{A},\beta\right)=1-\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\beta\right)
\]

\item [{(J)}] Für $k\geqslant2$ $\mathrm{FO}\left[\sigma\right]$-Formeln
$\varphi_{1},\cdots,\varphi_{k}$ und einen Junktor $\gamma\in\left\{ \wedge,\vee,\rightarrow,\leftrightarrow\right\} $
(mit $k=2$ für $\gamma\in\left\{ \rightarrow,\leftrightarrow\right\} $)
ist auch $\left(\varphi_{1}\gamma\cdots\gamma\varphi_{k}\right)$
eine $\mathrm{FO}\left[\sigma\right]$-Formel. 
\begin{eqnarray*}
\mathrm{frei}\left(\varphi_{1}\gamma\cdots\gamma\varphi_{k}\right)=\bigcup_{i=1}^{k}\mathrm{frei}\left(\varphi_{i}\right) &  & \mathrm{var}\left(\varphi_{1}\gamma\cdots\gamma\varphi_{k}\right)=\bigcup_{i=1}^{k}\mathrm{var}\left(\varphi_{i}\right)
\end{eqnarray*}
\[
\mathtt{MF}\left(\varphi_{1}\gamma\cdots\gamma\varphi_{k}\right)=\max\left(\max_{i=1}^{k}\mathtt{MF}\left(\varphi_{i}\right),\left|\bigcup_{i=1}^{k}\mathrm{frei}\left(\varphi_{i}\right)\right|\right)
\]
\begin{eqnarray*}
\left\llbracket \varphi_{1}\wedge\cdots\wedge\varphi_{k}\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \min_{1\leqslant i\leqslant k}\left\llbracket \varphi_{i}\right\rrbracket \left(\mathfrak{A},\beta\right)\\
\left\llbracket \varphi_{1}\vee\cdots\vee\varphi_{k}\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \max_{1\leqslant i\leqslant k}\left\llbracket \varphi_{i}\right\rrbracket \left(\mathfrak{A},\beta\right)\\
\left\llbracket \varphi_{1}\rightarrow\varphi_{2}\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \left\llbracket \neg\varphi_{1}\vee\varphi_{2}\right\rrbracket \left(\mathfrak{A},\beta\right)\\
\left\llbracket \varphi_{1}\leftrightarrow\varphi_{2}\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \left\llbracket \left(\varphi_{1}\rightarrow\varphi_{2}\right)\wedge\left(\varphi_{2}\rightarrow\varphi_{1}\right)\right\rrbracket \left(\mathfrak{A},\beta\right)
\end{eqnarray*}

\item [{(Q)}] Für einen Quantor $Q\in\left\{ \exists,\forall\right\} $,
eine Variable $x\in\mathbf{var}$ und eine $\mathrm{FO}\left[\sigma\right]$-Formel
$\varphi$ ist $Qx\varphi$ eine $\mathrm{FO}\left[\sigma\right]$-Formel.
\begin{eqnarray*}
\mathrm{frei}\left(Qx\varphi\right)=\mathrm{frei}\left(\varphi\right)\backslash\left\{ x\right\}  &  & \mathrm{var}\left(Qx\varphi\right)=\mathrm{var}\left(\varphi\right)\cup\left\{ x\right\} 
\end{eqnarray*}
\[
\mathtt{MF}\left(Qx\varphi\right)=\mathtt{MF}\left(\varphi\right)
\]
\begin{eqnarray*}
\left\llbracket \exists x\varphi\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \max_{a\in A}\left(\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\beta_{\backslash\left\{ x\right\} }\uplus\left(\begin{array}{c}
x\\
a
\end{array}\right)\right)\right)\\
\left\llbracket \forall x\varphi\right\rrbracket \left(\mathfrak{A},\beta\right) & = & \min_{a\in A}\left(\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\beta_{\backslash\left\{ x\right\} }\uplus\left(\begin{array}{c}
x\\
a
\end{array}\right)\right)\right)
\end{eqnarray*}
Ohne Beschränkung der Allgemeinheit gelte für $Qx\varphi$ stets $x\in\mathrm{frei}\left(\varphi\right)$,
denn $Qx\varphi\equiv Qx\left(x\dot{=}x\wedge\varphi\right)$.\end{elabeling}
\begin{notation*}
Im folgenden stehen $Q\bar{x}\varphi$ und $\bar{x}=\bar{y}$ abgekürzt
für $Qx_{1}\cdots Qx_{k}\varphi$ und $\bigwedge_{i=1}^{k}\left(x_{i}=y_{i}\right)$.\end{notation*}
\begin{defn}
Eine $\mathrm{FO}\left[\sigma\right]$-Formel sei \textbf{implikationsfrei
}wenn sie keine Teilformel der Form $\left(\varphi\rightarrow\psi\right)$
oder $\left(\varphi\leftrightarrow\psi\right)$ enthält.
\end{defn}
Weil $\left(\varphi\rightarrow\psi\right)\equiv\left(\neg\varphi\vee\psi\right)$
und $\left(\varphi\leftrightarrow\psi\right)\equiv\left(\varphi\wedge\psi\right)\vee\left(\neg\varphi\wedge\neg\psi\right)$,
sind alle $\mathrm{FO}\left[\sigma\right]$-Formeln äquivalent zu
implikationsfreien $\mathrm{FO}\left[\sigma\right]$-Formeln. Im folgenden
werden wir hauptsächlich diese behandeln. (Hierbei entsteht allerdings
ein fester Zuwachs in der Länge der Formel $\left\Vert \varphi\right\Vert $,
so dass die Umformung nur vorgenommen werden kann, wenn $\left\Vert \varphi\right\Vert $
nicht eine Funktion der Eingabelänge ist.)

\pagebreak{}


\section{Fixpunktlogik}
\begin{defn}
Eine Logik $\mathcal{L}$ erweitert die Logik $\mathcal{L}'$, wenn
sie die Syntax und Semantik von $\mathcal{L}'$ übernimmt, und zusätzliche
Produktionen einführt.
\end{defn}

\begin{defn}
Sei $\mathbf{var}_{2}$ die Menge aller Relationsvariablen. Jede solche
Variable $R\in\mathbf{var}_{2}$ besitzt eine Stelligkeit $\mathrm{ar}\left(R\right)=k\in\mathbb{N}_{\geqslant1}$;
diese wird auch durch $R/k\in\mathbf{var}_{2}$ notiert.

Im folgenden sei jede Signatur $\sigma$ als eine Kombination von
Relationssymbolen und Relationsvariablen zu verstehen.
\end{defn}

\begin{defn}
\textbf{Positivität}

Wir definieren die Klasse der $P$-positiven und $P$-negativen Formeln
für $P\in\sigma$ wie folgt:\end{defn}
\begin{enumerate}
\item Jede $\mathcal{L}\left[\sigma\backslash\left\{ P\right\} \right]$-Formel
$\varphi$ ist sowohl $P$-positiv als auch $P$-negativ, da sie $P$
nicht enthält.
\item Für $P/k\in\sigma$ und jedes $k$-Tupel von $P$-positiven Termen
$x_{1},\cdots,x_{k}$ ist auch $P\bar{x}$ eine $P$-positive Formel.
\item Für jede $P$-positive Formel $\varphi$ ist $\neg\varphi$ $P$-negativ,
und umgekehrt.
\item Für einen Junktor $\gamma\in\left\{ \wedge,\vee\right\} $ und $k\geqslant2$
$P$-positive (beziehungsweise $P$-negative) Formeln $\varphi_{1},\cdots,\varphi_{k}$
ist $\left(\varphi_{1}\gamma\cdots\gamma\varphi_{k}\right)$ ebenfalls
$P$-positiv (beziehungsweise $P$-negativ).
\item Für einen Quantor $Q\in\left\{ \exists,\forall\right\} $, eine Variable
$x\in\mathbf{var}$ und eine $P$-positive (beziehungsweise $P$-negative)
Formel $\varphi$ ist $Qx\varphi$ ebenfalls $P$-positiv (beziehungsweise
$P$-negativ).
\end{enumerate}

\begin{defn}
\label{def:lfp}Die Fixpunktlogik $\left(\mathrm{FO}+\mathrm{LFP}\right)\left[\sigma\right]$
erweitert die Logik $\mathrm{FO}\left[\sigma\right]$ um den folgenden
Fixpunkt-Operator:\end{defn}
\begin{elabeling}{00.00.0000}
\item [{(LFP)}] Für eine Relationsvariable $R/k\in\mathbf{var}_{2}$, eine
$R$-positive $\left(\mathrm{FO}+\mathrm{LFP}\right)\left[\sigma\right]$-Formel
$\psi$, ein Tupel $\bar{x}\in\mathbf{var}^{k}$ und ein $k$-Tupel
$\bar{y}$ von $\mathrm{\left(\mathrm{FO}+\mathrm{LFP}\right)}\left[\sigma\right]$-Termen
ist $\varphi=\left[\mathrm{lfp}_{R,\bar{x}}\psi\right]\left(\bar{y}\right)$
eine $R$-positive $\left(\mathrm{\mathrm{FO}+\mathrm{LFP}}\right)\left[\sigma\right]$-Formel.
\begin{eqnarray*}
\mathrm{frei}\left(\varphi\right) & = & \mathrm{frei}\left(\psi\right)\backslash\left\{ x_{1},\cdots,x_{k}\right\} \cup\bigcup_{i=1}^{k}\mathrm{frei}\left(y_{i}\right)\\
\mathrm{var}\left(\varphi\right) & = & \mathrm{var}\left(\psi\right)\cup\left\{ x_{1},\cdots,x_{k}\right\} \cup\bigcup_{i=1}^{k}\mathrm{var}\left(y_{i}\right)\\
\mathtt{MF}\left(\varphi\right) & = & \max\left(\mathtt{MF}\left(\psi\right),\mathrm{frei}\left(\varphi\right)\right)
\end{eqnarray*}
\end{elabeling}
\begin{rem*}
Ohne Beschränkung der Allgemeinheit sei $\left\{ x_{1},\cdots,x_{k}\right\} \subseteq\mathrm{frei}\left(\psi\right)$,
denn analog zu Definition \ref{def:fo} ist $\psi\equiv\left(\bar{x}=\bar{x}\wedge\psi\right)$.

Die nicht durch $\bar{x}$ gebundene Variablen $\mathrm{frei}\left(\psi\right)\backslash\left\{ x_{1},\cdots,x_{k}\right\} \subseteq\mathrm{frei}\left(\varphi\right)$
heißen \textbf{Parameter} der Fixpunkt-Operation.\end{rem*}
\begin{description}
\item [{Auswertung:}] Für $R/k\in\mathbf{var}_{2}$, eine $\left(\sigma\backslash\left\{ R\right\} \right)$-Struktur
$\mathfrak{A}$, eine $R$-positive $\left(\mathrm{FO}+\mathrm{LFP}\right)\left[\sigma\right]$-Formel,
eine Parameter-Belegung $\beta':\mathrm{frei}\left(\psi\right)\backslash\left\{ x_{1},\cdots,x_{k}\right\} \rightarrow A$
und eine Relation $X\subseteq A^{k}$ definieren wir die $\left\{ X\right\} $-Struktur
$\mathfrak{R}_{X}$ und die Abbildung $F:2^{A^{k}}\rightarrow2^{A^{k}}$
wie folgt:
\begin{eqnarray*}
\mathfrak{R}_{X} & \coloneqq & \left(A,\left(\begin{array}{c}
R\\
X
\end{array}\right)\right)\\
F_{\beta'}\left(X\right) & \coloneqq & q_{\varphi^{\beta'}}\left(\mathfrak{A}\cup\mathfrak{R}_{X}\right)
\end{eqnarray*}
Das heißt: $F_{\beta'}\left(X\right)$ ist das Anfrageergebnis von
$\varphi^{\beta'}$ auf $\mathfrak{A}$, wenn das Symbol $R$ durch
die Relation $X$ interpretiert wird.


Aus der $X$-Positivität folgt nach \cite{Gurevich1986,Libkin2012}
die Monotonie von $F$, und daher induktiv die Existenz eines kleinsten
Fixpunkts $F^{\infty}\left(\emptyset\right)$:
\begin{eqnarray*}
A\subseteq B & \Rightarrow & F\left(A\right)\subseteq F\left(B\right)
\end{eqnarray*}
\[
\emptyset\subseteq F_{\beta'}\left(\emptyset\right)\subseteq\cdots\subseteq F_{\beta'}^{\infty}\left(\emptyset\right)\subseteq A^{k}
\]



Insbesondere ist $F_{\beta'}^{\infty}\left(\emptyset\right)=F^{\left|A^{k}\right|}\left(\emptyset\right)$,
da die Iteration nach höchstens $\left|A^{k}\right|$ Iterationen
ihren Fixpunkt erreicht.


Für eine Belegung $\beta:\mathrm{frei}\left(\varphi\right)\rightarrow A$
prüft $\varphi=\left[\mathrm{lfp}_{R,\bar{x}}\psi\right]\left(\bar{y}\right)$
nun, ob die Belegung des Tupels $\bar{y}$ im Fixpunkt $F^{\infty}$
liegt. Sei $\beta'$ die Reduktion von $\beta$ auf die Parameter:
\begin{eqnarray*}
\beta' & \coloneqq & \beta_{\mid\mathrm{frei}\left(\psi\right)\backslash\left\{ x_{1},\cdots,x_{k}\right\} }\\
\left\llbracket \left[\mathrm{lfp}_{R,\bar{x}}\psi\right]\left(\bar{y}\right)\right\rrbracket \left(\mathfrak{A},\beta\right) & \coloneqq & \left\llbracket R\bar{y}\right\rrbracket \left(\mathfrak{A}\cup\mathfrak{R}_{F_{\beta'}^{\infty}\left(\emptyset\right)},\beta\right)
\end{eqnarray*}


\end{description}
\begin{example*}
Die folgende $\left(\mathrm{FO}+\mathrm{LFP}\right)\left[\left\{ E\right\} \right]$-Formel
$\varphi\left(u,v\right)$ ist erfüllt, wenn $u$ und $v$ durch einen
Weg beliebiger Länge verbunden sind: 
\[
\varphi\left(u,v\right)\coloneqq\left[\mathrm{lfp}_{R,\left(x,y\right)}\,\left(\exists z\,\left(E\left(x,z\right)\wedge R\left(z,y\right)\right)\vee x\dot{=}y\right)\right]\left(u,v\right)
\]

\end{example*}
Im folgenden wird die Logik $\mathrm{FO}+\mathrm{LFP}$ abgekürzt
als $\mathrm{LFP}$ bezeichnet. Ferner werden wir uns auf das \emph{parameter-freie}
Fragment der Logik beschränken, was (bis auf einen Zuwachs in der
Anzahl der Variablen und Länge der Formel) die Allgemeinheit nicht
einschränkt.
\begin{defn}
\label{def:fp-param}Eine $\mathrm{LFP}\left[\sigma\right]$-Formel
$\varphi$ ist \textbf{parameter-frei}, falls für jede Teilformel
der Form $\left[\mathrm{lfp}_{R,\bar{x}}\psi\right]\left(\bar{y}\right)$
gilt: 
\[
\mathrm{frei}\left(\psi\right)=\left\{ x_{1},\cdots,x_{\mathrm{ar}\left(R\right)}\right\} 
\]
\end{defn}
\begin{prop}
J\label{prop:fp-param}ede $\mathrm{LFP}\left[\sigma\right]$-Formel
$\varphi$ kann in eine parameter-freie $\mathrm{LFP}\left[\sigma\right]$-Formel
$\varphi'$ übersetzt werden.\cite{Zaid,Grohe2005,Dziembowski96bounded-variablefixpoint}
\end{prop}
\pagebreak{}


\section{Logische Erweiterungen}

Die Orakelerweiterung fügt einer Logik eine Anzahl von Relationssymbolen
mit vordefinierter Interpretation hinzu.
\begin{defn}
\textbf{$\eta$-Orakel, $\mathcal{L}+\Upsilon$-Logik}

Sei $\eta$ eine relationale Signatur. Ein $\eta$-Orakel $\Upsilon:\mathbb{N}\rightarrow\mathbf{FIN}_{\leqslant}\left(\eta\right)$
ist eine Funktion, die jeder natürlichen Zahl $n$ eine geordnete
$\left(\eta\uplus\left\{ \leqslant\right\} \right)$-Struktur $\Upsilon\left(n\right)$
über $\left[0,n\right]$ zuweist.

Sei $\sigma$ eine von $\eta\uplus\left\{ \leqslant\right\} $ disjunkte
relationale Signatur und $\mathcal{L}$ eine Logik (zum Beispiel $\mathrm{FO}$
oder $\mathrm{LFP}$).

Die Syntax der $\left(\mathcal{L}+\Upsilon\right)\left[\sigma\right]$-Logik
ist die der Logik $\mathcal{L}\left[\sigma\uplus\eta\uplus\left\{ \leqslant\right\} \right]$.

Für eine endliche $\sigma$-Struktur $\mathfrak{A}$ mit $A\cap\left[0,n\right]=\emptyset$
und eine Belegung $\beta:\mathrm{frei}\left(\varphi\right)\rightarrow A$
werden $\left(\mathcal{L}+\Upsilon\right)$-Ausdrücke auf der disjunkten
Vereinigung von $\mathfrak{A}$ mit der entsprechenden Orakelstruktur
$\Upsilon\left(\left|A\right|\right)$ ausgewertet:
\[
\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\beta\right)\coloneqq\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A}\uplus\Upsilon\left(\left|A\right|\right),\beta\right)
\]

\end{defn}

\begin{defn}
\textbf{\label{def:fo-ord}$\mathcal{L}+\mathbf{ORD}$, $\mathcal{L}+\mathbf{ARB}$.}

Falls $\eta$ leer ist, und daher $\Upsilon\left(n\right)=\left(\left[0,n\right],\leqslant\right)$
nur die Ordnung enthält, so wird $\mathcal{L}+\Upsilon$ auch als
$\mathcal{L}+\mathbf{ORD}$ bezeichnet.

Die unendliche Signatur $\eta_{\mathrm{arb}}=\left\{ R_{X}\mid X\in\bigcup_{k\in\mathbb{N}}2^{\mathbb{N}^{k}}\right\} $
enthalte ein Symbol für jede beliebige Relation auf den natürlichen
Zahlen. Sei $\mathcal{N}_{\mathrm{arb}}$ die $\eta_{\mathrm{arb}}$-Struktur,
die jedes Symbol $R_{X}$ durch die entsprechende Relation $X$ interpretiert,
und sei $\Upsilon_{\mathrm{arb}}:\mathbb{N}\rightarrow\mathbf{FIN}_{\leqslant}\left(\eta_{\mathrm{arb}}\right)$
ein Orakel, das die endlichen Anfangs-Stücke von $\mathcal{N}_{\mathrm{arb}}$
ausgibt: 
\begin{eqnarray*}
\mathcal{N}_{\mathrm{arb}} & \coloneqq & \left(\mathbb{N},\left(\begin{array}{c}
R_{X}\\
X
\end{array}\right)_{R_{X}\in\eta_{\mathrm{arb}}}\right)\\
\Upsilon_{\mathrm{arb}}\left(n\right) & \coloneqq & \left(\mathcal{N}_{\mathrm{arb}}\right)_{\mid\left[0,n\right]}
\end{eqnarray*}


Die Logik $\mathcal{L}+\Upsilon_{\mathrm{arb}}$ werde auch als $\mathcal{L}+\mathbf{ARB}$
bezeichnet.
\end{defn}
Wir führen mehrere syntaktische Erweiterungen der Logik $\mathrm{FO}+\Upsilon$
ein: Den Zählterm $\#$, den Zählquantor $\exists^{=}$, und den Majority-Quantor
$\exists^{\geqslant}$.

Es wird nachgewiesen, dass alle drei Erweiterungen die gleiche Ausdrucksstärke
haben.
\begin{defn}
\textbf{Zählterm $\#$} (wie \cite{anderson_et_al:LIPIcs:2014:4445})

Der Zählterm ist eine zusätzliche Termproduktion, die die erfüllenden
Belegungen einer Formel zählt.

Sei $\mathcal{L}$ eine beliebige Logik, $\eta$ eine relationale
Signatur, und $\Upsilon:\mathbb{N}\rightarrow\mathbf{FIN}_{<}\left(\eta\right)$
ein $\eta$-Orakel.

Die $\left(\mathcal{L}+\Upsilon+\#\right)$-Logik erweitert die $\left(\mathcal{L}+\Upsilon\right)$-Logik
um die folgende Regel:
\begin{elabeling}{00.00.0000}
\item [{(TC)}] Für eine $\left(\mathcal{L}+\Upsilon+\#\right)\left[\sigma\right]$-Formel
$\varphi$ und eine Variable $x\in\mathbf{var}$ ist $\#x\varphi$
ein $\left(\mathcal{L}+\Upsilon+\#\right)\left[\sigma\right]$-Term.
\begin{eqnarray*}
\mathrm{frei}\left(\#x\varphi\right)=\mathrm{frei}\left(\varphi\right)\backslash\left\{ x\right\}  &  & \mathrm{var}\left(\#x\varphi\right)=\mathrm{var}\left(\varphi\right)\cup\left\{ x\right\} 
\end{eqnarray*}



Auf einer endlichen Struktur $\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
mit $n\in\mathbb{N}$ und einer Belegung $\beta:\mathrm{frei}\left(\varphi\right)\backslash\left\{ x\right\} \rightarrow A\uplus\left[0,n\right]$
sei 
\[
\left\llbracket \#x\varphi\right\rrbracket \left(\mathfrak{A},\beta\right)\coloneqq\left|\left\{ a\in A\mid\mathfrak{A}\models\varphi^{\beta\cup\binom{x}{a}}\right\} \right|
\]
die Anzahl der unterschiedlichen Werte $a\in A$, für die $\mathfrak{A}\models\varphi^{\beta\cup\binom{x}{a}}$
gilt.

\end{elabeling}
\end{defn}
\begin{example*}
Diese Erweiterung erlaubt die Definition vieler arithmetischer Operatoren
durch Terme, wie zum Beispiel die positive Differenz:
\begin{eqnarray*}
t_{\mathrm{DIFF}}\left(x,y\right) & \coloneqq & \#_{z}\left(\neg z\leqslant x\wedge z\leqslant y\right)\\
\left\llbracket t_{\mathrm{DIFF}}\right\rrbracket \left(\mathfrak{A},\left(a,b\right)\right) & = & \max\left(b-a,0\right)
\end{eqnarray*}
\end{example*}
\begin{defn}
\textbf{Zählquantor }$\exists^{=}$ (wie \cite{Schweikardt2002},
aber mit disjunktem Orakel)

Der Zählquantor ist eine zusätzlicher Quantor, der die Zahl der erfüllenden
Belegungen einer Formel mit einer Variable vergleicht.

Sei $\mathcal{L}$ eine beliebige Logik, $\eta$ eine relationale
Signatur, und $\Upsilon:\mathbb{N}\rightarrow\mathbf{FIN}_{<}^{\left[0,n\right]}\left(\eta\right)$
ein $\eta$-Orakel.

Die $\mathcal{L}+\Upsilon+\exists^{=}$-Logik erweitert die $\mathcal{L}+\Upsilon$-Logik
um die folgende Regel:
\begin{elabeling}{00.00.0000}
\item [{(QC)}] Für eine $\left(\mathcal{L}+\Upsilon+\exists^{=}\right)\left[\sigma\right]$-Formel
$\varphi$ und zwei Variablen $x,y\in\mathbf{var}$ ist $\exists^{=y}x\varphi$
eine $\left(\mathcal{L}+\Upsilon+\exists^{=}\right)\left[\sigma\right]$-Formel.
\begin{eqnarray*}
\mathrm{frei}\left(\exists^{=y}x\varphi\right)=\left\{ y\right\} \cup\left(\mathrm{frei}\left(\varphi\right)\backslash\left\{ x\right\} \right) &  & \mathrm{var}\left(\exists^{=y}x\varphi\right)=\mathrm{var}\left(\varphi\right)\cup\left\{ x,y\right\} 
\end{eqnarray*}



Auf einer endlichen Struktur $\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
mit einer Belegung 
\[
\beta:\left(\mathrm{frei}\left(\varphi\right)\backslash\left\{ x\right\} \right)\cup\left\{ y\right\} \rightarrow A\cup\left[0,n\right]
\]
 gilt: 
\[
\left\llbracket \exists^{=y}x\varphi\right\rrbracket \left(\mathfrak{A},\beta\right)\coloneqq\begin{cases}
1 & \mathrm{falls}\,\,\beta y=\left\{ a\in A\mid\mathfrak{A}\models\varphi^{\beta_{\backslash\left\{ x\right\} }\cup\binom{x}{a}}\right\} \\
0 & \mathrm{sonst}
\end{cases}
\]


\end{elabeling}
\end{defn}

\begin{defn}
\textbf{Majority-Quantor }$\exists^{\geqslant}$

Der Majority-Quantor funktioniert wie der Zählquantor und prüft, ob
die Zahl der erfüllenden Belegungen mindestens den Wert einer Variable
erreicht.

Sei $\mathcal{L}$ eine beliebige Logik, $\eta$ eine relationale
Signatur, und $\Upsilon:\mathbb{N}\rightarrow\mathbf{FIN}_{<}^{\left[0,n\right]}\left(\eta\right)$
ein $\eta$-Orakel.

Die $\mathcal{L}+\Upsilon+\exists^{\geqslant}$-Logik erweitert die
$\mathcal{L}+\Upsilon$-Logik um die folgende Regel:
\begin{elabeling}{00.00.0000}
\item [{(QM)}] Für eine $\left(\mathcal{L}+\Upsilon+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel
$\varphi$ und zwei Variablen $x,y\in\mathbf{var}$ ist $\exists^{\geqslant y}x\varphi$
eine $\left(\mathcal{L}+\Upsilon+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel.
\begin{eqnarray*}
\mathrm{frei}\left(\exists^{\geqslant y}x\varphi\right)=\left\{ y\right\} \cup\left(\mathrm{frei}\left(\varphi\right)\backslash\left\{ x\right\} \right) &  & \mathrm{var}\left(\exists^{\geqslant y}x\varphi\right)=\mathrm{var}\left(\varphi\right)\cup\left\{ x,y\right\} 
\end{eqnarray*}



Auf einer endlichen Struktur $\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
mit einer Belegung 
\[
\beta:\left(\mathrm{frei}\left(\varphi\right)\backslash\left\{ x\right\} \right)\cup\left\{ y\right\} \rightarrow A\cup\left[0,n\right]
\]
 gilt: 
\[
\left\llbracket \exists^{\geqslant y}x\varphi\right\rrbracket \left(\mathfrak{A},\beta\right)\coloneqq\begin{cases}
1 & \mathrm{falls}\,\,\beta y\in\left[0,n\right],\,\beta y\leqslant\left\{ a\in A\mid\mathfrak{A}\models\varphi^{\beta_{\backslash\left\{ x\right\} }\cup\binom{x}{a}}\right\} \\
0 & \mathrm{sonst}
\end{cases}
\]


\end{elabeling}
\end{defn}
\begin{prop}
Die Logiken $\mathcal{L}+\Upsilon+\#$ und $\mathcal{L}+\Upsilon+\exists^{=}$
und $\mathcal{L}+\Upsilon+\exists^{\geqslant}$ sind äquivalent:\end{prop}
\begin{proof}
Jede $\left(\mathcal{L}+\Upsilon+\#\right)\left[\sigma\right]$-Formel
$\varphi$ ist äquivalent zu einer $\left(\mathcal{L}+\Upsilon+\exists^{=}\right)\left[\sigma\right]$-Formel
$\varphi'$. Dies wird per Induktion über den Aufbau von $\varphi$
gezeigt.
\begin{casenv}
\item Falls $\varphi$ eine $\left(\mathcal{L}+\Upsilon\right)\left[\sigma\right]$-Formel
ohne Zählterm ist, so sei $\varphi'\coloneqq\varphi$.
\item Falls $\varphi$ von der Form $\neg\psi$ oder $\left(\psi_{1}\gamma\cdots\gamma\psi_{k}\right)$
oder $Qx\psi$ ist, so existieren per Induktionsannahme die äquivalenten
Teilformeln $\psi',\psi_{1}',\cdots,\psi_{k}'$. Sei $\varphi'$ entsprechend
$\neg\psi'$ oder $\left(\psi_{1}'\gamma\cdots\gamma\psi_{k}\right)$
oder $Qx\psi'$.
\item Falls $\varphi=y\dot{=}\#x\psi$ oder $\varphi=\#x\psi\dot{=y}$ für
$x,y\in\mathbf{var}$, so sei $\varphi'\coloneqq\exists^{=y}x\psi'$.
\item Falls $\varphi=\#x_{1}\psi_{1}\dot{=}\#x_{2}\psi_{2}$ für $x_{1},x_{2}\in\mathbf{var}$,
so sei $y\in\mathbf{var}\backslash\left(\mathrm{frei}\left(\psi_{1}\right)\cup\mathrm{frei}\left(\psi_{2}\right)\right)$
eine neue Variable, und:
\[
\varphi'\coloneqq\exists y\left(\exists^{=y}x_{1}\psi_{1}'\wedge\exists^{=y}x_{2}\psi_{2}'\right)
\]

\item Falls $\varphi=R\bar{x}$ für $R/k\in\sigma\cup\eta\cup\left\{ \leqslant\right\} $
und ein $k$-Tupel von $\left(\mathcal{L}+\Upsilon+\#\right)\left[\sigma\right]$-Termen
$\bar{x}$ ist, so sei $\bar{y}\in\left(\mathbf{var}\backslash\bigcup_{i=1}^{k}\mathrm{frei}\left(x_{i}\right)\right)^{k}$
ein Tupel von neuen Variablen, und:
\begin{eqnarray*}
\chi_{i} & \coloneqq & \begin{cases}
\exists^{=y_{i}}z_{i}\psi_{i}' & \mathrm{falls}\,x_{i}=\#z_{i}\psi_{i}\\
y_{i}=x_{i} & \mathrm{sonst}
\end{cases}\\
\varphi' & \coloneqq & \exists\bar{y}\left(R\bar{y}\wedge\bigwedge_{i=1}^{k}\chi_{i}\right)
\end{eqnarray*}

\end{casenv}
Jede $\left(\mathcal{L}+\Upsilon+\exists^{=}\right)\left[\sigma\right]$-Formel
$\varphi$ ist äquivalent zu einer $\left(\mathcal{L}+\Upsilon+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel
$\varphi'$:
\begin{casenv}
\item Falls $\varphi=\exists^{=y}x\psi$, so sei $\psi'$ eine zu $\psi$
äquivalente $\left(\mathcal{L}+\Upsilon+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel,
$z\in\mathbf{var}\backslash\mathrm{frei}\left(\psi\right)$ eine neue
Variable, und: 
\[
\varphi'\coloneqq\forall z\left(\exists^{\geqslant z}x\psi'\leftrightarrow\left(z\leqslant y\right)\right)
\]
Die Formel $\exists^{=y}x\psi$ ist mit $\beta\left(y\right)\in\left[0,n\right]$
erfüllt, genau dann wenn gilt: Die Formel $\exists^{\geqslant z}x\psi$
ist für alle $\beta\left(z\right)\in\left[0,n\right]$ erfüllt, genau
dann wenn $\beta\left(z\right)\leqslant\beta\left(y\right)$.
\end{casenv}
Schließlich ist jede $\left(\mathcal{L}+\Upsilon+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel
$\varphi$ äquivalent zu einer $\left(\mathcal{L}+\Upsilon+\#\right)\left[\sigma\right]$-Formel
$\varphi'$:
\begin{casenv}
\item Falls $\varphi=\exists^{\geqslant y}x\psi$, so sei $\psi'$ eine
$\left(\mathcal{L}+\Upsilon+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel
mit $\psi\equiv\psi'$, und:
\[
\varphi'\coloneqq y\leqslant\#x\psi
\]

\end{casenv}
\end{proof}
Im folgenden wird mit $\mathcal{L}+\Upsilon+C$ stets eine dieser
äquivalenten Zähl-Logiken bezeichnet.
\begin{defn}
Falls $\eta$ leer ist, und daher $\Upsilon\left(n\right)=\left(\left\{ 0,\cdots,n\right\} ,\leqslant\right)$,
so heiße $\mathcal{L}+\Upsilon+C$ kurz $\mathcal{L}+C$.\end{defn}
\begin{example*}
Die Logik $\mathrm{FO}+C$ kann ausdrücken, dass die $\sigma$-Struktur
eine gerade Größe hat. Bekanntlich ist diese $\sigma$-Eigenschaft
weder durch $\mathrm{FO}$ auf geordneten, noch $\mathrm{LFP}$ auf
ungeordneten Strukturen definierbar\cite{Ebbinghaus,Libkin2012}:

\[
\varphi_{\mathrm{EVEN}}\coloneqq\exists y\,\left(y=\#_{z}\left(\neg z\leqslant y\wedge z\leqslant\#_{z}\,z=z\right)\right)
\]
\end{example*}
\begin{defn}
\textbf{Arb-invariante Logik erster Stufe }(nach \cite{Schweikardt13ashort})

Die unendliche Signatur $\eta_{\mathrm{arb}}=\left\{ R_{X}\mid X\in\bigcup_{k\in\mathbb{N}}2^{\mathbb{N}^{k}}\right\} $
enthalte ein Symbol für jede beliebige Relation auf den natürlichen
Zahlen. Sei $\mathcal{N}_{\mathrm{arb}}$ die $\eta_{\mathrm{arb}}$-Struktur,
die jedes Symbol durch die entsprechende Relation interpretiert.

\begin{eqnarray*}
\mathcal{N}_{\mathrm{arb}} & \coloneqq & \left(\mathbb{N},\left(\begin{array}{c}
R_{X}\\
X
\end{array}\right)_{R_{X}\in\eta_{\mathrm{arb}}}\right)
\end{eqnarray*}


Für eine relationale Signatur $\sigma$ sei $\sigma_{\mathrm{arb}}\coloneqq\sigma\uplus\eta_{\mathrm{arb}}$,
und sei $\mathrm{FO}\left[\sigma_{\mathrm{arb}}\right]$ die erststufige
Logik mit beliebigen numerischen Prädikaten.

Für $\mathfrak{A}\in\mathbf{FIN}\left(\sigma\right)$ sei $n=\left|A\right|$
und $h:A\rightarrow\left[1,n\right]$ eine beliebige Bijektion. Sei
$\mathfrak{A}_{h}\in\mathbf{FIN}_{<}^{\left[1,n\right]}\left(\sigma_{\mathrm{arb}}\right)$
definiert durch:
\[
\mathfrak{A}_{h}\coloneqq h\mathfrak{A}\cup\mathcal{N}_{\mid\left[1,n\right]}
\]
(Hier werden gemäß \defref{Disjunkte-Vereinigung} die $\sigma$-Struktur
$h\mathfrak{A}$ und die induzierte Teilstruktur $\mathcal{N}_{\mid\left[1,n\right]}$
mit den disjunkten Signaturen $\sigma$ und $\eta_{\mathrm{arb}}$
über dem gleichen Universum $\left[1,n\right]$ vereinigt.)
\begin{enumerate}
\item Eine $k$-stellige $\mathrm{FO}\left[\sigma_{\mathrm{arb}}\right]$-Formel
$\varphi$ ist \textbf{arb-invariant auf }$\mathfrak{A}\in\mathbf{FIN}\left(\sigma\right)$,
wenn für jedes Paar von Bijektionen $h,h':A\rightarrow\left[1,\left|A\right|\right]$
und jedes Tupel $\bar{a}\in A^{k}$ gilt:
\begin{eqnarray*}
\mathfrak{A}_{h}\models\varphi\left[h\bar{a}\right] & \Longleftrightarrow & \mathfrak{A}_{h'}\models\varphi\left[h'\bar{a}\right]
\end{eqnarray*}

\item Eine $\mathrm{FO}\left[\sigma_{\mathrm{arb}}\right]$-Formel $\varphi$
sei arb-invariant, wenn sie auf allen Strukturen $\mathfrak{A}\in\mathbf{FIN}\left(\sigma\right)$
arb-invariant ist. In diesem Fall berechne $\varphi$ die folgende
$\sigma$-Anfrage (für eine beliebige Abbildung $h:A\rightarrow\left[1,\left|A\right|\right]$):
\[
q_{\varphi}\left(\mathfrak{A}\right)\coloneqq h^{-1}q_{\varphi}\left(\mathfrak{A}_{h}\right)
\]

\item Sei $\mathrm{\mbox{arb-inv-}FO}\left[\sigma\right]$ die Sprache der
arb-invarianten $\mathrm{FO}\left[\sigma_{\mathrm{arb}}\right]$-Formeln.
\end{enumerate}
\end{defn}
\begin{rem*}
Nach dem Satz von Trakhtenbrot ist die endlichen Erfüllbarkeit von
$\mathrm{FO}\left[\left\{ \leqslant\right\} \right]$ unentscheidbar,
und daher auch die Arb-Invarianz und die Sprache $\mbox{arb-inv-}\mathrm{FO}\left[\sigma\right]$
in $\mathrm{FO}\left[\sigma_{\mathrm{arb}}\right]$.\cite{EFT,Libkin2012,Schweikardt13ashort}
\end{rem*}
\pagebreak{}


\chapter{Schaltkreise}


\section{Grundlagen der Schaltkreise}
\begin{defn}
\textbf{Boolesche Basis:} 

Eine boolesche Basis $\mathbb{B}$ besteht aus beliebigen symmetrischen
Relationen $\phi'\subseteq\left\{ 0,1\right\} ^{*}$, die hier als
$\phi\subseteq\mathbb{N}^{2}$ abgekürzt werden. Es gelte: 
\[
\phi\coloneqq\left\{ \left(m,n\right)\in\mathbb{N}^{2}\mid0^{m}1^{m}\in\phi'\right\} 
\]
Als Beispiel seien die folgenden booleschen Junktoren gegeben: 
\begin{eqnarray*}
\mathtt{AND} & \coloneqq & \left\{ 0\right\} \times\mathbb{N}\\
\mathtt{OR} & \coloneqq & \mathbb{N}\times\left(\mathbb{N}\backslash\left\{ 0\right\} \right)\\
\mathtt{MAJ} & \coloneqq & \left\{ \left(m,n\right)\in\mathbb{N}\times\mathbb{N}\mid m\leqslant n\right\} \\
\mathtt{XOR} & \coloneqq & \mathbb{N}\times\left(\mathbb{N}\backslash2\mathbb{N}\right)
\end{eqnarray*}


Im folgenden stehe $\mathbb{B}_{\mathrm{std}}\coloneqq\left\{ \mathtt{AND},\mathtt{OR}\right\} $
für die Basis mit boolescher Konjunktion und Disjunktion, und $\mathbb{B}_{\mathrm{maj}}\coloneqq\mathbb{B}_{\mathrm{std}}\cup\left\{ \mathtt{MAJ}\right\} $
für die Basis mit Konjunktion, Disjunktion und Majority.
\end{defn}

\begin{defn}
\textbf{Schaltkreis}

Sei $\mathbb{B}$ eine boolesche Basis und $\sigma$ eine relationale
Signatur. Ein $\left(\sigma,\mathbb{B}\right)$-Schaltkreis $\mathcal{C}\coloneqq\left(G,W,\Sigma,\Omega,U\right)$
mit der Stelligkeit $k\coloneqq\mathrm{ar}\left(C\right)$ besteht
aus den folgenden Komponenten: 
\begin{enumerate}
\item Ein azyklischer Graph mit den Knoten $G$ (,,Gates``) und den Kanten
$W\subseteq G\times G$.
\item eine Gate-Markierung $\Sigma$ 
\begin{eqnarray*}
\Sigma:G & \rightarrow & \mathbb{B}\\
 & \cup & \left\{ \mathbf{0},\mathbf{1},\neg\right\} \\
 & \cup & \left\{ R\bar{t}\mid R\in\sigma,\bar{t}\in U^{\mathrm{ar}\left(R\right)}\right\} 
\end{eqnarray*}

\item eine Ausgabefunktion\footnote{In Anderson \& Dawar 2014\cite{anderson_et_al:LIPIcs:2014:4445} wird
zusätzlich die Injektivität von $\Omega$ verlangt; hier können mehrere
Tupel dem gleichen Output-Gate zugeteilt werden.} $\Omega:U^{k}\rightarrow G$ (bei $k=0$ ist $\Omega\left(\left\langle \right\rangle \right)\in G$
ein einziges Output-Gate, und wird mit $\Omega=\Omega\left(\left\langle \right\rangle \right)$
abgekürzt) und 
\item ein Universum $U$ (üblicherweise $U=\left[1,n\right]$).
\end{enumerate}
Hierbei haben alle mit $\phi\in\mathbb{B}$ markierten Gates mindestens
einen\footnote{Alle hier betrachteten Schaltkreise haben einen unbeschränkten Fan-In.}
Vorgänger, alle mit $R\bar{x}$, $\mathbf{0}$ oder $\mathbf{1}$
markierten Gates keinen\textbf{ }Vorgänger, und alle mit $\neg$ markierten
Gates genau\textbf{ }einen\textbf{ }Vorgänger.

Die mit $\mathbf{0}$ oder $\mathbf{1}$ markierten Gates heißen \textbf{Konstanten},
die mit $R\bar{x}$ markierten Gates heißen \textbf{Inputs}, und die
Gates im Bild von $\Omega$ heißen \textbf{Outputs}.
\end{defn}

\begin{defn}
\textbf{\label{def:Auswertung-von-Schaltkreisen}Auswertung von Schaltkreisen}

Der $\left(\sigma,\mathbb{B}\right)$-Schaltkreis $\mathcal{C}=\left(G,W,\Sigma,\Omega,U\right)$
wird auf einer $\sigma$-Struktur $\mathfrak{A}\in\mathbf{FIN}^{U}\left(\sigma\right)$
ausgewertet. Die Auswertung ist eine Abbildung $\mathcal{C}\left[\mathfrak{A}\right]:G\rightarrow\left\{ 0,1\right\} $,
die jedem Gate $g\in G$ den Wert $0$ oder $1$ zuweist, und ist
rekursiv wie folgt definiert:
\begin{casenv}
\item Für $\Sigma\left(g\right)=R\bar{t}$ gilt 
\[
\mathcal{C}\left[\mathfrak{A}\right]\left(g\right)\coloneqq\left[R^{\mathfrak{A}}\right]\bar{t}
\]

\item Für $\Sigma\left(g\right)\in\left\{ \mathbf{0},\mathbf{1}\right\} $
gilt
\[
\mathcal{C}\left[\mathfrak{A}\right]\left(g\right)\coloneqq\begin{cases}
1 & \mathrm{falls}\,\,\Sigma\left(v\right)=\mathbf{1}\\
0 & \mathrm{sonst}
\end{cases}
\]

\item Für $\Sigma\left(g\right)=\neg$ und $\left(h,g\right)\in W$ gilt
\[
\mathcal{C}\left[\mathfrak{A}\right]\left(g\right)\coloneqq1-\mathcal{C}\left[\mathfrak{A}\right]\left(h\right)
\]

\item Für $\Sigma\left(g\right)=\phi\in\mathbb{B}$ gilt: 
\begin{eqnarray*}
j_{1} & \coloneqq & \sum_{\left(h,g\right)\in W}\mathcal{C}\left[\mathfrak{A}\right]\left(h\right)\\
j_{0} & \coloneqq & \left|\left\{ h\mid\left(h,g\right)\in W\right\} \right|-j_{1}\\
\\
\mathcal{C}\left[\mathfrak{A}\right]\left(g\right) & \coloneqq & \left[\phi\right]\left(j_{0},j_{1}\right)
\end{eqnarray*}

\end{casenv}
Für einen $k$-stelligen Schaltkreis $\mathcal{C}$ und ein Tupel
$\bar{t}\in U^{k}$ sei die Ausgabe von $\mathcal{C}$ der Wert des
Outputs $\Omega\left(\bar{t}\right)$:
\[
\left\llbracket \mathcal{C}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)\coloneqq\mathcal{C}\left[\mathfrak{A}\right]\left(\Omega\left(\bar{t}\right)\right)
\]
 
\end{defn}
Ferner sei $q_{\mathcal{C}}:\mathbf{FIN}^{U}\left(\sigma\right)\rightarrow U^{k}$
die Abbildung einer Struktur auf die Relation der Tupel, für die $\mathcal{C}$
den Wert $1$ ausgibt. 
\[
q_{\mathcal{C}}\left(\mathfrak{A}\right)\coloneqq\left\{ \bar{t}\in U^{k}\mid\left\llbracket \mathcal{C}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)=1\right\} 
\]

\begin{example*}
Sei $\mathcal{C}_{4}=\left(G,W,\Sigma,\Omega,\left[4\right]\right)$
ein $1$-stelliger $\left(\left\{ E\right\} ,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreis,
der alle Knoten eines gerichteten Graphen findet, die Teil eines einfachen
Kreises der Länge $2$ sind:

\begin{eqnarray*}
G & \coloneqq & \left\{ g_{i,j}\mid i,j\in\left[4\right],\,i\neq j\right\} \\
 & \cup & \left\{ g_{\left\{ i,j\right\} }\mid\left\{ i,j\right\} \subseteq\left[4\right],\,i\neq j\right\} \\
 & \cup & \left\{ g_{i}\mid i\in\left[4\right]\right\} 
\end{eqnarray*}
\begin{eqnarray*}
E & \coloneqq & \left\{ \left(g_{i,j},g_{\left\{ i,j\right\} }\right)\mid i,j\in\left[4\right],\,i\neq j\right\} \\
 & \cup & \left\{ \left(g_{\left\{ i,j\right\} },g_{i}\right)\mid i,j\in\left[4\right],\,i\neq j\right\} 
\end{eqnarray*}
\[
\Sigma\left(g\right)=\begin{cases}
E\,i\,j & \mathrm{f\ddot{u}r}\,\,g=g_{i,j}\\
\mathtt{AND} & \mathrm{f\ddot{u}r}\,\,g=g_{\left\{ i,j\right\} }\\
\mathtt{OR} & \mathrm{f\ddot{u}r}\,\,g=g_{i}
\end{cases}
\]
\[
\Omega\left(i\right)\coloneqq g_{i}
\]


\begin{figure}[H]
\begin{centering}
\tikzstyle{every node}=[circle, draw=black,node distance=3em]
\begin{tikzpicture}

\node (E12) {$E 1 2$};
\node [right of=E12] (E21) {$E 2 1$};
\node [right of=E21] (E13) {$E 1 3$};
\node [right of=E13] (E31) {$E 3 1$};
\node [right of=E31] (E14) {$E 1 4$};
\node [right of=E14] (E41) {$E 4 1$};
\node [right of=E41] (E23) {$E 2 3$};
\node [right of=E23] (E32) {$E 3 2$};
\node [right of=E32] (E24) {$E 2 4$};
\node [right of=E24] (E42) {$E 4 2$};
\node [right of=E42] (E34) {$E 3 4$};
\node [right of=E34] (E43) {$E 4 3$};

\node [below of=E41,node distance=7em] (14) {$\wedge$};
\node [left of=14,node distance=4em] (13) {$\wedge$};
\node [left of=13,node distance=4em] (12) {$\wedge$};
\node [right of=14,node distance=4em] (23) {$\wedge$};
\node [right of=23,node distance=4em] (24) {$\wedge$};
\node [right of=24,node distance=4em] (34) {$\wedge$};

\node [below of=14,node distance=5em,label=below:$\Omega\left(2\right)$] (2) {$\vee$};
\node [left of=2,label=below:$\Omega\left(1\right)$] (1) {$\vee$};
\node [right of=2,label=below:$\Omega\left(3\right)$] (3) {$\vee$};
\node [right of=3,label=below:$\Omega\left(4\right)$] (4) {$\vee$};

\path [->]
		(E12) edge (12) (E21) edge (12)
		(E13) edge (13) (E31) edge (13)
		(E14) edge (14) (E41) edge (14)
		(E23) edge (23) (E32) edge (23)
		(E24) edge (24) (E42) edge (24)
		(E34) edge (34) (E43) edge (34)

		(12) edge (1) (12) edge (2)
		(13) edge (1) (13) edge (3)
		(14) edge (1) (14) edge (4)
		(23) edge (2) (23) edge (3)
		(24) edge (2) (24) edge (4)
		(34) edge (3) (34) edge (4)

;

\end{tikzpicture}
\par\end{centering}

\caption{Schaltkreis $\mathcal{C}_{4}$}


\end{figure}

\end{example*}
\pagebreak{}


\section{Eigenschaften von Schaltkreisen}
\begin{defn}
\textbf{Größe und Tiefe}

Die \textbf{Größe} $\left|\mathcal{C}\right|$ eines Schaltkreises
$\mathcal{C}=\left(G,W,\Sigma,\Omega,U\right)$ sei die Anzahl seiner
Gates, $\left|G\right|$.

Die \textbf{Tiefe} $T\left(\mathcal{C}\right)$ sei die maximale Länge
eines einfachen Wegs durch den Graphen $\left(G,W\right)$.
\end{defn}

\begin{defn}
\textbf{Invarianz}

Ein $k$-stelliger $\left(\sigma,\mathbb{B}\right)$-Schaltkreis $\mathcal{C}$
mit dem Universum $U$ heiße \textbf{invariant} wenn für alle $\mathfrak{A}\in\mathbf{FIN}_{<}\left(\sigma\right)$,
alle $\bar{a}\in A^{\mathrm{ar}\left(\mathcal{C}\right)}$ und alle
Bijektionen $\pi_{1},\pi_{2}:A\rightarrow U$ gilt:
\[
q_{\mathcal{C}}\left(\pi_{1}\mathfrak{A}\right)=q_{\mathcal{C}}\left(\pi_{2}\mathfrak{A}\right)
\]


In diesem Fall definieren wir für jede Struktur $\mathfrak{A}\in\mathbf{FIN}^{\left(\left|U\right|\right)}\left(\sigma\right)$
die Auswertung von $\mathcal{C}$ implizit als die Auswertung auf
$\pi\mathfrak{A}\in\mathbf{FIN}^{U}\left(\sigma\right)$ mit einer
beliebigen Bijektion $\pi:A\rightarrow U$:
\[
q_{\mathcal{C}}\left(\mathfrak{A}\right)\coloneqq\pi^{-1}\left(q_{\mathcal{C}}\left(\pi\mathfrak{A}\right)\right)
\]

\end{defn}

\begin{defn}
\textbf{Symmetrie}
\end{defn}
Ein $k$-stelliger Schaltkreis $\mathcal{C}=\left(G,W,\Sigma,\Omega,U\right)$
heiße \textbf{symmetrisch}, wenn jede Permutation der Universums $\pi\in\mathrm{Sym}_{U}$
einen Automorphismus $\hat{\pi}:G\tilde{\rightarrow}G$ des Graphen
$\left(G,W\right)$ induziert, der die folgenden Bedingungen erfüllt:
\begin{enumerate}
\item Für alle Inputs $g$ mit $\Sigma\left(g\right)=R\bar{x}$ gilt $\Sigma\left(\hat{\pi}g\right)=R\,\bar{x'}$,
mit $\bar{x'}=\pi\bar{x}$.
\item Für alle übrigen Gates gilt $\Sigma\left(\hat{\pi}g\right)=\Sigma\left(g\right)$.
\item Für jedes Tupel $\bar{t}\in U^{k}$ gilt $\hat{\pi}\Omega\left(\bar{x}\right)=\Omega\left(\pi\bar{t}\right)$.\end{enumerate}
\begin{prop}
Symmetrie ist eine hinreichende, aber nicht notwendige, Bedingung
für die Invarianz eines Schaltkreises.\end{prop}
\begin{proof}
Sei $\mathcal{C}$ ein symmetrischer $k$-stelliger $\left(\sigma,\mathbb{B}\right)$-Schaltkreis
über $U$, und $\mathfrak{A}\in\mathbf{FIN}^{\left(\left|U\right|\right)}\left(\sigma\right)$.
Seien $\pi_{1},\pi_{2}:A\rightarrow U$ zwei beliebige Bijektionen,
und sei $\bar{a}\in A^{k}$ ein beliebiges Tupel. Es ist zu zeigen,
dass: 
\begin{eqnarray*}
\mathcal{C}\left[\pi_{1}\mathfrak{A}\right]\left(\Omega\left(\pi_{1}\bar{a}\right)\right) & = & \mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(\Omega\left(\pi_{2}\bar{a}\right)\right)
\end{eqnarray*}


Wir definieren die Permutation $\tau\in\mathrm{Sym}_{U}$ als $\tau\coloneqq\pi_{1}\pi_{2}^{-1}$,
so dass $\pi_{1}=\tau\pi_{2}$.

Wegen der Symmetrie induziert $\tau$ einen Automorphismus $\hat{\tau}$
auf $\mathcal{C}$: 
\begin{eqnarray*}
\hat{\tau}\left(W\right) & = & W\\
\Sigma\left(\hat{\tau}g\right) & = & \begin{cases}
R\tau\bar{x} & \mathrm{f\ddot{u}r}\,\,\Sigma\left(g\right)=R\bar{x}\\
\Sigma\left(g\right) & \mathrm{sonst}
\end{cases}\\
\Omega\left(\tau\bar{x}\right) & = & \hat{\tau}\Omega\left(\bar{x}\right)\,\mathrm{f\ddot{u}r\,alle}\,\bar{x}\in U^{\mathrm{ar}\left(\mathcal{C}\right)}
\end{eqnarray*}


Per Induktion über die Tiefe $T\left(g\right)$ des Gates $g$\footnote{Die Tiefe $T:G\rightarrow\mathbb{N}$ sei die maximale Länge eines
Weges von einer Quelle zum Gate $g$.} wird gezeigt: 
\begin{eqnarray*}
\mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\hat{\tau}g\right)=\mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(g\right) &  & \mathrm{f\ddot{u}r\,alle}\,g\in G
\end{eqnarray*}

\begin{description}
\item [{Induktionsanfang~$T\left(g\right)=0$:}] Sei $g\in G$ ein Input
mit $\Sigma\left(g\right)=R\bar{x}$. Per Definition von $\tau$ und
$\hat{\tau}$ gilt:
\begin{eqnarray*}
\Sigma\left(\hat{\tau}g\right) & = & R\tau\bar{x}\\
\tau\bar{x}\in\tau\pi_{2}R^{\mathfrak{A}} & \Longleftrightarrow & \bar{x}\in\pi_{2}R^{\mathfrak{A}}
\end{eqnarray*}
 Es folgt: 
\begin{eqnarray*}
\mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\hat{\tau}g\right) & = & \left[\tau\pi_{2}R^{\mathfrak{A}}\right]\left(\tau\bar{x}\right)\\
 & = & \left[\pi_{2}R^{\mathfrak{A}}\right]\left(\bar{x}\right)\\
 & = & \mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(g\right)
\end{eqnarray*}
(Falls $\Sigma\left(g\right)\in\left\{ \mathbf{0},\mathbf{1}\right\} $,
folgt die Behauptung direkt aus $\Sigma\left(\hat{\tau}g\right)=\Sigma\left(g\right)$.)
\item [{Induktionsschritt~$n\mapsto n+1$:}]~

\begin{description}
\item [{Annahme:}] Für alle Gates $g\in G$ mit Tiefe $T\left(g\right)\leqslant n$
gilt $\mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\hat{\tau}g\right)=\mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(g\right)$.
\end{description}

So gilt für jedes Gatter $g'\in G$ mit $T\left(g'\right)=n+1$: 
\begin{enumerate}
\item Die Beschriftungen $\Sigma\left(\hat{\tau}g'\right)=\Sigma\left(g'\right)=\phi$
sind gleich.
\item $\mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\hat{\tau}g\right)=\mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(g\right)$
für alle $\left(g,g'\right)\in W$.
\end{enumerate}

Es folgt $\mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\hat{\tau}g'\right)=\mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(g'\right)$.

\end{description}
Schließlich gilt für jedes Tupel $\bar{a}\in A^{\mathrm{ar}\left(\mathcal{C}\right)}$:

\begin{eqnarray*}
\mathcal{C}\left[\pi_{1}\mathfrak{A}\right]\left(\Omega\left(\pi_{1}\bar{a}\right)\right) & = & \mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\Omega\left(\tau\pi_{2}\bar{a}\right)\right)\\
 & = & \mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\hat{\tau}\Omega\left(\pi_{2}\bar{a}\right)\right)\\
 & = & \mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(\Omega\left(\pi_{2}\bar{a}\right)\right)
\end{eqnarray*}


Damit ist der Schaltkreis invariant.
\end{proof}

\begin{proof}
Als Gegenbeispiel wird der folgende $0$-stellige Schaltkreis $\mathcal{C}$
über $U=\left\{ 1,2\right\} $ angeführt:
\begin{eqnarray*}
\mathcal{C} & \coloneqq & \left(G,W,\Sigma,\Omega,U\right)\\
G & \coloneqq & \left\{ g_{i,j}\mid i,j\in U\right\} \cup\left\{ g_{\wedge},g_{\wedge}'\right\} \\
W & \coloneqq & \left\{ \left(g_{1,1},g_{\wedge}\right),\left(g_{1,2},g_{\wedge}\right),\left(g_{2,1},g_{\wedge}'\right),\left(g_{2,2},g_{\wedge}'\right),\left(g_{\wedge},g_{\wedge}'\right)\right\} \\
\Sigma\left(g\right) & \coloneqq & \mathtt{AND}\\
\Omega & \coloneqq & g_{\wedge}'
\end{eqnarray*}


\begin{figure}[H]
\begin{centering}
\begin{center}
\tikzstyle{every node}=[circle, draw=black]
\begin{tikzpicture}

\node [label=below:$\Omega$] (C) {$\wedge$};

\node [above left of=C,node distance=6em] (B1) {$\wedge$};


\node [above left of=B1,node distance=6em] (A1) {$E12$};
\node [right of=A1,node distance=5.5em] (A2) {$E11$};
\node [right of=B1,node distance=5.5em] (A3) {$E22$};
\node [right of=A3,node distance=5.5em] (A4) {$E21$};

\path [->] (A1) edge (B1) (A2) edge (B1) (A3) edge (C) (A4) edge (C)
			(B1) edge (C);
\end{tikzpicture}
\par\end{center}
\par\end{centering}

\caption{Schaltkreis}
\end{figure}

\end{proof}
Der Schaltkreis ist invariant, und akzeptiert alle vollständigen $K_{2}$-Graphen.
Er ist aber nicht symmetrisch: Die Permutation $\left(\begin{array}{cc}
1 & 2\\
2 & 1
\end{array}\right)$ induziert keinen Automorphismus.
\begin{defn}
\textbf{\label{def:Rigidit=0000E4t}Rigidität}

Ein $\left(\sigma,\mathbb{B}\right)$-Schaltkreis $\mathcal{C}=\left(G,W,\Sigma,\Omega,U\right)$
sei rigide, wenn er keine redundanten Gates besitzt. Formal dürfen
nicht $g,g'\in G$ existieren, so dass:
\begin{eqnarray*}
\Sigma\left(g\right) & = & \Sigma\left(g'\right)\\
\left\{ u\in G\mid\left(u,g\right)\in W\right\}  & = & \left\{ u\in G\mid\left(u,g'\right)\in W\right\} 
\end{eqnarray*}


Insbesondere heißt dies, das der Schaltkreis höchstens zwei Konstanten
$g_{0},g_{1}$ mit $\Sigma\left(g_{0}\right)=\mathbf{0}$ und $\Sigma\left(g_{1}\right)=\mathbf{1}$
enthält, und jedes Beschriftung $\Sigma\left(g\right)=R\bar{x}$ nur
einmal vorkommt.
\end{defn}
Die Rigidität ist hier analog zu \cite{anderson_et_al:LIPIcs:2014:4445}
definiert, verlangt aber zusätzlich, dass zwei Gates nicht nur durch
die Output-Markierung $\Omega$ unterschieden werden. Diese Einschränkung
ist strenger, schränkt aber die Definition nicht bedeutend ein:

Für zwei Gates $g,g'\in G$ mit den gleichen Vorgängern $\Sigma\left(g\right)=\Sigma\left(g'\right)$
erlaubt die nicht-injektive Definition von $\Omega$, dass $g'$ entfernt
wird und $\Omega'\left(\bar{t}\right)\coloneqq g$ für alle $\bar{t}\in\Omega^{-1}\left(g'\right)$
gesetzt wird, was die strengere Form der Rigidität herstellt.


\section{Eigenschaften von Schaltkreisfamilien}
\begin{defn}
Eine $\left(\sigma,\mathbb{B}\right)$-\textbf{Schaltkreisfamilie}
$\bar{\mathcal{C}}=\left(\mathcal{C}_{n}\right)_{n\in\mathbb{N}}$
sei eine Sequenz von invarianten Schaltkreisen $\mathcal{C}_{n}=\left(G_{n},W_{n},\Sigma_{n},\Omega_{n},U_{n}\right)$
mit der gleichen Stelligkeit $\mathrm{ar}\left(\mathcal{C}_{n}\right)=k$
und den Universen $U_{n}=\left[1,n\right]$.

Die von der Schaltkreisfamilie berechnete $\sigma$-Anfrage $q_{\bar{\mathcal{C}}}$
sei wie folgt: 
\[
q_{\bar{\mathcal{C}}}\left(\mathfrak{A}\right)\coloneqq q_{\mathcal{C}_{\left|A\right|}}\left(\mathfrak{A}\right)
\]

\end{defn}

\begin{defn}
$\mathrm{SBC}$ und $\mathrm{SBC+\mathbf{MAJ}}$\end{defn}
\begin{itemize}
\item Sei $\mathrm{SBC}$ die Klasse aller \textbf{symmetrischen $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreisfamilien}.
\item Sei $\mathrm{SBC}+\mathbf{MAJ}$ die Klasse aller \textbf{symmetrischen
$\left(\sigma,\mathbb{B}_{\mathrm{maj}}\right)$-Schaltkreisfamilien}.
(Zur Erinnerung: $\mathbb{B}_{\mathrm{maj}}=\mathbb{B}_{\mathrm{std}}\uplus\left\{ \mathtt{MAJ}\right\} $,
wobei $\mathtt{MAJ}$ der Majority-Operator ist.)
\end{itemize}

\begin{defn}
\textbf{Uniformität}

Für eine Klasse von Turingmaschinen $T$ sei eine Schaltkreisfamilie
$\bar{\mathcal{C}}$ $T$-\textbf{uniform}, wenn ein $n_{0}\in\mathbb{N}$
existiert, so dass eine Turingmaschine aus $T$ bei Eingabe des Worts
$1\cdots1\in\left\{ 0,1\right\} ^{n}$ mit $n\geqslant n_{0}$ eine
Repräsentation von $\mathcal{C}_{n}$ berechnet.

Insbesondere sei $P$ die Klasse aller Turingmaschinen, die bei einer
Eingabe der Länge $n$ nach $f\left(n\right)\in n^{\mathcal{O}\left(1\right)}$
Schritten halten, und $\mathrm{LOGSPACE}\subseteq P$ die Klasse der
Turingmaschinen, die höchstens $f\left(n\right)\in\mathcal{O}\left(\log n\right)$
Speicherplatz belegen.
\end{defn}

\begin{defn}
\textbf{Beschränkte Größe}

Für eine Funktion $f:\mathbb{N}\rightarrow\mathbb{N}$ habe eine Schaltkreisfamilie
$\bar{\mathcal{C}}$ $f$-\textbf{Größe}, wenn für ein $n_{0}\in\mathbb{N}$
und alle $n\geqslant n_{0}$ gilt, dass $\left|\mathcal{C}_{n}\right|\leqslant f\left(n\right)$.
Für eine Klasse von Funktionen $\mathcal{F}\subseteq\mathrm{Abb}\left(\mathbb{N},\mathbb{N}\right)$
mit $f\in\mathcal{F}$ habe $\bar{C}$ $\mathcal{F}$-Größe.

Insbesondere sei $\mathrm{poly}\left(n\right)=n^{\mathcal{O}\left(1\right)}$
die Klasse aller polynomiell beschränkten Funktionen.\end{defn}
\begin{rem*}
Statt ,,$\mathrm{poly}\left(n\right)$-groß`` wird in \cite{anderson_et_al:LIPIcs:2014:4445}
der Begriff ,,$\mathrm{P}/\mathrm{poly}$-uniform`` verwendet:

Eine $\mathrm{P/poly}$-Turingmaschine arbeitet in Polynomialzeit
und erhält für eine Eingabe der Länge $n$ eine polynomiell beschränkte
Orakel-Eingabe $\Upsilon\left(n\right)\in\left\{ 0,1\right\} ^{f\left(n\right)}$,
$f\left(n\right)\in\mathrm{poly}\left(n\right)$. Unter Voraussetzung
einer geeigneten Kodierung kann $\Upsilon\left(n\right)$ jede $\mathrm{poly}\left(n\right)$-große
Schaltkreisfamilie repräsentieren.\cite{arora-barak}

Daher sind die Begriffe ,,$\mathrm{poly}\left(n\right)$-groß``
und ,,$P/\mathrm{poly}$-uniform`` äquivalent.\end{rem*}
\begin{defn}
\textbf{Beschränkte Tiefe}

Für eine Funktion $f:\mathbb{N}\rightarrow\mathbb{N}$ habe eine Schaltkreisfamilie
$\bar{\mathcal{C}}$ $f$-\textbf{Tiefe}, wenn $T\left(\mathcal{C}_{n}\right)\leqslant f\left(n\right)$
für ein $n_{0}\in\mathbb{N}$ und alle $n\geqslant n_{0}$. Für eine
Klasse $\mathcal{F}\subseteq\mathrm{Abb}\left(\mathbb{N},\mathbb{N}\right)$
sei der Begriff ,,$\mathcal{F}$-tief`` analog zu ,,$\mathcal{F}$-groß``
definiert.\end{defn}
\begin{rem*}
$\mathrm{AC}^{0}$ ist die Klasse der $\mathcal{O}\left(1\right)$-tiefen,
$\mathrm{poly}\left(n\right)$-großen Schaltkreisfamilien.
\end{rem*}
\pagebreak{}


\chapter{Von Formeln zu Schaltkreisfamilien}


\section{Logik erster Stufe}

Die Formeln der Logik erster Stufe sind durch symmetrische $P$-uniforme
$\mathrm{AC}^{0}$-Schaltkreise berechenbar:
\begin{lem}
\label{lem:FO-Circuit}Jede $\mathrm{FO}\left[\sigma\right]$-Formel
$\varphi\left(\bar{x}\right)$ definiert eine $\sigma$-Anfrage $q$,
die von einer symmetrischen $P$-uniformen Schaltkreis-Familie $\bar{\mathcal{C}^{\varphi}}$
mit $\left\Vert \varphi\right\Vert $-Tiefe und $\left\Vert \varphi\right\Vert n^{\mathtt{MF}\left(\varphi\right)}$-Größe
berechnet wird.\end{lem}
\begin{proof}
Sei $\sigma$ eine relationale Signatur, und sei $\varphi\left(\bar{x}\right)$
eine $k$-stellige $\mathrm{FO}\left[\sigma\right]$-Formel.

Per induktiver Konstruktion über den Aufbau von $\varphi$ wird der
$k$-stellige Schaltkreis $\mathcal{C}_{n}^{\varphi}$ über dem Universum
$U\coloneqq\left[1,n\right]$ definiert, so dass $\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\bar{t}\right)\Leftrightarrow\left\llbracket \mathcal{C}_{n}^{\varphi}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)$
für alle $n\in\mathbb{N}$, $\mathfrak{A}\in\mathbf{FIN}^{\left[1,n\right]}\left(\sigma\right)$
und $\bar{t}\in\left[1,n\right]^{k}$ gilt. Die Konstruktion ist in
berechenbar. Für eine beliebige Permutation $\pi\in\mathrm{Sym}_{U}$
wird ein Automorphismus $\hat{\pi}$ angegeben, und damit die Symmetrie
nachgewiesen.
\begin{casenv}
\item Falls $\varphi\left(\bar{x}\right)=R\bar{y}$ für $R/m\in\sigma$
und $\bar{y}\in\mathrm{frei}\left(\varphi\right)^{m}$, so besteht
$\mathcal{C}_{n}^{\varphi}$ aus $n^{k}$ Gates.

\begin{description}
\item [{Schaltkreis:}] 
\[
\mathcal{C}_{n}^{\varphi}\coloneqq\left(\left\{ g_{\bar{t}}\mid\bar{t}\in U^{k}\right\} ,\emptyset,\Sigma,\Omega,U\right)
\]
Für jedes Tupel $\bar{t}\in U^{k}$ sei $\beta_{\bar{t}}\coloneqq\left(\begin{array}{c}
\bar{x}\\
\bar{t}
\end{array}\right)$ die Belegung der Variablen $\bar{x}$ mit $\bar{t}$:
\begin{eqnarray*}
\Sigma\left(g_{\bar{t}}\right) & \coloneqq & R\beta_{\bar{t}}\left(\bar{y}\right)\\
\Omega\left(\bar{t}\right) & \coloneqq & g_{\bar{t}}
\end{eqnarray*}

\item [{Korrektheit:}] 
\[
\begin{array}{cccccc}
\left\llbracket R\bar{x}\right\rrbracket \left(\mathfrak{A},\bar{t}\right) & = & \left[R^{\mathfrak{A}}\right]\left(\beta_{\bar{t}}\bar{y}\right) & = & \mathcal{C}_{n}^{\varphi}\left[\mathfrak{A}\right]\left(g_{\bar{t}}\right)= & \left\llbracket \mathcal{C}_{n}^{\varphi}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)\end{array}
\]

\item [{Symmetrie:}] Sei $\hat{\pi}g_{\bar{t}}\coloneqq g_{\pi\bar{t}}$
für alle Tupel $\bar{t}\in U^{k}$. Per Definition ist $\pi\beta_{\bar{t}}\left(\bar{y}\right)=\beta_{\pi\bar{t}}\left(\bar{y}\right)$
und daher 
\begin{eqnarray*}
\Sigma\left(\hat{\pi}g_{\bar{t}}\right) & = & \pi\Sigma\left(g_{\bar{t}}\right)\\
\Omega\left(\pi\bar{t}\right) & = & \hat{\pi}\Omega\left(\bar{t}\right)
\end{eqnarray*}

\item [{Größe:}] Der Schaltkreis hat die Tiefe $0$ und die Größe $n^{k}=n^{\mathtt{MF}\left(\varphi\right)}$.
\end{description}
\item Falls $\varphi\left(\bar{x}\right)=y_{1}\dot{=}y_{2}$, so besteht
$\mathcal{C}_{n}^{\varphi}$ aus $n^{k}$ isolierten Gates (hier ist
$k\in\left\{ 1,2\right\} $).

\begin{description}
\item [{Schaltkreis:}] 
\[
\mathcal{C}_{n}^{\varphi}\coloneqq\left(\left\{ g_{\bar{t}}\mid\bar{t}\in U^{k}\right\} ,\emptyset,\Sigma,\Omega,U\right)
\]
Für jedes Tupel $\bar{t}\in U^{k}$ sei $\beta_{\bar{t}}\coloneqq\left(\begin{array}{c}
\bar{x}\\
\bar{t}
\end{array}\right)$ die entsprechende Belegung:
\begin{eqnarray*}
\Sigma\left(g_{\bar{t}}\right) & \coloneqq & \begin{cases}
\mathbf{1} & \mathrm{falls}\,\,\beta\left(y_{1}\right)=\beta\left(y_{2}\right)\\
\mathbf{0} & \mathrm{sonst}
\end{cases}\\
\Omega\left(\bar{t}\right) & \coloneqq & g_{\bar{t}}
\end{eqnarray*}

\item [{Korrektheit:}] 
\begin{eqnarray*}
\left\llbracket y_{1}\dot{=}y_{2}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)=1 & \Leftrightarrow & \left(\beta_{\bar{t}}y_{1}=\beta_{\bar{t}}y_{2}\right)\\
 & \Leftrightarrow & \mathcal{C}_{n}^{\varphi}\left[\mathfrak{A}\right]\left(g_{\bar{t}}\right)=1\\
 & \Leftrightarrow & \left\llbracket \mathcal{C}_{n}^{\varphi}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)=1
\end{eqnarray*}

\item [{Symmetrie:}] Sei $\hat{\pi}\left(g_{\bar{t}}\right)\coloneqq g_{\pi\bar{t}}$.
Es gilt $\beta_{\bar{t}}\left(x\right)=\beta_{\bar{t}}\left(x'\right)$
genau dann wenn $\beta_{\pi\bar{t}}\left(x\right)=\beta_{\pi\bar{t}}\left(x\right)$,
und daher ist $\Sigma\left(\hat{\pi}g_{\bar{t}}\right)=\Sigma\left(g_{\pi\bar{t}}\right)$.
\item [{Größe:}] Der Schaltkreis hat die Tiefe $0$ und die Größe $n^{k}=n^{\mathtt{MF}\left(\varphi\right)}$.
\end{description}
\item Falls $\varphi\left(\bar{x}\right)=\varphi_{1}\left(\bar{y_{1}}\right)\wedge\cdots\wedge\varphi_{m}\left(\bar{y_{m}}\right)$
mit $\mathrm{ar}\left(\varphi_{i}\right)=k_{i}$, so besteht $\mathcal{C}_{n}^{\varphi}$
aus der disjunkten Vereinigung aller $\mathcal{C}_{n}^{\varphi_{i}}$
für $1\leqslant i\leqslant m$ mit der folgenden Erweiterung.

\begin{description}
\item [{Schaltkreis:}] 
\begin{eqnarray*}
\mathcal{C}_{n}^{\varphi_{i}} & = & \left(G_{i},W_{i},\Sigma_{i},\Omega_{i},U\right)\\
\mathcal{C}_{n}^{\varphi} & \coloneqq & \left(G,W,\Sigma,\Omega,U\right)
\end{eqnarray*}
Es werden neue Outputs für jedes $k$-Tupel aus $U$ hinzugefügt:
\begin{eqnarray*}
G & \coloneqq & \biguplus_{i=1}^{m}G_{i}\uplus\left\{ g_{\bar{t}}\mid\bar{t}\in U^{k}\right\} 
\end{eqnarray*}
Die Outputs werden entsprechend mit denen von $\mathcal{C}_{n}^{\varphi_{i}}$
verknüpft, wobei $\rho_{i}:U^{k}\rightarrow U^{k_{i}}$ ein $k$-Tupel
$\bar{t}$ wie folgt auf die in $\varphi_{i}$ frei vorkommenden Variablen
reduziere:
\begin{eqnarray*}
\mathrm{Sei}\,\,\,\bar{j} & \in & \left[1,k\right]^{k_{i}}\\
\mathrm{so}\,\mathrm{dass}\,\,\,\bar{y_{i}} & = & \left(x_{\left(j_{1}\right)},\cdots,x_{\left(j_{k_{i}}\right)}\right)
\end{eqnarray*}
\begin{eqnarray*}
\mathrm{dann}\,\,\,\rho_{i}\left(t_{1},\cdots,t_{k}\right) & \coloneqq & \left(t_{\left(j_{1}\right)},\cdots,t_{\left(j_{k_{i}}\right)}\right)
\end{eqnarray*}
\begin{eqnarray*}
W & \coloneqq & \bigcup_{i=1}^{m}W_{i}\cup W_{\mathtt{AND}}\\
W_{\mathtt{AND}} & \coloneqq & \left\{ \left(\Omega_{i}\left(\rho_{i}\bar{t}\right),g_{\bar{t}}\right)\mid1\leqslant i\leqslant m,\,\bar{t}\in U^{k}\right\} 
\end{eqnarray*}
Die Gates werden entsprechend beschriftet:
\begin{eqnarray*}
\Sigma\left(g\right) & \coloneqq & \begin{cases}
\Sigma_{i}\left(g\right) & \mathrm{f\ddot{u}r}\,\,g\in G_{i}\\
\mathtt{AND} & \mathrm{sonst}
\end{cases}\\
\Omega\left(\bar{t}\right) & \coloneqq & g_{\bar{t}}\,\,\mathrm{f\ddot{u}r\,alle\,\,}\bar{t}\in U^{k}
\end{eqnarray*}

\item [{Korrektheit:}] Es gilt für $\bar{t}\in U^{k}$: 
\begin{eqnarray*}
\left\llbracket \varphi_{1}\wedge\cdots\wedge\varphi_{m}\right\rrbracket \left(\mathfrak{A},\bar{t}\right) & = & \min_{1\leqslant i\leqslant m}\left\llbracket \varphi_{i}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)\\
 & = & \min_{1\leqslant i\leqslant m}\mathcal{C}_{n}^{\varphi_{i}}\left[\mathfrak{A}\right]\left(\Omega_{i}\left(\rho_{i}\bar{t}\right)\right)\\
 & = & \mathcal{C}_{n}^{\varphi}\left[\mathfrak{A}\right]\left(g_{\bar{t}}\right)
\end{eqnarray*}

\item [{Symmetrie:}] Es existieren bereits die Automorphismen $\hat{\pi_{i}}$
für jeden Schaltkreis $\mathcal{C}_{n}^{\varphi_{i}}$. Der Automorphismus
$\hat{\pi}$ erweitert diese wie folgt:
\[
\hat{\pi}\left(g\right)\coloneqq\begin{cases}
\hat{\pi}_{i}\left(g\right) & \mathrm{f\ddot{u}r}\,g\in G_{i}\\
g_{\pi\bar{t}} & \mathrm{f\ddot{u}r}\,g=g_{\bar{t}}
\end{cases}
\]
Für die Gates und Kanten der Schaltkreise $\mathcal{C}_{n}^{\varphi_{i}}$
ist $\hat{\pi}$ per Annahme bereits korrekt.

\begin{enumerate}
\item Für jede neue Kante $\left(\Omega_{i}\left(\rho_{i}\bar{t}\right),g_{\bar{t}}\right)\in W_{\mathtt{AND}}$
gilt nach Voraussetzung: 
\begin{eqnarray*}
\left(\hat{\pi}\Omega_{i}\left(\rho_{i}\bar{t}\right),\hat{\pi}g_{\bar{t}}\right) & = & \left(\hat{\pi}_{i}\Omega_{i}\left(\rho_{i}\bar{t}\right),\hat{\pi}g_{\bar{t}}\right)\\
 & = & \left(\Omega_{i}\left(\rho_{i}\pi\bar{t}\right),g_{\pi\bar{t}}\right)\\
 & \in & W_{\mathtt{AND}}
\end{eqnarray*}
(Die Reduktion $\rho_{i}:U^{k}\rightarrow U^{k_{i}}$ ist ein Homomorphismus
und kommutiert mit der Permutation $\pi$.)
\item Es gilt $\Sigma\left(\hat{\pi}g_{\bar{t}}\right)=\Sigma\left(g_{\bar{t}}\right)=\mathtt{AND}$.
\item Es gilt $\hat{\pi}\Omega\left(\bar{t}\right)=\hat{\pi}g_{\bar{t}}=g_{\pi\bar{t}}=\Omega\left(\pi\bar{t}\right)$.
\end{enumerate}
\item [{Größe:}] Der Schaltkreis hat die Tiefe $T\left(\mathcal{C}_{n}^{\varphi}\right)$
und die Größe $\left|\mathcal{C}_{n}^{\varphi}\right|$: 
\begin{eqnarray*}
T\left(\mathcal{C}_{n}^{\varphi}\right) & = & 1+\max_{i=1}^{m}T\left(\mathcal{C}_{n}^{\psi_{i}}\right)\\
 & \overset{\mathrm{Ann.}}{\leqslant} & 1+\max_{i=1}^{m}\left\Vert \psi_{i}\right\Vert \\
 & \leqslant & 1+\sum_{i=1}^{m}\left\Vert \psi_{i}\right\Vert \leqslant\left\Vert \varphi\right\Vert 
\end{eqnarray*}
 
\begin{eqnarray*}
\left|\mathcal{C}_{n}^{\varphi}\right| & = & n^{k}+\sum_{i=1}^{m}\left|\mathcal{C}_{n}^{\psi_{i}}\right|\\
 & \overset{\mathrm{Ann.}}{\leqslant} & n^{k}+\sum_{i=1}^{m}\left\Vert \psi_{i}\right\Vert n^{\mathtt{MF}\left(\psi_{i}\right)}\\
 & \leqslant & n^{\mathtt{MF}\left(\varphi\right)}+\sum_{i=1}^{m}\left\Vert \psi_{i}\right\Vert n^{\mathtt{MF}\left(\varphi\right)}\\
 & \leqslant & n^{\mathtt{MF}\left(\varphi\right)}\left(1+\sum_{i=1}^{m}\left\Vert \psi_{i}\right\Vert \right)\leqslant n^{\mathtt{MF}\left(\varphi\right)}\left\Vert \varphi\right\Vert 
\end{eqnarray*}

\end{description}
\item Falls $\varphi\left(\bar{x}\right)=\varphi_{1}\vee\cdots\vee\varphi_{\ell}$,
so ist der Schaltkreis analog zu Fall 3 mit $\Sigma\left(g_{\bar{t}}\right)=\mathtt{OR}$.
\item Falls $\varphi\left(\bar{x}\right)=\neg\psi$, so wird der Schaltkreis
$\mathcal{C}_{n}^{\psi}$ wie folgt erweitert:

\begin{description}
\item [{Schaltkreis:}] 
\begin{eqnarray*}
\mathcal{C}_{n}^{\psi} & = & \left(G',W',\Sigma',\Omega',U\right)\\
\mathcal{C}_{n}^{\varphi} & \coloneqq & \left(G,W,\Sigma,\Omega,U\right)
\end{eqnarray*}
Für jedes Tupel $\bar{t}\in U^{k}$ wird ein neues Gate $g_{\bar{t}}$
eingefügt. Die Gates werden mit den Outputs von $\mathcal{C}_{n}^{\varphi'}$
verknüpft. 
\begin{eqnarray*}
G & \coloneqq & G'\uplus\left\{ g_{\bar{t}}\mid\bar{t}\in U^{k}\right\} \\
W & \coloneqq & W'\cup W_{\neg}\\
W_{\neg} & \coloneqq & \left\{ \left(\Omega'\left(\bar{t}\right),g_{\bar{t}}\right)\mid\bar{t}\in U^{k}\right\} \\
\Sigma\left(g\right) & \coloneqq & \begin{cases}
\Sigma'\left(g\right) & \mathrm{falls}\,\,g\in G'\\
\neg & \mathrm{sonst}
\end{cases}\\
\Omega\left(\bar{t}\right) & \coloneqq & g_{\bar{t}}
\end{eqnarray*}

\item [{Korrektheit:}] 
\begin{eqnarray*}
\left\llbracket \neg\psi\right\rrbracket \left(\mathfrak{A},\bar{t}\right) & = & 1-\left\llbracket \psi\right\rrbracket \left(\mathfrak{A},\bar{t}\right)\\
 & = & 1-\mathcal{C}_{n}^{\psi}\left[\mathfrak{A}\right]\left(\Omega'\left(\bar{t}\right)\right)\\
 & = & \mathcal{C}_{n}^{\varphi}\left[\mathfrak{A}\right]\left(g_{\bar{t}}\right)
\end{eqnarray*}

\item [{Symmetrie:}] Es existiert bereits der Automorphismus $\hat{\pi'}$.
Dieser wird wie folgt erweitert:
\[
\hat{\pi}\left(g\right)\coloneqq\begin{cases}
\hat{\pi'}\left(g\right) & \mathrm{falls}\,\,g\in G'\\
g_{\pi\bar{t}} & \mathrm{falls}\,\,g=g_{\bar{t}}
\end{cases}
\]
Dann gilt:
\begin{eqnarray*}
\hat{\pi}W_{\neg} & = & \left\{ \left(\hat{\pi}\Omega'\left(\bar{t}\right),\hat{\pi}g_{\bar{t}}\right)\mid\bar{t}\in U^{k}\right\} \\
 & = & \left\{ \left(\Omega'\left(\pi\bar{t}\right),g_{\pi\bar{t}}\right)\mid\bar{t}\in U^{k}\right\} =W_{\neg}\\
\Sigma\left(\hat{\pi}g_{\bar{t}}\right) & = & \Sigma\left(g_{\bar{t}}\right)=\neg
\end{eqnarray*}

\item [{Größe:}] Der Schaltkreis hat die Tiefe $T\left(\mathcal{C}_{n}^{\varphi}\right)$
und die Größe $\left|\mathcal{C}_{n}^{\varphi}\right|$: 
\begin{eqnarray*}
T\left(\mathcal{C}_{n}^{\varphi}\right) & = & 1+T\left(\mathcal{C}_{n}^{\psi}\right)\\
 & \leqslant & 1+\left\Vert \psi\right\Vert \leqslant\left\Vert \varphi\right\Vert 
\end{eqnarray*}
\begin{eqnarray*}
\left|\mathcal{C}_{n}^{\varphi}\right| & = & n^{k}+\left|\mathcal{C}_{n}^{\psi}\right|\\
 & \overset{\mathrm{Ann.}}{\leqslant} & n^{k}+\left\Vert \psi\right\Vert n^{\mathtt{MF}\left(\psi\right)}\\
 & \leqslant & n^{\mathtt{MF}\left(\varphi\right)}+\left\Vert \psi\right\Vert n^{\mathtt{MF}\left(\varphi\right)}\\
 & \leqslant & \left\Vert \varphi\right\Vert n^{\mathtt{MF}\left(\varphi\right)}
\end{eqnarray*}

\end{description}
\item Falls $\varphi\left(\bar{x}\right)=\exists y_{1}\cdots\exists y_{m}\psi\left(z_{1},\cdots,z_{k+m}\right)$,
so wird der Schaltkreis $\mathcal{C}_{n}^{\varphi'}$ wie folgt erweitert:

\begin{description}
\item [{Schaltkreis:}] 
\begin{eqnarray*}
\mathcal{C}_{n}^{\varphi} & \coloneqq & \left(G,W,\Sigma,\Omega,U\right)\\
\mathcal{C}_{n}^{\varphi'} & \coloneqq & \left(G',W',\Sigma',\Omega',U\right)
\end{eqnarray*}
Sei $\rho:U^{k+m}\rightarrow U^{k}$ die Abbildung, die aus $\bar{z}$
die gebundenen Variablen $\bar{y}$ entferne:
\begin{eqnarray*}
\mathrm{Sei}\,\,\,\bar{i} & \in & \left[1,k\right]^{k}\\
\mathrm{so}\,\mathrm{dass}\,\,\,\bar{x} & = & \left(z_{\left(i_{1}\right)},\cdots,z_{\left(i_{k}\right)}\right)\\
\mathrm{dann}\,\,\,\rho\left(t_{1},\cdots,t_{k}\right) & \coloneqq & \left(t_{\left(i_{1}\right)},\cdots,t_{\left(i_{k}\right)}\right)
\end{eqnarray*}

\end{description}

Es werden neue Outputs eingefügt.
\begin{eqnarray*}
G & \coloneqq & G'\uplus\left\{ g_{\bar{t}}\mid\bar{t}\in U^{k}\right\} 
\end{eqnarray*}
Jedes Gate $\Omega'\left(\bar{u}\right)$ mit $\bar{u}\in U^{k+m}$
wird mit dem Gate $g_{\rho\bar{u}}$ verknüpft.
\begin{eqnarray*}
W & \coloneqq & W'\cup W_{\exists}\\
W_{\exists} & \coloneqq & \left\{ \left(\Omega'\left(\bar{u}\right),g_{\rho\bar{u}}\right)\mid\bar{u}\in U^{k+m}\right\} 
\end{eqnarray*}



Die neuen Outputs werden mit $\mathtt{OR}$ markiert.
\begin{eqnarray*}
\Sigma\left(g\right) & \coloneqq & \begin{cases}
\Sigma'\left(g\right) & \mathrm{f\ddot{u}r}\,g\in G'\\
\mathtt{OR} & \mathrm{sonst}
\end{cases}
\end{eqnarray*}
\[
\Omega\left(\bar{t}\right)\coloneqq g_{\bar{t}}
\]

\begin{description}
\item [{Korrektheit:}] Für $\bar{t}\in U^{k}$ gilt: 
\begin{eqnarray*}
\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\bar{t}\right) & = & \max_{\begin{subarray}{c}
\bar{u}\in U^{k+m}\\
\rho\bar{u}=\bar{t}
\end{subarray}}\left\llbracket \psi\right\rrbracket \left(\mathfrak{A},\bar{u}\right)=1\\
 & = & \max_{\begin{subarray}{c}
\bar{u}\in U^{k+m}\\
\rho\bar{u}=\bar{t}
\end{subarray}}\left(\mathcal{C}_{n}^{\varphi}\left[\mathfrak{A}\right]\left(\Omega'\left(\bar{u}\right)\right)\right)\\
 & = & \mathcal{C}_{n}^{\varphi}\left[\mathfrak{A}\right]\left(g_{\bar{t}}\right)
\end{eqnarray*}

\item [{Symmetrie:}] Es existiert bereits der Automorphismus $\hat{\pi'}$.
Dieser wird wie folgt erweitert:
\[
\hat{\pi}\left(g\right)\coloneqq\begin{cases}
\hat{\pi'}\left(g\right) & \mathrm{f\ddot{u}r}\,\,g\in G'\\
g_{\pi\bar{t}} & \mathrm{f\ddot{u}r}\,\,g=g_{\bar{t}}
\end{cases}
\]
Auf den Gates von $\mathcal{C}_{n}^{\varphi'}$ ist $\hat{\pi}$ per
Annahme treu zu $\pi$.

\begin{enumerate}
\item Für die neuen Kanten $\left(\Omega'\left(\bar{u}\right),g_{\rho\bar{u}}\right)\in W$
gilt: $\left(\hat{\pi}\Omega'\left(\bar{u}\right),\hat{\pi}g_{\rho\bar{u}}\right)=\left(\Omega'\left(\pi\bar{u}\right),g_{\rho\pi\bar{u}}\right)\in W$.
\item $\hat{\pi}\Sigma\left(g_{\bar{t}}\right)=\Sigma\left(g_{\bar{t}}\right)=\mathtt{OR}$.
\item $\Omega\left(\pi\bar{t}\right)=g_{\pi\bar{t}}=\hat{\pi}g_{\bar{t}}=\hat{\pi}\Omega\left(\bar{t}\right)$.
\end{enumerate}
\item [{Größe:}] Der Schaltkreis hat die Tiefe $T\left(\mathcal{C}_{n}^{\varphi}\right)$
und die Größe $\left|\mathcal{C}_{n}^{\varphi}\right|$:
\begin{eqnarray*}
T\left(\mathcal{C}_{n}^{\varphi}\right) & = & 1+T\left(\mathcal{C}_{n}^{\psi}\right)\\
 & \leqslant & 1+\left\Vert \psi\right\Vert \leqslant\left\Vert \varphi\right\Vert 
\end{eqnarray*}
\begin{eqnarray*}
\left|\mathcal{C}_{n}^{\varphi}\right| & = & n^{k}+\left|\mathcal{C}_{n}^{\psi}\right|\\
 & \overset{\mathrm{Ann.}}{\leqslant} & n^{k}+\left\Vert \psi\right\Vert n^{\mathtt{MF}\left(\psi\right)}\\
 & \leqslant & n^{\mathtt{MF}\left(\varphi\right)}+\left\Vert \psi\right\Vert n^{\mathtt{MF}\left(\varphi\right)}\\
 & \leqslant & \left\Vert \varphi\right\Vert n^{\mathtt{MF}\left(\varphi\right)}
\end{eqnarray*}

\end{description}
\item Falls $\varphi\left(\bar{x}\right)=\forall y_{1}\cdots\forall y_{m}\psi\left(\bar{z}\right)$,
so sei der Schaltkreis analog zu Fall 8 mit $\Sigma\left(g_{\bar{t}}\right)\coloneqq\mathtt{AND}$.
\end{casenv}
\end{proof}
\begin{conjecture}
Die obige Konstruktion ist auch $\mathrm{LOGSPACE}$-uniform.
\end{conjecture}
Jedes Gate $g_{\bar{t}}$ kann durch ein Tupel $i\bar{t}\in\left[1,\left\Vert \varphi\right\Vert \right]\times U^{k}$
mit $k\log n$ Bits kodiert werden, und jeder Schritt der Konstruktion
muss nur zwei Gates auf einmal speichern: Das Output $g_{\bar{t}}$
für $\bar{t}\in U^{k}$ und einen seiner Vorgänger.

\pagebreak{}


\section{Ordnungserweiterung}

Wir betrachten die Logik $\mathrm{FO}+\mathbf{ORD}$, und weisen nach,
dass die Konstruktion aus Lemma \lemref{FO-Circuit} angepasst werden
kann, ohne die Klasse der $P$-uniformen symmetrischen $\mathrm{AC}^{0}$-Schaltkreise
zu verlassen.
\begin{lem}
\label{lem:fo-ord}Jede $\left(\mathrm{FO}+\mathbf{ORD}\right)\left[\sigma\right]$-Formel
$\varphi$ definiert eine $\sigma$-Anfrage $q$, die von einer symmetrischen,
$P$-uniformen $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreisfamilie
$\left(\mathcal{C}_{n}\right){}_{n\in\mathbb{N}}$ mit konstanter
$\left\Vert \varphi\right\Vert $-Tiefe und polynomieller $\left\Vert \varphi\right\Vert \left(2n+1\right)^{\mathtt{MF}\left(\varphi\right)}$-Größe
berechnet wird.\end{lem}
\begin{proof}
Sei $\varphi$ eine $k$-stellige $\left(\mathrm{FO}+\mathbf{ORD}\right)\left[\sigma\right]$-Formel.
Für $n\in\mathbb{N}$ und $\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
wird $\varphi$ auf der disjunkt vereinigten $\left(\sigma\cup\left\{ \leqslant\right\} \right)$-Struktur
$\mathfrak{A}\uplus\Upsilon\left(n\right)$ ausgewertet, wobei $\Upsilon\left(n\right)=\left(\left[0,n\right],\leqslant\right)$
die lineare Ordnung auf $\left[0,n\right]$ ist.

Der Schaltkreis $\mathcal{C}_{n}$ wird aber auf der umbenannten $\sigma$-Struktur
$\mathfrak{A}'\coloneqq\pi\mathfrak{A}\in\mathbf{FIN}^{\left[1,n\right]}\left(\sigma\right)$
mit dem Universum $U=\left[1,n\right]$ ausgewertet.

Vor der Konstruktion muss daher sichergestellt werden, dass das Universum
von $\mathfrak{A}'$ disjunkt von dem Universum der Orakelstruktur
$\Upsilon\left(n\right)$ ist. Dazu wird das Universum $\left[0,n\right]$
von $\Upsilon\left(n\right)$ durch eine Umbenennung nach $\left[n+1,2n+1\right]$
,,verschoben``:
\begin{eqnarray*}
\Upsilon'\left(n\right) & \coloneqq & \rho\Upsilon\left(n\right)\\
\rho & : & \left[0,n\right]\rightarrow\left[n+1,2n+1\right]\\
\rho\left(i\right) & \coloneqq & i+n+1
\end{eqnarray*}


Nun betrachten wir die disjunkte Vereinigung (wobei die Ordnung $\leqslant$
weiterhin nur auf $\left[n+1,2n+1\right]$ definiert ist): 
\[
\mathfrak{A}'\uplus\Upsilon'\left(n\right)\in\mathbf{FIN}^{\left[1,2n+1\right]}\left(\sigma\cup\left\{ \leqslant\right\} \right)
\]


Weil $\Upsilon\left(n\right)\cong\Upsilon'\left(n\right)$ und $\mathfrak{A}\cong\mathfrak{A}'$,
gilt auch $\mathfrak{A}\uplus\Upsilon\left(n\right)\cong\mathfrak{A}'\uplus\Upsilon'\left(n\right)$
(denn der Isomorphismus ist unter disjunkter Vereinigung abgeschlossen):
\[
\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A}\uplus\Upsilon\left(n\right)\right)=\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A}'\uplus\Upsilon'\left(n\right)\right)
\]


Wir konstruieren nun zunächst einen $\left(\sigma\cup\left\{ \leqslant\right\} ,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreis
$\mathcal{C}_{2n+1}^{\varphi}$ über $U'=\left[1,2n+1\right]$ entsprechend
dem vorhergehenden Beweis für $\mathrm{FO}$. Dieser arbeitet korrekt
auf $\mathfrak{A}'\uplus\Upsilon'\left(n\right)$ und hat offensichtlich
die geforderte Größe $S_{n}\leqslant5\left\Vert \varphi\right\Vert \left(2n+1\right)^{\mathtt{MF}\left(\varphi\right)}$.

Anschließend konstruieren wir daraus den $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreis
\begin{eqnarray*}
\dot{\mathcal{C}_{n}^{\varphi}} & \coloneqq & \left(G,W,\dot{\Sigma},\dot{\Omega},U\right)\\
U & \coloneqq & \left[1,n\right]
\end{eqnarray*}
 indem alle Inputs $\Sigma\left(g\right)=R\bar{t}$ mit $\bar{t}\notin U^{k}$
oder $R\notin\sigma$ durch Konstanten $\dot{\Sigma}\left(g\right)\in\left\{ \mathbf{0},\mathbf{1}\right\} $
ersetzt werden, und die Ausgangsfunktion auf $\dot{\Omega}=\Omega_{\mid U^{k}}$
reduziert wird.
\begin{casenv}
\item Für $\Sigma\left(g\right)=R\bar{t}$ mit $R\in\sigma$ werden die
,,überschüssigen`` Inputs einfach auf $\mathbf{0}$ gesetzt:
\begin{eqnarray*}
\dot{\Sigma}\left(g\right) & \coloneqq & \begin{cases}
R\bar{t} & \mathrm{falls}\,\,\bar{t}\in U^{k}\\
\mathbf{0} & \mathrm{sonst}
\end{cases}
\end{eqnarray*}

\item Für $\Sigma\left(g\right)=t_{1}\dot{\leqslant}t_{2}$ wird das Ordnungsprädikat
fest in den Schaltkreis eingebaut:
\begin{eqnarray*}
\dot{\Sigma}\left(g\right) & \coloneqq & \begin{cases}
\mathbf{1} & \mathrm{falls}\,\,t_{1},t_{2}\in\left[n+1,2n+1\right],\,t_{1}\leqslant t_{2}\\
\mathbf{0} & \mathrm{sonst}
\end{cases}
\end{eqnarray*}

\end{casenv}
Sei nun $\pi\in\mathrm{Sym}_{U}$ eine beliebige Permutation.

Wir betrachten die Erweiterung $\pi'\coloneqq\pi\cup\mathbf{id}_{\mid\left[n+1,2n+1\right]}$,
die die Elemente von $\Upsilon'\left(n\right)$ auf sich selbst abbildet.
Offensichtlich ist $\pi'\in\mathrm{Sym}_{U'}$ eine Permutation von
$U'=\left[1,2n+1\right]$.

Aus der Symmetrie des Schaltkreises $\mathcal{C}_{2n+1}^{\varphi}$
bezüglich $\mathrm{Sym}_{U'}$ (siehe Lemma \ref{lem:FO-Circuit})
folgt die Existenz eines von $\pi'$ induzierten Automorphismus $\hat{\pi}$.

Es wird nun nachgewiesen, dass $\hat{\pi}$ auch ein von $\pi$ induzierter
Automorphismus in $\dot{\mathcal{C}_{n}^{\varphi}}$ ist. Dazu müssen
nur $\dot{\Sigma}$ und $\dot{\Omega}$ betrachtet werden, da der
Graph $\left(G,W\right)$ unverändert bleibt. Ferner betrachten wir
nur die nicht-konstanten Inputs von $\mathcal{C}_{2n+1}^{\varphi}$,
denn ansonsten bleibt $\Sigma$ unverändert.
\begin{casenv}
\item Für $\Sigma\left(g\right)=R\bar{t}$ mit $R\in\sigma$ gilt:

\begin{casenv}
\item Falls $\bar{t}\in U^{k}$:
\[
\dot{\Sigma}\left(\hat{\pi}g\right)=\Sigma\left(\hat{\pi}g\right)=R\pi\bar{t}
\]

\item Sonst:
\[
\dot{\Sigma}\left(\hat{\pi}g\right)=\mathbf{0}=\dot{\Sigma}\left(g\right)
\]

\end{casenv}
\item Für $\Sigma\left(g\right)=t_{1}\dot{\leqslant}t_{2}$ gilt:

\begin{casenv}
\item Falls $t_{1},t_{2}\in\left[n+1,2n+1\right]$ und $t_{1}\leqslant t_{2}$:
\[
\dot{\Sigma}\left(\hat{\pi}g\right)=\mathbf{1}=\dot{\Sigma}\left(g\right)
\]

\item Sonst:
\[
\dot{\Sigma}\left(\hat{\pi}g\right)=\mathbf{0}=\dot{\Sigma}\left(g\right)
\]

\end{casenv}
\end{casenv}
Außerdem gilt ist $U^{k}$ bezüglich $\pi'$ abgeschlossen: 
\[
\hat{\pi}\dot{\Omega}\left(\bar{t}\right)=\hat{\pi}\Omega\left(\bar{t}\right)=\Omega\left(\pi'\bar{t}\right)=\dot{\Omega}\left(\pi'\bar{t}\right)
\]
 Damit ist $\bar{\dot{\mathcal{C}^{\varphi}}}$ eine symmetrische,
$P$-uniforme Schaltkreisfamilie in $\mathrm{AC}^{0}$, die die Anfrage
$q$ berechnet.
\end{proof}
\pagebreak{}


\section{Zählquantoren}

Wir betrachten die Logik $\mathrm{FO}+C$, und weisen nach, dass die
vorhergehende Konstruktion aus Lemma \ref{lem:fo-ord} angepasst werden
kann, indem Majority-Gates hinzugefügt werden.
\begin{lem}
\label{lem:fo-c}Jede $\left(\mathrm{FO}+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel
$\varphi$ definiert eine $\sigma$-Anfrage $q$, die von einer symmetrischen,
$P$-uniformen $\left(\sigma,\mathbb{B}_{\mathrm{maj}}\right)$-Schaltkreisfamilie
$\left(\mathcal{C}_{n}\right)_{n\in\mathbb{N}}$ mit konstanter $\left\Vert \varphi\right\Vert $-Tiefe
und polynomieller $\left\Vert \varphi\right\Vert \cdot\left(2n+1\right)^{\mathtt{MF}\left(\varphi\right)}$-Größe
berechnet wird.\end{lem}
\begin{proof}
Sei $\varphi$ eine $k$-stellige $\left(\mathrm{FO}+\exists^{\geqslant}\right)\left[\sigma\right]$-Formel.
Der $\left(\sigma\cup\left\{ \leqslant\right\} ,\mathbb{B}_{\mathrm{maj}}\right)$-Schaltkreis
$\mathcal{C}_{2n+1}^{\varphi}$ über dem Universum $U'\coloneqq\left[1,2n+1\right]=\left[1,n\right]\uplus\rho\left[0,n\right]$
wird nach dem gleichen Schema wie in Lemma \ref{lem:fo-ord}, wobei
ein neuer Fall hinzukommt.

(Zur Erinnerung: $\rho:\left[0,n\right]\rightarrow\left[n+1,2n+1\right]$
ist die Verschiebung des Universums von $\Upsilon\left(n\right)$.)

Falls $\varphi\left(\bar{x}\right)=\exists^{\geqslant x_{i}}y_{j}\psi\left(\bar{y}\right)$,
so sei $\mathcal{C}_{2n+1}^{\psi}$ der $k$-stellige Schaltkreis
für die Formel $\psi$:
\[
\mathcal{C}_{2n+1}^{\psi}=\left(G_{\psi},W_{\psi},\Sigma_{\psi},\Omega_{\psi},U'\right)
\]

\begin{description}
\item [{Schaltkreis:}] 
\begin{eqnarray*}
\mathcal{C}_{2n+1}^{\varphi} & \coloneqq & \left(G,W,\Sigma,\Omega,U'\right)
\end{eqnarray*}
Es wird für jedes Tupel $\bar{t}\in U'^{k}$ ein neuer Output $g_{\bar{t}}$
eingefügt; ferner werden $2n$ Konstanten eingefügt: 
\begin{eqnarray*}
G & = & G_{\psi}\uplus\left\{ g_{\bar{t}}\mid\bar{t}\in U'^{k}\right\} \uplus\left\{ 0_{j},1_{j}\mid1\leqslant j\leqslant n\right\} \\
W & = & W_{\psi}\uplus W_{\mathtt{MAJ}}\uplus W_{\mathrm{pad}}
\end{eqnarray*}
Die neuen Outputs werden mit $\mathtt{MAJ}$ markiert, falls $t_{i}$
(der Wert der Variable $x_{i}$) einer der numerischen Werte (im Bereich
$\rho\left[0,n\right]=\left[n+1,2n+1\right]$) ist, und sonst mit
$\mathbf{0}$. 
\[
\begin{array}{ccc}
\Sigma\left(0_{j}\right)=\mathbf{0}, & \Sigma\left(0_{j}\right)=\mathbf{1}, & \Sigma\left(g_{\bar{t}}\right)=\begin{cases}
\mathtt{MAJ} & \mathrm{falls}\,\,t_{i}\in\rho\left[0,n\right]\\
\mathbf{0} & \mathrm{sonst}
\end{cases}\end{array}
\]
\[
\Omega\left(\bar{t}\right)=g_{\bar{t}}
\]
Seien $\tau_{1},\tau_{2}:U^{k}\rightarrow U^{k-1}$ die folgenden
Abbildungen, die den Wert $t_{i}$ aus $\bar{t}$ beziehungsweise
$u_{j}$ aus $\bar{u}$ entfernen:
\begin{eqnarray*}
\tau_{1}\left(t_{1},\cdots,t_{k}\right) & = & \left(t_{1},\cdots t_{i-1},t_{i+1},\cdots,t_{k}\right)\\
\tau_{2}\left(t_{1},\cdots,t_{k}\right) & = & \left(t_{1},\cdots t_{j-1},t_{j+1},\cdots,t_{k}\right)
\end{eqnarray*}
Es gilt also $\tau_{1}\left(\bar{t}\right)=\tau_{2}\left(\bar{u}\right)$
genau dann wenn $\bar{t}$ und $\bar{u}$ in den gemeinsamen freien
Variablen von $\varphi$ und $\psi$ übereinstimmen. Das Majority-Gate
$g_{\bar{t}}$ soll prüfen, ob $t_{i}\leqslant\rho f\left(\tau_{1}\left(\bar{t}\right)\right)$,
wobei $f:U^{k-1}\rightarrow\left[0,n\right]$ die Anzahl der $\psi$
erfüllenden Belegungen von $y_{j}$ bei der Belegung der übrigen freien
Variablen mit $\tau_{1}\left(\bar{t}\right)$ sei: 
\begin{eqnarray*}
f\left(\bar{t'}\right) & \coloneqq & \left|\left\{ u_{j}\in\left[1,n\right]\mid\mathrm{es\,existiert\,}\bar{u}\in q_{\mathcal{C}_{2n+1}^{\psi}}\left(\mathfrak{A}\uplus\rho\Upsilon\left(n\right)\right),\,\tau_{2}\left(\bar{u}\right)=\bar{t'}\right\} \right|
\end{eqnarray*}
Dazu wird jedes Gate $g_{\bar{t}}$ mit $t_{i}\in\left[n+1,2n+1\right]$
zunächst mit den entsprechenden Outputs von $\mathcal{C}_{2n+1}^{\psi}$
verknüpft: 
\[
W_{\mathtt{MAJ}}=\left\{ \left(\Omega_{\psi}\left(\bar{u}\right),g_{\bar{t}}\right)\mid\bar{t},\bar{u}\in U'^{k},\,\tau_{1}\left(\bar{t}\right)=\tau_{2}\left(\bar{u}\right),\,u_{j}\in\left[1,n\right]\right\} 
\]
Momentan hat es genau $n$ Eingänge (für jeden Wert $u_{j}\in\left[1,n\right]$).
Daher gibt es $1$ aus, wenn $f\left(\bar{t}\right)\geqslant\frac{n}{2}$.
Es soll aber berechnen, ob $f\left(\bar{t}\right)\geqslant\rho^{-1}t_{i}$.
Dazu fügen wir die Kanten $W_{\mathrm{pad}}$ ein, um die Eingänge
der Majority-Gates mit Konstanten aufzufüllen. Ein Majority-Gate mit
$k$ zusätzlichen $\mathbf{0}$-Eingängen entscheidet $f\left(\bar{t}\right)\geqslant\frac{n+k}{2}$,
eines mit $k'$ zusätzlichen $\mathbf{1}$-Eingängen berechnet $f\left(\bar{t}\right)\geqslant\frac{n-k'}{2}$.
Es folgt:
\begin{eqnarray*}
\rho^{-1}t_{i} & \in & \left\{ \frac{n+k}{2},\frac{n-k'}{2}\right\} \\
k=2\rho^{-1}t_{i}-n & \mbox{oder} & k'=n-2\rho^{-1}t_{i}
\end{eqnarray*}
Jedes Majority-Gate $g_{\bar{t}}$ muss entweder $k=2\rho^{-1}t_{i}-n$
$\mathbf{0}$-Eingänge oder $k'=n-2\rho^{-1}t_{i}$ $\mathbf{1}$-Eingänge
erhalten:
\begin{eqnarray*}
W_{\mathrm{pad}} & = & \left\{ \left(0_{j},g_{\bar{t}}\right)\mid\bar{t}\in U'^{k},\,t_{i}\in\rho\left[0,n\right],\,1\leqslant j\leqslant2\rho^{-1}t_{i}-n\right\} \\
 & \cup & \left\{ \left(1_{j},g_{\bar{t}}\right)\mid\bar{t}\in U'^{k},\,t_{i}\in\rho\left[0,n\right],\,1\leqslant j\leqslant n-2\rho^{-1}t_{i}\right\} 
\end{eqnarray*}
\begin{eqnarray*}
\overset{n+k=2\rho^{-1}t_{i}}{\overbrace{x_{1}\cdots x_{n}\underset{k=2\rho^{-1}t_{i}-n}{\underbrace{\mathbf{0}\mathbf{0}\cdots\mathbf{0}}}}} &  & \overset{n+k'=2n-2\rho^{-1}t_{i}}{\overbrace{x_{1}\cdots x_{n}\underset{k'=n-2\rho^{-1}t_{i}}{\underbrace{\mathbf{1}\mathbf{1}\cdots\mathbf{1}}}}}
\end{eqnarray*}

\item [{Symmetrie:}] Der neue Schaltkreis ist offensichtlich nicht symmetrisch
bezüglich $\mathrm{Sym}_{U'}$, denn die Anzahl der konstanten Vorgänger
von $g_{\bar{t}}$ hängt von dem Wert $t_{i}$ ab. Allerdings ist
er symmetrisch bezüglich der Permutationen, die die Werte in $\left[n+1,2n+1\right]$
fixieren. (Da die Induktion in Lemma \ref{lem:FO-Circuit} für eine
beliebige Permutation $\pi$ gilt, funktioniert sie auch für diesen
Spezialfall.)


Sei $\pi\in\mathrm{Sym}_{U}$ beliebig, und $\pi'\coloneqq\pi\cup\mathbf{id}_{\left[n+1,2n+1\right]}$
deren Erweiterung auf $U'$. Nun erweitern wir den Automorphismus
$\hat{\pi}$ von $\mathcal{C}_{2n+1}^{\psi}$ wie folgt: 
\begin{eqnarray*}
\hat{\pi}\left(0_{i}\right) & \coloneqq & 0_{i}\\
\hat{\pi}\left(1_{i}\right) & \coloneqq & 1_{i}\\
\hat{\pi}\left(g_{\bar{t}}\right) & \coloneqq & g_{\pi'\bar{t}}
\end{eqnarray*}

\begin{enumerate}
\item Nun gilt für jede Kante $\left(\Omega_{\psi}\left(\bar{u}\right),g_{\bar{t}}\right)\in W_{\mathrm{maj}}$
mit $\bar{t},\bar{u}\in U'^{k}$ und $\tau_{1}\left(\bar{t}\right)=\tau_{2}\left(\bar{u}\right)$:
\begin{eqnarray*}
\left(\hat{\pi}\Omega_{\psi}\left(\bar{u}\right),\hat{\pi}g_{\bar{t}}\right) & \overset{\mathrm{Ann.}}{=} & \left(\Omega_{\psi}\left(\pi'\bar{u}\right),\hat{\pi}g_{\bar{t}}\right)\\
 & = & \left(\Omega_{\psi}\left(\pi'\bar{u}\right),g_{\pi'\bar{t}}\right)
\end{eqnarray*}
Und weil $\pi'\bar{t},\pi'\bar{u}\in U'^{k}$ und $\tau_{1}\left(\pi'\bar{t}\right)=\tau_{2}\left(\pi'\bar{u}\right)$
gilt, folgt:
\[
\left(\Omega_{\psi}\left(\pi'\bar{u}\right),g_{\pi'\bar{t}}\right)\in W_{\mathtt{MAJ}}
\]

\item Für jede Kante $\left(0_{j},g_{\bar{t}}\right)\in W_{\mathrm{pad}}$
(mit $\bar{t}\in U'^{k}$ und $t_{i}\in\left[n+1,2n+1\right]$, und
$j\in\left[1,2t_{i}-3n-2\right]$):
\begin{eqnarray*}
\left(\hat{\pi}0_{j},\hat{\pi}g_{\bar{t}}\right) & = & \left(0_{j},g_{\pi'\bar{t}}\right)
\end{eqnarray*}
Und weil $\pi't_{i}=t_{i}$, gilt immer noch $j\in\left[1,2\pi't_{i}-3n-2\right]$,
und daher $\left(\hat{\pi}0_{j},\hat{\pi}g_{\bar{t}}\right)\in W_{\mathrm{pad}}$.
Das gleiche gilt analog für die Kanten $\left(\hat{\pi}1_{j},\hat{\pi}g_{\bar{t}}\right)$.
\item Für $\Sigma$:
\begin{eqnarray*}
\Sigma\left(\hat{\pi}0_{j}\right) & = & \Sigma\left(0_{j}\right)\\
\Sigma\left(\hat{\pi}1_{j}\right) & = & \Sigma\left(1_{j}\right)\\
\Sigma\left(\hat{\pi}g_{\bar{t}}\right) & = & \Sigma\left(g_{\pi'\bar{t}}\right)\\
 & = & \begin{cases}
\mathtt{MAJ} & \mathrm{falls}\,\,\pi't_{i}\in\left[n+1,2n+1\right]\\
\mathbf{0} & \mathrm{sonst}
\end{cases}\\
 & = & \Sigma\left(g_{\bar{t}}\right)
\end{eqnarray*}


\begin{enumerate}
\item Für $\Omega$ ist $\hat{\pi}\Omega\left(\bar{t}\right)=\hat{\pi}g_{\bar{t}}=g_{\pi'\bar{t}}=\Omega\left(\pi'\bar{t}\right)$
per Definition gegeben.
\end{enumerate}
\end{enumerate}
\begin{description}
\item [{Größe:}] 
\begin{eqnarray*}
T\left(\mathcal{C}_{2n+1}^{\varphi}\right) & \leqslant & 1+T\left(\mathcal{C}_{2n+1}^{\psi}\right)\\
 & \overset{\mathrm{Ann.}}{\leqslant} & 1+\left\Vert \psi\right\Vert \leqslant\left\Vert \varphi\right\Vert 
\end{eqnarray*}
\begin{eqnarray*}
\left|\mathcal{C}_{2n+1}^{\varphi}\right| & \leqslant & \left(2n+1\right)^{k}+2n+\left|\mathcal{C}_{2n+1}^{\psi}\right|\\
 & \overset{\mathrm{Ann.}}{\leqslant} & \left(2n+1\right)^{k}+2n+\left\Vert \psi\right\Vert \left(2n+1\right)^{\mathtt{MF}\left(\psi\right)}\\
 &  & \left(2n+1\right)^{\mathtt{MF}\left(\varphi\right)}+\left\Vert \psi\right\Vert \left(2n+1\right)^{\mathtt{MF}\left(\varphi\right)}\\
 & \leqslant & \left\Vert \varphi\right\Vert \left(2n+1\right)^{\mathtt{MF}\left(\varphi\right)}
\end{eqnarray*}

\end{description}
\end{description}
Nach der Erzeugung von $\mathcal{C}_{2n+1}^{\varphi}$ wird der Schaltkreis
auf die bereits beschriebene Weise zu $\dot{\mathcal{C}_{n}^{\varphi}}$
umgewandelt, in dem die nicht-konstanten Inputs mit Elementen aus
$\left[n+1,2n+1\right]$ zu Konstanten werden. Der neue Schritt fügt
keine nicht-konstanten Inputs hinzu, so dass sich hierbei nichts ändert.

Da der Schaltkreis $\mathcal{C}_{2n+1}^{\varphi}$ für jede Permutation
$\pi\uplus\mathbf{id}_{\left[n+1,2n+1\right]}$ mit $\pi\in\mathrm{Sym}_{\left[1,n\right]}$
einen Automorphismus besitzt, ist der Schaltkreis $\dot{\mathcal{C}_{n}^{\varphi}}$
symmetrisch (siehe Lemma \ref{lem:fo-ord}).

\pagebreak{}
\end{proof}

\section{Beliebige Orakel}

Wir betrachten die Logik $\mathrm{FO}+\Upsilon$ für beliebige Orakel
$\Upsilon:\mathbb{N}\rightarrow\mathbf{FIN}_{\leqslant}\left(\eta\right)$,
und weisen nach, dass die Konstruktion aus \ref{lem:fo-ord} auf beliebige
Prädikate erweitert werden kann, wobei die Uniformität, aber nicht
die beschränkte Größe geopfert wird.
\begin{lem}
\label{lem:fo-u}Seien $\eta$ und $\sigma$ disjunkte Signaturen
und $\Upsilon\rightarrow\mathbf{FIN}_{\leqslant}\left(\eta\right)$
ein Orakel.

Jede $\left(\mathrm{FO}+\Upsilon\right)\left[\sigma\right]$-Formel
$\varphi$ definiert eine $\sigma$-Anfrage $q$, die von einer symmetrischen
$\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreisfamilie
$\left(\mathcal{C}_{n}\right){}_{n\in\mathbb{N}}$ mit konstanter
$\left\Vert \varphi\right\Vert $-Tiefe und polynomieller $\left\Vert \varphi\right\Vert \left(2n+1\right)^{\mathtt{MF}\left(\varphi\right)}$-Größe
berechnet wird.\end{lem}
\begin{proof}
Sei $n\in\mathbb{N}$ beliebig und sei $\rho:\left[0,n\right]\rightarrow\left[n+1,2n+1\right]$
wie bisher definiert. Die Struktur $\Upsilon\left(n\right)$ wird
zu 
\[
\Upsilon'\left(n\right)=\rho\Upsilon'\left(n\right)=\left(\left[n+1,2n+1\right],\left(\rho R^{\Upsilon\left(n\right)}\right)_{R\in\eta}\right)
\]


Zunächst wird der $\left(\sigma\cup\eta\cup\left\{ \leqslant\right\} ,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreis
$\mathcal{C}_{2n+1}^{\varphi}$ wie in Lemma \ref{lem:fo-ord} erzeugt.

Bei der Erzeugung des $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreises
$\dot{\mathcal{C}_{n}^{\varphi}}$ wird nun der folgende Konstruktionsschritt
hinzugefügt:
\begin{casenv}
\item Falls $\Sigma\left(g\right)=R\bar{t}$ mit $R\in\eta$, $\mathrm{ar}\left(R\right)=k$,
und $\bar{t}\in U'^{k}$:
\[
\dot{\Sigma}\left(g\right)=\begin{cases}
\mathbf{1} & \mathrm{falls}\,\,\bar{t}\in R^{\Upsilon'\left(n\right)}\subseteq\left[n+1,2n+1\right]^{k}\\
\mathbf{0} & \mathrm{sonst}
\end{cases}
\]


\begin{description}
\item [{Symmetrie:}] Wenn $\dot{\Sigma}\left(g\right)=\mathbf{1}$, dann
gilt $\bar{t}\in R^{\Upsilon'\left(n\right)}$, und $\pi'\left(\bar{t}\right)=\bar{t}$
(weil $\pi'_{\mid\left[n+1,2n+1\right]}=\mathbf{id}_{\mid\left[n+1,2n+1\right]}$
ist). Daher ist $\Sigma\left(\hat{\pi}g\right)=R\pi'\bar{t}=R\bar{t}$,
und somit gilt auch $\dot{\Sigma}\left(\hat{\pi}g\right)=\mathbf{1}$.
\end{description}
\end{casenv}
Hierbei ist zu beachten, dass die Relation $R^{\Upsilon'\left(n\right)}$
nicht in Polynomialzeit entscheidbar sein muss, und daher die so definierte
Schaltkreisfamilie nicht mehr $P$-uniform ist.

Offensichtlich ist sie jedoch immer noch $\mathrm{poly}\left(n\right)$-groß
und daher auch $P/\mathrm{poly}$-uniform.
\end{proof}
\pagebreak{}


\section{Fixpunktlogik}

Die Fixpunktlogik $\mathrm{LFP}\left[\sigma\right]$ ist echt ausdrucksstärker
als die Logik $\mathrm{FO}\left[\sigma\right]$. Beispielsweise ist
die Erreichbarkeit über einen Pfad beliebiger Länge nicht erststufig
definierbar \cite{Immerman1982,Libkin2012}. In $\mathrm{LFP}\left[\left\{ E\right\} \right]$
wird diese Klasse durch die folgende Formel definiert:
\[
\varphi\left(u,v\right)\coloneqq\left[\mathrm{lfp}_{R,\left(x,y\right)}\,\left(\exists z\,\left(E\left(x,z\right)\wedge R\left(z,y\right)\right)\vee x=y\right)\right]\left(u,v\right)
\]
 Trotzdem kann jede $\mathrm{LFP}\left[\sigma\right]$-Formel $\varphi$
durch eine Familie von $\mathrm{FO}\left[\sigma\right]$-Formeln $\left(\varphi_{n}\right)_{n\in\mathbb{N}}$
mit einer konstanten Anzahl Variablen definiert werden, so dass $\varphi_{n}$
auf den Strukturen der Größe $n$ äquivalent zu $\varphi$ ist. Dies
ist vergleichbar zum $k$-Variablen-Fragment der infinitären Logik
$L_{\infty\omega}^{k}$, welches die Fixpunktlogik einschließt.\cite{Dawar1995a,Kolaitis1992a}
Hier hat jedoch jede einzelne Formel $\varphi_{n}$ eine endliche
Länge.
\begin{lem}
\label{lem:lfp-inf}Für jede $\mathrm{LFP}\left[\sigma\right]$-Formel
$\varphi$ mit $\left\Vert \varphi\right\Vert =c$ und jedes $n\in\mathbb{N}$
existiert eine $\mathrm{FO}\left[\sigma\right]$-Formel $\hat{\varphi}$
mit $\left|\mathrm{var}\left(\varphi_{n}\right)\right|\leqslant2\left|\mathrm{var}\left(\varphi\right)\right|$,
so dass $\models_{n}\left(\hat{\varphi}\leftrightarrow\varphi\right)$.\end{lem}
\begin{proof}
Sei $\varphi\left(\bar{x}\right)$ eine $k$-stellige $\mathrm{LFP}\left[\sigma\right]$-Formel.
Es wird induktiv über den Aufbau von $\varphi$ vorgegangen, wobei
nur der Fall $\varphi=\left[\mathrm{lfp}_{R,\bar{z}}\psi\right]\left(\bar{y}\right)$
nicht-trivial ist.

Falls $\varphi=\left[\mathrm{lfp}_{R,\bar{z}}\psi\right]\left(\bar{y}\right)$
für eine $k$-stellige Relationsvariable $R\in\mathbf{var}_{2}$,
$\bar{z}\in\mathbf{var}^{k}$, eine $\mathrm{LFP}\left[\sigma\cup\left\{ R\right\} \right]$-Formel
$\psi$ und ein $k$-Tupel von $\mathrm{LFP}\left[\sigma\right]$-Termen
$\bar{y}\in\mathbf{var}^{k}$, so existiert per Annahme eine $\mathrm{FO}\left[\sigma\right]$-Formel
$\hat{\psi}$ mit $\models_{n}\left(\hat{\psi}\leftrightarrow\psi\right)$.

Sei $\bar{u}\in\mathbf{var}^{k}\backslash\mathrm{frei}\left(\psi\right)$
ein Tupel von Variablen, die nicht frei in $\hat{\psi}$ vorkommen.
Sei die Sequenz $\left(\psi_{i}\right)_{i\in\mathbb{N}}$ induktiv
wie folgt definiert:
\begin{eqnarray*}
\psi^{0} & \coloneqq & \neg\bar{z}\dot{=}\bar{z}\\
\psi^{i+1} & \coloneqq & \hat{\psi}^{\left(\frac{R\bar{t}}{\chi^{i}\left(\bar{t}\right)}\right)}\\
\chi^{i}\left(\bar{t}\right) & \coloneqq & \exists\bar{u}\left(\bar{t}=\bar{u}\wedge\exists\bar{z}\left(\bar{u}=\bar{z}\wedge\psi^{i}\right)\right)
\end{eqnarray*}
Hierbei sei $\hat{\psi}^{\left(\frac{R\bar{t}}{\chi^{i}\left(\bar{t}\right)}\right)}$
die Formel, die aus $\hat{\psi}$ entsteht, indem jedes Atom $R\bar{t}$
(für irgendein $\bar{t}\in\mathbf{var}^{k}$) durch $\chi^{i}\left(\bar{t}\right)$
ersetzt wird. (Der Zwischenschritt über $\bar{u}$ ist notwendig,
weil $\bar{t}$ und $\bar{z}$ zum Teil die gleichen Variablen enthalten
können, und daher ihr Geltungsbereich nicht überlappen darf.)

Nun gelte:
\[
\hat{\varphi}\coloneqq\exists\bar{z}\left(\bar{x}=\bar{z}\wedge\psi^{n^{k}}\right)
\]

\begin{description}
\item [{Korrektheit:}] Sei $F:2^{A^{k}}\rightarrow2^{A^{k}}$ wie in Definition
\ref{def:lfp} definiert. Außerdem sei $\left(X_{i}\right)_{i\in\mathbb{N}}$
wie folgt: 
\[
X_{i}\coloneqq\left\{ \bar{a}\in A^{k}\mid\mathfrak{A}\models\psi^{i}\left[\bar{a}\right]\right\} 
\]
Wir weisen induktiv nach, dass $X_{i}=F^{i}\left(\emptyset\right)$.

\begin{itemize}
\item $\psi^{0}=\neg\bar{x}\dot{=}\bar{x}$ ist offensichtlich unerfüllbar,
und erkennt daher die Relation $X_{0}=\emptyset=F^{0}\left(\emptyset\right)$.
\item Sei $i\in\mathbb{N}$ beliebig:
\begin{eqnarray*}
\bar{a}\in X_{i+1} & \Leftrightarrow & \mathfrak{A}\models\psi^{i+1}\left[\bar{a}\right]\\
 & \Leftrightarrow & \mathfrak{A}\models\hat{\psi}^{\left(\frac{R\bar{z}}{\chi^{i}\left(\bar{z}\right)}\right)}\left[\bar{a}\right]
\end{eqnarray*}
Per Definition gilt: 
\[
X_{i}\coloneqq\left\{ \bar{a}\mid\mathfrak{A}\models\psi^{i+1}\left[\bar{a}\right]\right\} =\left\{ \bar{a}\mid\mathfrak{A}\models\chi^{i}\left[\bar{a}\right]\right\} 
\]
Und daher:
\begin{eqnarray*}
\bar{a}\in X_{i+1} & \Leftrightarrow & \mathfrak{A}\cup\left(A,\left(\begin{array}{c}
R\\
X_{i}
\end{array}\right)\right)\models\hat{\psi}\left[\bar{a}\right]\\
 & \overset{\mathrm{Ann.}}{\Leftrightarrow} & \mathfrak{A}\cup\left(A,\left(\begin{array}{c}
R\\
F^{i}\left(\emptyset\right)
\end{array}\right)\right)\models\hat{\psi}\left[\bar{a}\right]\\
 & \overset{\mathrm{Def.\ref{def:lfp}}}{\Leftrightarrow} & \bar{a}\in F^{i+1}\left(\emptyset\right)
\end{eqnarray*}

\end{itemize}

Schließlich folgt $X_{n^{k}}=F^{n^{k}}\left(\emptyset\right)=F^{\infty}\left(\emptyset\right)$,
da $\left|F^{\infty}\left(\emptyset\right)\right|\leqslant n^{k}$.
Daher gilt:
\begin{eqnarray*}
\left\llbracket \hat{\varphi}\right\rrbracket \left(\mathfrak{A},\bar{a}\right) & = & \left\llbracket \exists\bar{u}\left(\bar{u}=\bar{y}\wedge\psi^{n^{k}}\right)\right\rrbracket \left(\mathfrak{A},\bar{a}\right)\\
 & = & \left\llbracket R\bar{y}\right\rrbracket \left(\mathfrak{A}\cup\left(A,\left(\begin{array}{c}
R\\
F^{\infty}\left(\emptyset\right)
\end{array}\right)\right),\bar{a}\right)\\
 & \overset{\mathrm{Def.\ref{def:lfp}}}{=} & \left\llbracket \left[\mathrm{lfp}_{R,\bar{z}}\psi\right]\left(\bar{y}\right)\right\rrbracket \left(\mathfrak{A},\bar{a}\right)=\left\llbracket \varphi\right\rrbracket \left(\mathfrak{A},\bar{a}\right)
\end{eqnarray*}


\end{description}
\end{proof}
Leider sind diese Formeln zu \emph{lang}: Wenn das Symbol $R$ mehr
als einmal in $\psi$ vorkommt, ist $\left\Vert \psi_{i+1}\right\Vert \geqslant2\left\Vert \psi_{i}\right\Vert $,
und daher $\left\Vert \varphi\right\Vert \geqslant2^{n^{k}}$ für
$k=\mathrm{ar}\left(R\right)$. Für $\mathcal{C}_{n}^{\varphi}=\mathcal{C}_{n}^{\varphi_{n}}$
könnten wir daher nicht die gewünschte $\mathrm{poly}\left(n\right)$-Größe
ableiten.

Die booleschen Schaltkreise haben jedoch nicht dieselbe Einschränkung
wie $\mathrm{FO}\left[\sigma\right]$: Die Berechnung einer Teilformel
$\psi_{i}\left(\bar{z}\right)$ kann wiederverwendet werden, ohne
den Schaltkreis $\mathcal{C}_{n}^{\psi_{i}}$ zu vervielfältigen.

Wir nutzen dies und den Beweis von Lemma \ref{lem:lfp-inf} aus, um
aus einer $\mathrm{LFP}\left[\sigma\right]$-Formel $\varphi$ direkt
einen $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreis
zu erzeugen, der die richtige Tiefe und Größe hat. Hierbei wird der
Einfachheit halber gefordert, dass $\varphi$ parameter-frei ist (siehe
Definition \ref{def:fp-param}). Per Satz \ref{prop:fp-param} schränkt
dies die Allgemeinheit nicht ein: Der Zuwachs in $\mathrm{var}\left(\varphi\right)$
und $\left\Vert \varphi\right\Vert $ ist fest und für die $\mathrm{poly}\left(n\right)$-Größe
der Schaltkreisfamilie unbedeutend.
\begin{lem}
\label{lem:lfp-circ}Für jede parameter-freie $\mathrm{LFP}\left[\sigma\right]$-Formel
$\varphi$ existiert eine $P$-uniforme symmetrische $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreisfamilie
$\bar{\mathcal{C}^{\varphi}}$ mit $n^{k}\left(\left\Vert \varphi\right\Vert +1\right)$-Tiefe
und $\left(n^{k+\mathtt{MF}\left(\varphi\right)}+1\right)$-Größe,
so dass $q_{\bar{\mathcal{C}^{\varphi}}}\left(\mathfrak{A}\right)=q_{\varphi}\left(\mathfrak{A}\right)$
für alle $\mathfrak{A}\in\mathbf{FIN}\left(\sigma\right)$ gilt.\end{lem}
\begin{proof}
Sei $\varphi\left(\bar{x}\right)$ eine $k$-stellige parameter-freie
$\mathrm{LFP}\left[\sigma\right]$-Formel. Sei $n\in\mathbb{N}$ beliebig.
Wir erweitern die Konstruktion aus Lemma \ref{lem:FO-Circuit} um
den folgenden Fall:

Sei $\varphi\left(\bar{x}\right)=\left[\mathrm{lfp}_{R,\bar{z}}\psi\right]\left(\bar{y}\right)$
für eine $m$-stellige Relationsvariable $R/m\in\mathbf{var}_{2}$,
eine $m$-stellige parameter-freie $\mathrm{LFP}\left[\sigma\cup\left\{ R\right\} \right]$-Formel
$\psi\left(\bar{z}\right)$ und ein $m$-Tupel von $\mathrm{LFP}\left[\sigma\right]$-Termen
$\bar{y}$.

Per Annahme existiert ein $P$-uniformer symmetrischer $\left(\sigma\cup\left\{ R\right\} ,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreis
$\mathcal{C}_{n}^{\psi}$, der auf den erweiterten $\left(\sigma\cup\left\{ R\right\} \right)$-Strukturen
$\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\cup\left\{ R\right\} \right)$
die Anfrage $q_{\mathcal{C}_{n}^{\psi}}\left(\mathfrak{A}\right)=q_{\psi}\left(\mathfrak{A}\right)$
berechnet.
\[
\mathcal{C}_{n}^{\psi}=\left(G_{\psi},W_{\psi},\Sigma_{\psi},\Omega_{\psi},U\right)
\]

\begin{description}
\item [{Schaltkreis:}] Es wird eine Sequenz $\left(\mathcal{D}^{i}\right)_{i\in\mathbb{N}}$
von $k$-stelligen $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Schaltkreisen
definiert.
\[
\mathcal{D}^{i}\coloneqq\left(G_{i},W_{i},\Sigma_{i},\Omega_{i},U\right)
\]
 Für $i=0$ nehmen wir nur eine $\mathbf{0}$-Konstante:
\begin{eqnarray*}
\mathcal{D}^{0} & \coloneqq & \left(\left\{ g_{0}\right\} ,\emptyset,\Sigma_{0},\Omega_{0},U\right)\\
\Sigma_{0}\left(g_{0}\right)=\mathbf{0} &  & \Omega\left(\bar{t}\right)=g_{0}
\end{eqnarray*}
Für $i\in\mathbb{N}_{\geqslant1}$ fügen wir eine neue Kopie von $\mathcal{C}_{n}^{\psi}$
in $\mathcal{D}^{i}$ ein:
\begin{eqnarray*}
G_{i+1} & \coloneqq & G_{i}\uplus G_{\psi}\\
W_{i+1} & \coloneqq & W_{i}\uplus W_{\psi}\uplus W'
\end{eqnarray*}
$\mathcal{D}^{i}$ verbindet alle mit $R\bar{t}$ markierten Inputs
mit dem Output $\Omega_{i}\left(\bar{t}\right)$, und markiert sie
mit ,,$\mathtt{AND}$``. (Hier wäre ,,$\mathtt{OR}$`` äquivalent,
da jedes dieser Gates nur einen Vorgänger bekommt.) 
\[
\Sigma_{i+1}\left(g\right)\coloneqq\begin{cases}
\Sigma_{i}\left(g\right) & \mathrm{falls}\,\,g\in G_{i}\\
\mathtt{AND} & \mathrm{falls}\,\,g\in G_{\psi},\,\Sigma_{\psi}\left(g\right)=R\bar{t}\\
\Sigma_{\psi}\left(g\right) & \mathrm{sonst}
\end{cases}
\]
\[
W'\coloneqq\left\{ \left(\Omega_{i}\left(\bar{t}\right),g\right)\mid g\in G_{\psi},\,\Sigma_{\psi}\left(g\right)=R\bar{t}\right\} 
\]
Die Outputs von $\mathcal{C}_{n}^{\psi}$ werden zu den Outputs von
$\mathcal{D}^{i+1}$: 
\[
\Omega_{i+1}=\Omega_{\psi}
\]
Schließlich sei $\mathcal{C}_{n}^{\varphi}\coloneqq\mathcal{D}^{n^{k}}$.
\item [{Korrektheit:}] Es wird induktiv bewiesen, dass $\mathcal{D}^{i}$
auf $\mathfrak{A}\in\mathbf{FIN}\left(\sigma\right)$ die $\sigma$-Anfrage
$q_{\mathcal{D}^{i}}\left(\mathfrak{A}\right)=F^{i}\left(\emptyset\right)$
berechnet. Der Beweis funktioniert analog zu dem von Lemma \ref{lem:lfp-inf}:
\[
q_{\mathcal{D}^{0}}\left(\mathfrak{A}\right)=F^{0}\left(\emptyset\right)=\emptyset
\]
\begin{eqnarray*}
q_{\mathcal{D}^{i+1}}\left(\mathfrak{A}\right) & = & q_{\mathcal{C}_{n}^{\psi}}\left(\mathfrak{A}\cup\left(A,\left(\begin{array}{c}
R\\
q_{\mathcal{D}^{i}}\left(\mathfrak{A}\right)
\end{array}\right)\right)\right)\\
 & \overset{\mathrm{Ann.}}{=} & q_{\mathcal{C}_{n}^{\psi}}\left(\mathfrak{A}\cup\left(A,\left(\begin{array}{c}
R\\
F^{i}\left(\emptyset\right)
\end{array}\right)\right)\right)\\
 & = & q_{\psi}\left(\mathfrak{A}\cup\left(A,\left(\begin{array}{c}
R\\
F^{i}\left(\emptyset\right)
\end{array}\right)\right)\right)\\
 & \overset{\mathrm{Def.\ref{def:lfp}}}{=} & F^{i+1}\left(\emptyset\right)
\end{eqnarray*}
Daher berechnet $\mathcal{C}_{n}^{\varphi}=\mathcal{D}^{n^{k}}$ die
Anfrage $q_{\mathcal{C}_{n}^{\varphi}}\left(\mathfrak{A}\right)=F^{n^{k}}\left(\emptyset\right)=F^{\infty}\left(\emptyset\right)$.
\item [{Symmetrie:}] Sei $\pi\in\mathrm{Sym}_{U}$ beliebig. Per Annahme
ist $\mathcal{C}_{n}^{\psi}$ symmetrisch, also existiert der Automorphismus
$\hat{\pi}$. Es sei für $i\in\mathbb{N}$ der Automorphismus $\hat{\pi_{i}}$
wie folgt:
\begin{eqnarray*}
\hat{\pi}_{0} & \coloneqq & \left(\begin{array}{c}
g_{0}\\
g_{0}
\end{array}\right)\\
\hat{\pi}_{i+1}\left(g\right) & \coloneqq & \begin{cases}
\hat{\pi}_{i}\left(g\right) & \mathrm{falls}\,g\in G_{i}\\
\hat{\pi}\left(g\right) & \mathrm{sonst}
\end{cases}
\end{eqnarray*}
Per Annahme sei $\hat{\pi}_{i}$ ein von $\pi$ induzierter Automorphismus
in $\mathcal{D}^{i}$. So gilt in $\mathcal{D}^{i+1}$:

\begin{enumerate}
\item $\left(\hat{\pi}_{i+1}\right)_{\mid G_{i}}=\hat{\pi}_{i}$, und $\left(\hat{\pi}_{i+1}\right)_{\mid G_{\psi}}=\hat{\pi}$;
damit sind die Bedingungen für $W_{i}\cup W_{\psi}$, $\Sigma_{i}$,
$\Omega_{i+1}=\Omega_{\psi}$ und alle Gates $g\in G_{\psi}$ mit
$\Sigma_{\psi}\notin\left\{ R\bar{t}\mid\bar{t}\in U^{m}\right\} $
bereits erfüllt.
\item Für die ehemaligen Inputs mit $\Sigma\left(g\right)=R\bar{t}$ gilt
$\Sigma_{i+1}\left(\hat{\pi}g\right)=\Sigma_{i+1}\left(g\right)=\mathtt{AND}$.
\item Für jede neue Kante $\left(\Omega_{i}\left(\bar{t}\right),g\right)\in W'$
mit $g\in G_{\psi}$ und $\Sigma_{\psi}\left(g\right)=R\bar{t}$:
\begin{eqnarray*}
\left(\hat{\pi}_{i+1}\Omega_{i}\left(\bar{t}\right),\hat{\pi}_{i+1}g\right) & = & \left(\hat{\pi}_{i}\Omega_{i}\left(\bar{t}\right),\hat{\pi}g\right)\\
 & = & \left(\Omega_{i}\left(\pi\bar{t}\right),\hat{\pi}g\right)
\end{eqnarray*}
Per Definition ist $\Sigma_{\psi}\left(\hat{\pi}g\right)=R\pi\bar{t}$,
und daher:
\[
\left(\Omega_{i}\left(\pi\bar{t}\right),\hat{\pi}g\right)\in W'
\]

\end{enumerate}

Daher ist $\mathcal{D}^{i+1}$ ebenfalls symmetrisch, und es folgt
die Symmetrie von $\mathcal{C}_{n}^{\varphi}=\mathcal{D}^{n^{k}}$.

\item [{Größe:}] Es wird induktiv bewiesen, dass $T\left(\mathcal{D}^{i}\right)\leqslant\left(\left\Vert \psi\right\Vert +1\right)i$,
und $\left|\mathcal{D}^{i}\right|\leqslant i\cdot n^{\mathtt{MF}\left(\psi\right)}+1$
\begin{eqnarray*}
T\left(\mathcal{D}^{0}\right) & = & 0\\
T\left(\mathcal{D}^{i+1}\right) & = & T\left(\mathcal{D}^{i}\right)+T\left(\mathcal{C}_{n}^{\psi}\right)+1\\
 & \leqslant & T\left(\mathcal{D}^{i}\right)+\left\Vert \psi\right\Vert +1\\
 & \overset{\mathrm{Ann.}}{\leqslant} & \left(\left\Vert \psi\right\Vert +1\right)i+\left\Vert \psi\right\Vert +1=\left(\left\Vert \varphi\right\Vert +1\right)\left(i+1\right)
\end{eqnarray*}
\begin{eqnarray*}
\left|\mathcal{D}^{0}\right| & = & 1\\
\left|\mathcal{D}^{i+1}\right| & = & \left|\mathcal{D}^{i}\right|+\left|\mathcal{C}_{n}^{\psi}\right|\\
 & \leqslant & \left|\mathcal{D}^{i}\right|+n^{\mathtt{MF}\left(\psi\right)}\\
 & \overset{\mathrm{Ann.}}{\leqslant} & i\cdot n^{\mathtt{MF}\left(\psi\right)}+1+n^{\mathtt{MF}\left(\psi\right)}=\left(i+1\right)\cdot n^{\mathtt{MF}\left(\psi\right)}+1
\end{eqnarray*}
Damit gilt $T\left(\mathcal{C}_{n}^{\varphi}\right)=T\left(\mathcal{D}^{n^{k}}\right)\leqslant n^{k}\left(\left\Vert \varphi\right\Vert +1\right)$
und $\left|\mathcal{C}_{n}^{\varphi}\right|=\left|\mathcal{D}^{n^{k}}\right|=n^{k+\mathtt{MF}\left(\varphi\right)}+1$.
\end{description}
\end{proof}
\pagebreak{}


\chapter{Partitionen und Träger}

Es werden nun mehrere Begriffe aus der Gruppentheorie eingeführt,
mit deren Hilfe wir eine symmetrische Schaltkreisfamilie logisch beschreiben
werden.


\section{Partitionen}

Sei $U$ ein beliebiges Universum.
\begin{defn}
Eine \textbf{Partition} $\mathcal{P}$ von $U$ sei eine Menge $\mathcal{P}=\left\{ P_{1},\cdots,P_{k}\right\} $
von disjunkten nicht-leeren Teilmengen $P_{i}\subseteq U$, so dass
$U=\biguplus_{i=1}^{k}P_{i}$. Die Menge aller Partitionen von $U$
sei $\mathrm{Part}_{U}$.

Die Partition $\mathcal{P}$ induziert eine Äquivalenzrelation $\sim_{\mathcal{P}}$
auf $U$, wobei $x\sim_{\mathcal{P}}y$ genau dann wenn $\left\{ x,y\right\} \subseteq P$
für irgendein $P\in\mathcal{P}$.

Die Permutationen aus $\mathrm{Sym}_{U}$ werden auf natürliche Weise
auf $\mathcal{P}$ erweitert. $\pi\mathcal{P}$ ist ebenfalls eine
Partition von $U$:
\begin{eqnarray*}
\pi\mathcal{P} & \coloneqq & \left\{ \pi P_{i}\mid P_{i}\in\mathcal{P}\right\} \\
 & \coloneqq & \left\{ \left\{ \pi x\mid x\in P_{i}\right\} \mid P_{i}\in\mathcal{P}\right\} 
\end{eqnarray*}

\end{defn}

\begin{defn}
\label{def:feinheit}Die \textbf{Feinheit }der Partitionen von $U$
sei eine Relation $\preceq$, so dass $\mathcal{P}\preceq\mathcal{P}'$
(,,$\mathcal{P}$ ist feiner als $\mathcal{P}'$``) genau dann wenn
jedes $P_{i}\in\mathcal{P}$ eine Teilmenge eines $P'_{j}\in\mathcal{P}'$
ist.

Dies ist äquivalent zu der Teilmengenbeziehung von $\sim$: 
\begin{eqnarray*}
\mathcal{P}\preceq\mathcal{P}' & \Leftrightarrow & \mathrm{f\ddot{u}r\,alle}\,P\in\mathcal{P}\,\mathrm{existiert\,}P'\in\mathcal{P}'\,\mathrm{so\,dass}\,P\subseteq P'\\
 & \Leftrightarrow & \mathrm{f\ddot{u}r\,alle}\,u,u'\in U\,\mathrm{gilt}\,u\sim_{\mathcal{P}}u'\,\Rightarrow u\sim_{\mathcal{P}'}u'\\
 & \Leftrightarrow & \left(\sim_{\mathcal{P}}\right)\subseteq\left(\sim_{\mathcal{P}'}\right)
\end{eqnarray*}


Die Relation $\preceq$ ist eine Halbordnung auf $\mathrm{Part}_{U}$:
Sie ist offensichtlich reflexiv, transitiv und anti-symmetrisch (jedoch
nicht vollständig).

Daher bilden die Partitionen von $U$ einen vollständigen Verband\cite{Klein-Barmen1935}
mit den Infimum- und Supremum-Operationen $\sqcap$ und $\sqcup$:
\begin{eqnarray*}
\mathcal{A}\sqcap\mathcal{B} & \coloneqq & \max_{\preceq}\left\{ \mathcal{P}\in\mathrm{Part}_{U}\mid\mathcal{P}\preceq\mathcal{A}\,\mathrm{und}\,\mathcal{P}\preceq\mathcal{B}\right\} \\
\mathcal{A}\sqcup\mathcal{B} & \coloneqq & \min_{\preceq}\left\{ \mathcal{P}\in\mathrm{Part}_{U}\mid\mathcal{A}\preceq\mathcal{P}\,\mathrm{und}\,\mathcal{B}\preceq\mathcal{P}\right\} 
\end{eqnarray*}


($\mathcal{A}\sqcap\mathcal{B}$ sei die gröbste feinere Partition
als $\mathcal{A}$ und $\mathcal{B}$, und $\mathcal{A}\sqcup\mathcal{B}$
die feinste gröbere Partition als $\mathcal{A}$ und $\mathcal{B}$.)\end{defn}
\begin{fact}
Wenn $\left[x\right]_{\sim}$ die Äquivalenzklasse $\left\{ y\mid x\sim y\right\} $
ist, dann gilt: 
\begin{eqnarray*}
\mathcal{A}\sqcap\mathcal{B}=\mathcal{P}_{1} & \coloneqq & \left\{ \left[x\right]_{\sim_{\mathcal{A}}\cap\sim_{\mathcal{B}}}\mid x\in U\right\} \\
\mathcal{A}\sqcup\mathcal{B}=\mathcal{P}_{2} & \coloneqq & \left\{ \left[x\right]_{\sim^{*}}\mid x\in U\right\} \\
 &  & \mathrm{wobei}\,\sim\coloneqq\left(\sim_{\mathcal{A}}\right)\cup\left(\sim_{\mathcal{B}}\right)
\end{eqnarray*}

\end{fact}
Die Eigenschaft $\mathcal{P}_{1}\preceq\mathcal{A},\mathcal{B}\preceq\mathcal{P}_{2}$
folgt offensichtlich aus $\left(\sim_{\mathcal{A}}\cap\sim_{\mathcal{B}}\right)\subseteq\sim_{\mathcal{A}},\sim_{\mathcal{B}}\subseteq\left(\sim_{\mathcal{A}}\cup\sim_{\mathcal{B}}\right)^{*}$.
Ferner muss jede Relation $\sim_{\mathcal{P}}$ mit $\left(\sim_{\mathcal{P}}\right)\subseteq\left(\sim_{\mathcal{A}}\right)$
und $\left(\sim_{\mathcal{A}}\right)\subseteq\left(\sim_{\mathcal{B}}\right)$
auch in $\left(\sim_{\mathcal{A}}\right)\cap\left(\sim_{\mathcal{B}}\right)$
enthalten sein, und jede mit $\left(\sim_{\mathcal{P}}\right)\supseteq\left(\sim_{\mathcal{A}}\right)$,
$\left(\sim_{\mathcal{P}}\right)\supseteq\left(\sim_{\mathcal{B}}\right)$
muss auch $\left(\sim_{\mathcal{A}}\right)\cup\left(\sim_{\mathcal{B}}\right)$
(und dessen Abschluss) enthalten.
\begin{defn}
Die feinste und gröbste Partition von $U$ seien $\mathcal{P}_{\min}\left(U\right)\coloneqq\left\{ \left\{ u_{1}\right\} ,\cdots,\left\{ u_{n}\right\} \right\} $
und $\mathcal{P}_{\max}\left(U\right)\coloneqq\left\{ U\right\} $.
\end{defn}
\pagebreak{}


\section{Stabilisatoren}
\begin{defn}
Sei $x\in U$. Der \textbf{Stabilisator} von $x$ in $U$ sei die
Untergruppe $\mathrm{Stab}_{U}\left(x\right)\subseteq\mathrm{Sym}_{U}$
aller Permutationen, die $x$ fixieren: 
\[
\mathrm{Stab}_{U}\left(x\right)\coloneqq\left\{ \pi\in\mathrm{Sym}_{U}\mid\pi x=x\right\} 
\]

\end{defn}

\begin{defn}
Die letzte Definition wird auf Teilmengen von $U$ erweitert. Sei
$X\subseteq U$:
\begin{itemize}
\item Der \textbf{Punktstabilisator }von $X$ in $U$ sei die Untergruppe
$\mathrm{Stab}_{U}\left(X\right)\subseteq\mathrm{Sym}_{U}$ der Permutationen
die jedes Element $x\in X$ fixieren:
\[
\mathrm{Stab}_{U}\left(X\right)\coloneqq\left\{ \pi\in\mathrm{Sym}_{U}\mid\pi x=x\,\mathrm{f\ddot{u}r}\,\mathrm{alle}\,x\in X\right\} 
\]
Diese Gruppe ist der Schnitt der Stabilisatoren der Elemente von $X$.
\[
\mathrm{Stab}_{U}\left(X\right)=\bigcap_{x\in X}\mathrm{Stab}_{U}\left(x\right)
\]

\item Der \textbf{Mengenstabilisator} von $X$ in $U$ sei die Untergruppe
$\mathrm{Stab}_{U}\left\{ X\right\} \subseteq\mathrm{Sym}_{U}$ der
Permutationen, die die Menge $X$ fixieren.
\[
\mathrm{Stab}_{U}\left\{ X\right\} \coloneqq\left\{ \pi\in\mathrm{Sym}_{U}\mid\pi X=X\right\} 
\]
Diese Gruppe wird durch $\mathrm{Stab}_{U}\left(X\right)$ und $\mathrm{Stab}_{U}\left(U\backslash X\right)$
erzeugt: Jede Permutation $\pi\in\mathrm{Stab}_{U}\left\{ X\right\} $
kann in $\pi_{1}\circ\pi_{2}$ zerlegt werden, wobei $\pi_{1}$ nur
Elemente von $X$, und $\pi_{2}$ nur Elemente von $U\backslash X$
permutiert. 
\begin{eqnarray*}
\mathrm{Stab}_{U}\left\{ X\right\}  & = & \left\langle \mathrm{Stab}_{U}\left(X\right)\cup\mathrm{Stab}_{U}\left(U\backslash X\right)\right\rangle 
\end{eqnarray*}

\end{itemize}
\end{defn}

\begin{defn}
Die letzte Definition wird auf Partitionen (Mengen von Teilmengen)
$\mathcal{P}$ von $U$ erweitert:
\begin{itemize}
\item Der Punktstabilisator\textbf{ }von $\mathcal{P}$ in $U$ sei die
Untergruppe $\mathrm{Stab}_{U}\left(\mathcal{P}\right)\subseteq\mathrm{Sym}_{U}$
aller Permutationen, die jede Menge $P_{i}\in\mathcal{P}$ fixieren:
\begin{eqnarray*}
\mathrm{Stab}_{U}\left(\mathcal{P}\right) & \coloneqq & \left\{ \pi\in\mathrm{Sym}_{U}\mid\pi P_{i}=P_{i}\,\mathrm{f\ddot{u}r}\,\mathrm{alle}\,P_{i}\in\mathcal{P}\right\} 
\end{eqnarray*}
Dies ist der Schnitt der Mengenstabilisatoren der Elemente von $\mathcal{P}$:
\[
\mathrm{Stab}_{U}\left(\mathcal{P}\right)=\bigcap_{P_{i}\in\mathcal{P}}\mathrm{Stab}_{U}\left\{ P_{i}\right\} 
\]

\item Der Mengenstabilisator von $\mathcal{P}$ in $U$ sei die Untergruppe
$\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \subseteq\mathrm{Sym}_{U}$
aller Permutationen, die die Partition als ganzes fixieren: 
\[
\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \coloneqq\left\{ \pi\in\mathrm{Sym}_{U}\mid\pi\mathcal{P}=\mathcal{P}\right\} 
\]
Diese Gruppe wird durch $\mathrm{Stab}_{U}\left(\mathcal{P}\right)$
und alle Permutationen von gleich-mächtigen Elementen von $\mathcal{P}$
erzeugt: Sei $\mathcal{P}_{\mid i}\coloneqq\left\{ P_{j}\in\mathcal{P}\mid\left|P_{j}\right|=i\right\} $
für $i\in\left[1,\left|U\right|\right]$, dann gilt: 
\[
\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} =\left\langle \mathrm{Stab}_{U}\left(\mathcal{P}\right)\cup\bigcup_{i=1}^{\left|U\right|}\mathrm{Sym}_{\mathcal{P}_{\mid i}}\right\rangle 
\]

\end{itemize}
\end{defn}
\begin{prop}
\label{prop:feinheit-stab}Für zwei Partitionen $\mathcal{P},\mathcal{P}'\in\mathrm{Part}_{U}$
gilt $\mathcal{P}\preceq\mathcal{P}'$ genau dann wenn $\mathrm{Stab}_{U}\left(\mathcal{P}\right)\subseteq\mathrm{Stab}_{U}\left(\mathcal{P}'\right)$.\end{prop}
\begin{proof}
Sei $\pi\in\mathrm{Stab}_{U}\left(\mathcal{P}\right)$ beliebig, so
besteht $\pi$ aus einer Folge von Transpositionen:
\[
\pi=\left(u_{1}v_{1}\right)\circ\cdots\circ\left(u_{k}v_{k}\right)
\]


Jede Transposition $\left(u_{i}v_{i}\right)$ vertauscht Elemente
einer Menge $P_{i}\in\mathcal{P}$; daher gilt $u_{i}\sim_{\mathcal{P}}v_{i}$.
Per Definition \ref{def:feinheit} gilt außerdem $\left(\sim_{\mathcal{P}}\right)\subseteq\left(\sim_{\mathcal{P}'}\right)$,
und daher $\left(u_{i}v_{i}\right)\in\mathrm{Stab}_{U}\left(\mathcal{P}'\right)$
und $\pi\in\mathrm{Stab}_{U}\left(\mathcal{P}'\right)$.

Umgekehrt impliziert auch $\mathrm{Stab}_{U}\left(\mathcal{P}\right)\subseteq\mathrm{Stab}_{U}\left(\mathcal{P}'\right)$,
dass alle Transpositionen $\left(u_{i}v_{i}\right)\in\mathrm{Stab}_{U}\left(\mathcal{P}\right)$
in $\mathrm{Stab}_{U}\left(\mathcal{P}'\right)$ enthalten sind. Daraus
folgt $\left(\sim_{\mathcal{P}}\right)\subseteq\left(\sim_{\mathcal{P}'}\right)$
und $\mathcal{P}\preceq\mathcal{P}'$.
\end{proof}

\section{Träger}
\begin{defn}
\label{def:traeger}Sei $G\subseteq\mathrm{\mathrm{Sym}}_{U}$ eine
Untergruppe und $\mathcal{P}$ eine Partition von $U$. $\mathcal{P}$
ist ein \textbf{Träger} von\textbf{ }$G$ genau dann wenn $\mathrm{Stab}_{U}\left(\mathcal{P}\right)\subseteq G$.\end{defn}
\begin{rem*}
Wenn $\mathcal{P}$ ein Träger von $G$ ist, so ist $\mathcal{P}$
auch ein Träger jeder Obermenge $G'\supseteq G$.

Außerdem sind per Satz \ref{prop:feinheit-stab} alle feineren Partitionen
$\mathcal{P}'\preceq\mathcal{P}$ Träger von $G$.

Somit ist $\mathcal{P}_{\min}=\left\{ \left\{ u_{1}\right\} ,\cdots,\left\{ u_{n}\right\} \right\} $
mit $\mathrm{Stab}_{U}\left(\mathcal{P}_{\min}\right)=\left\{ \mathbf{id}\right\} $
ein trivialer Träger jeder Untergruppe $G\subseteq\mathrm{Sym}_{U}$,
und alle Partitionen $\mathcal{P}\in\mathrm{Part}_{U}$ sind Träger
der Gruppe $\mathrm{Sym}_{U}=\mathrm{Stab}_{U}\left(\mathcal{P}_{\max}\right)$.\end{rem*}
\begin{lem}
\label{lem:traeger-abschluss}Die Träger-Eigenschaft ist bezüglich
den Operationen $\sqcap$ und $\sqcup$ abgeschlossen: Wenn $\mathcal{A}$
und $\mathcal{B}$ Träger von $G$ sind, so sind es auch $\mathcal{A}\sqcap\mathcal{B}$
und $\mathcal{A}\sqcup\mathcal{B}$.\end{lem}
\begin{proof}
Per Definition ist $\mathcal{A}\sqcap\mathcal{B}\preceq\mathcal{A}$
und $\mathcal{A}\sqcap\mathcal{B}\preceq\mathcal{B}$, und daher folgt
die Tatsache direkt aus Satz \ref{prop:feinheit-stab}.

Für $\mathcal{P}\coloneqq\mathcal{A}\sqcup\mathcal{B}$ gilt:
\begin{enumerate}
\item Jede Permutation $\pi\in\mathrm{Stab}_{U}\left(\mathcal{P}\right)$
ist eine Folge von Transpositionen $\pi=\left(u_{1}v_{1}\right)\circ\cdots\circ\left(u_{k}v_{k}\right)$,
so dass wir nur Transpositionen betrachten müssen.
\item Die Äquivalenzrelation $\sim_{\mathcal{P}}$ ist die transitive Hülle
von $\sim\coloneqq\left(\sim_{\mathcal{A}}\cup\sim_{\mathcal{B}}\right)$.
Daher existiert für alle $u\sim_{\mathcal{P}}v$ eine Folge von $\ell\leqslant\left|U\right|$
Elementen $\bar{w}\in U^{\ell}$ mit
\[
u\sim w_{1}\sim\cdots\sim w_{\ell}\sim v
\]

\end{enumerate}
Sei nun $\left(uv\right)\in\mathrm{Stab}_{U}\left(\mathcal{P}\right)$
eine beliebige Transposition. $\left(uv\right)$ lässt sich mit dem
entsprechenden $\bar{w}\in\left(U\backslash\left\{ u,v\right\} \right)^{*}$
in die folgenden Transpositionen zerlegen:
\begin{eqnarray*}
\left(uv\right) & = & \left(uw_{1}\right)\left(w_{1}w_{2}\right)\cdots\left(w_{\ell-1}w_{\ell}\right)\left(w_{\ell}v\right)\\
 &  & \circ\left(w_{\ell-1}w_{\ell-2}\right)\cdots\left(w_{2}w_{1}\right)
\end{eqnarray*}


Insbesondere sei $\bar{w}$ so gewählt, dass $u\sim w_{1}$, $\left(w_{i}\sim w_{i+1}\right)_{i\in\left[1,\ell-1\right]}$
und $w_{\ell}\sim v$. Weil $\sim=\left(\sim_{\mathcal{A}}\cup\sim_{\mathcal{B}}\right)$,
ist jede der Transpositionen entweder in $\mathrm{Stab}_{U}\left(\mathcal{A}\right)$
oder in $\mathrm{Stab}_{U}\left(\mathcal{B}\right)$ enthalten, und
beide sind Teilmengen von $G$.

Also ist $\left(uv\right)\in G$, und es folgt $\mathrm{Stab}_{U}\left(\mathcal{P}\right)\subseteq G$.\end{proof}
\begin{cor}
Jede Gruppe $G\subseteq\mathrm{Sym}_{U}$ besitzt eine eindeutigen
gröbsten Träger.\end{cor}
\begin{proof}
Jede Gruppe wird mindestens von $\mathcal{P}_{\min}\left(U\right)$
mit $\mathrm{Stab}_{U}\left(\mathcal{P}_{\min}\left(U\right)\right)=\left\{ \mathbf{id}\right\} \subseteq G$
getragen.

Angenommen, $\mathcal{P}$ und $\mathcal{P}'$ seien zwei gröbste
Träger von $G$. 

Nun ist $\mathcal{P}\sqcup\mathcal{P}'$ nach Lemma \ref{lem:traeger-abschluss}
ebenfalls ein Träger von $G$, und ist mindestens so grob wie $\mathcal{P}$
und $\mathcal{P}'$.

Da $\mathcal{P}$ und $\mathcal{P}'$ aber per Definition gröbste
Träger von $G$ sind, muss $\mathcal{P}=\mathcal{P}\sqcup\mathcal{P}'=\mathcal{P}'$
gelten.\end{proof}
\begin{defn}
Für jede Gruppe $G\subseteq\mathrm{Sym}_{U}$ sei $\mathrm{SP}\left(G\right)$
der gröbste Träger von $G$.
\end{defn}
Wir betrachten nun die Konjugations-Operation auf $\mathrm{Sym}_{U}$.
\begin{lem}
\label{lem:konjugation}Wenn eine Partition $\mathcal{P}$ ein Träger
einer Gruppe $G\subseteq\mathrm{Sym}_{U}$ ist, dann ist $\pi\mathcal{P}$
ein Träger von $\pi G\pi^{-1}$ für alle $\pi\in\mathrm{Sym}_{U}$.\end{lem}
\begin{proof}
Seien $\rho\in\mathrm{Stab}_{U}\left(\pi\mathcal{P}\right)$ und $P_{i}\in\mathcal{P}$
beliebig. $\pi^{-1}\rho\pi$ fixiert $P_{i}$:
\begin{eqnarray*}
\left(\pi^{-1}\rho\pi\right)P_{i} & = & \pi^{-1}\left(\rho\left(\pi P_{i}\right)\right)\\
 & = & \pi^{-1}\pi P_{i}\\
 & = & P_{i}
\end{eqnarray*}


Daraus folgt $\left(\pi^{-1}\rho\pi\right)\in\mathrm{Stab}_{U}\left(\mathcal{P}\right)\subseteq G$,
und schließlich gilt:
\begin{eqnarray*}
\rho & = & \left(\pi\pi^{-1}\right)\rho\left(\pi\pi^{-1}\right)\\
 & = & \pi\left(\pi^{-1}\rho\pi\right)\pi^{-1}\\
 & \in & \pi G\pi^{-1}
\end{eqnarray*}


Damit $\pi\mathcal{P}$ ein Träger der konjugierten Gruppe $\pi G\pi^{-1}$.\end{proof}
\begin{cor}
\label{cor:sp-konjugation}Für jede Gruppe $G\subseteq\mathrm{Sym}_{U}$
und jede Permutation $\pi\in\mathrm{Sym}_{U}$ ist $\pi\mathrm{SP}\left(G\right)=\mathrm{SP}\left(\pi G\pi^{-1}\right)$.\end{cor}
\begin{proof}
Nach Lemma \ref{lem:konjugation} ist $\pi\mathrm{SP}\left(G\right)$
ein Träger von $\pi G\pi^{-1}$. Daher ist $\pi\mathrm{SP}\left(G\right)$
mindestens so fein wie der gröbste Träger:
\[
\pi\mathrm{SP}\left(G\right)\preceq\mathrm{SP}\left(\pi G\pi^{-1}\right)
\]


Umgekehrt ist auch $\pi^{-1}\mathrm{SP}\left(\pi G\pi^{-1}\right)$
ein Träger von $\pi^{-1}\pi G\pi\pi^{-1}=G$. Es folgt:
\[
\pi^{-1}\mathrm{SP}\left(\pi G\pi^{-1}\right)\preceq\mathrm{SP}\left(G\right)
\]


Die Relation $\preceq$ bleibt unter Permutation beider Seiten erhalten:
\begin{eqnarray*}
\pi\pi^{-1}\mathrm{SP}\left(\pi G\pi^{-1}\right) & \preceq & \pi\mathrm{SP}\left(G\right)
\end{eqnarray*}


Daher ist $\pi\mathrm{SP}\left(G\right)=\mathrm{SP}\left(\pi G\pi^{-1}\right)$.\end{proof}
\begin{lem}
Jede Gruppe $G$ ist Obermenge des Punkt- und Teilmenge des Mengenstabilisators
von $\mathrm{SP}\left(G\right)$:
\[
\mathrm{Stab}_{U}\left(\mathrm{SP}\left(G\right)\right)\subseteq G\subseteq\mathrm{Stab}_{U}\left\{ \mathrm{SP}\left(G\right)\right\} 
\]
\end{lem}
\begin{proof}
Per Definition \ref{def:traeger} gilt bereits $\mathrm{Stab}_{U}\left(\mathrm{SP}\left(G\right)\right)\subseteq G$.

Sei nun $\pi\in G$ beliebig. Weil $\pi G\pi^{-1}=G$, folgt nach
Korollar \ref{cor:sp-konjugation}: 
\[
\pi\mathrm{SP}\left(G\right)=\mathrm{SP}\left(\pi G\pi^{-1}\right)=\mathrm{SP}\left(G\right)
\]


Weil $\pi$ die Partition $\mathrm{SP}\left(G\right)$ auf sich selbst
abbildet, gilt per Definition $\pi\in\mathrm{Stab}_{U}\left\{ \mathrm{SP}\left(G\right)\right\} $.\end{proof}
\begin{lem}
\label{lem:lemma-19}(Lemma 19 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Für $\epsilon\in\mathbb{R}_{\left[0,1\right[}$, jedes hinreichend
große Universum $U=\left[1,n\right]$ mit $n\geqslant\exp\frac{4}{\epsilon}$
und jede Partition $\mathcal{P}\in\mathrm{Part}_{U}$ gilt:

Falls der Index des Mengenstabilisators von $\mathcal{P}$ subexponentiell
in $n$ ist,
\[
s\coloneqq\frac{\left|\mathrm{Sym}_{U}\right|}{\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right|}
\]
\[
n\leqslant s\leqslant2^{n^{1-\epsilon}}
\]
dann enthält $\mathcal{P}$ entweder $\mathcal{O}\left(n^{1-\epsilon}\right)$
oder $n-\mathcal{O}\left(n^{1-\epsilon}\right)$ viele Elemente.
\[
\min\left\{ \left|\mathcal{P}\right|,n-\left|\mathcal{P}\right|\right\} \leqslant\frac{8}{\epsilon}\frac{\log s}{\log n}
\]

\end{lem}
Diese Beziehung ist an der Repräsentation des Mengenstabilisators
als Erzeugnis erkennbar: 
\begin{eqnarray*}
\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\}  & = & \left\langle \mathrm{Stab}_{U}\left(\mathcal{P}\right)\cup\bigcup_{i=1}^{\left|U\right|}\mathrm{Sym}_{\mathcal{P}_{\mid i}}\right\rangle \\
\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right| & = & \left|\mathrm{Stab}_{U}\left(\mathcal{P}\right)\right|\cdot\prod_{i=1}^{U}\left|\mathcal{P}_{\mid i}\right|!
\end{eqnarray*}
Damit der Index klein ist, muss die Gruppe selbst groß sein, was entweder
einen großen Punktstabilisator oder eine große Anzahl gleich-mächtiger
Elemente von $\mathcal{P}$ erfordert.
\begin{proof}
Sei $\epsilon\in\mathbb{R}_{\left[0,1\right[}$, $n\geqslant\exp\frac{4}{\epsilon}$,
$U\coloneqq\left[1,n\right]$ und $\mathcal{P}\in\mathrm{Part}_{U}$
mit der folgenden Bedingung:
\[
n\leqslant\frac{\left|\mathrm{Sym}_{U}\right|}{\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right|}\leqslant2^{n^{1-\epsilon}}
\]

\begin{enumerate}
\item Die Definition des Mengenstabilisators liefert eine kombinatorische
Schranke für dessen Größe: Jede Permutation $\pi\in\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} $
besteht aus einer Permutation der Elemente von $\mathcal{P}$, und
einer Permutation $\pi_{i}\in\mathrm{Sym}_{P}$ für jedes Element
$P\in\mathcal{P}$. 
\[
\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right|\leqslant\left|\mathcal{P}\right|!\prod_{P\in\mathcal{P}}\left|P\right|!
\]

\item Sei $k\coloneqq\left|\mathcal{P}\right|$, seien $P_{1},\cdots,P_{k}\in\mathcal{P}$
die nach aufsteigender Mächtigkeit geordneten Elemente von $\mathcal{P}$,
und seien $p_{1}\leqslant\cdots\leqslant p_{k}$ ihre Größen ($\sum_{i=1}^{k}p_{i}=n$).
\[
\left|\mathrm{Stab}_{U}\left\{ P\right\} \right|\leqslant k!\prod_{i=1}^{k}p_{i}!
\]
.
\item Für zwei beliebige $p_{i},p_{j}$ mit $i\leqslant j$ gilt $p_{i}\leqslant p_{j}$
und daher $\frac{p_{j}+1}{p_{i}}\geqslant1$. Es folgt:
\begin{eqnarray*}
\left|\mathrm{Stab}_{U}\left\{ P\right\} \right| & \leqslant & k!\prod_{i=1}^{k}p_{i}!\\
 & = & k!p_{1}!\cdots p_{i}!\cdots p_{j}!\cdots p_{k}!\\
 & \leqslant & k!p_{1}!\cdots p_{i}!\cdots p_{j}!\cdots p_{k}!\cdot\frac{p_{j}+1}{p_{i}}\\
 & = & k!p_{1}!\cdots\left(p_{i}-1\right)!\cdots\left(p_{j}+1\right)!\cdots p_{k}!
\end{eqnarray*}

\item Durch wiederholte Anwendung werden die ersten $k-1$ Fakultätsterme
auf $1!$ reduziert. Der letzte wächst auf $\left(n-\left(k-1\right)\right)!$
an: 
\begin{eqnarray*}
\left|\mathrm{Stab}_{U}\left\{ P\right\} \right| & \leqslant & k!\cdot\underset{k-1}{\underbrace{1!\cdots1!}}\cdot\left(n-\left(k-1\right)\right)!\\
 & = & k!\left(n+1-k\right)!
\end{eqnarray*}
.
\item Daher ist $s$ von unten durch einen Binomialkoeffizienten beschränkt:
\begin{eqnarray*}
s=\frac{\left|\mathrm{Sym}_{U}\right|}{\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right|} & = & \frac{n!}{\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right|}\\
 & \geqslant & \frac{n!}{k!\left(n+1-k\right)!}\\
 & = & \frac{1}{n+1}\frac{\left(n+1\right)!}{k!\left(n+1-k\right)!}\\
 & = & \frac{1}{n+1}\binom{n+1}{k}\\
 & \geqslant & \frac{1}{n+1}\binom{n}{k}\\
 & = & \frac{1}{n+1}\binom{n}{\min\left(n,n-k\right)}
\end{eqnarray*}

\item Für den Binomialkoeffizienten gibt es auch eine untere Schranke: 
\[
\binom{n}{k}=\frac{n!}{k!\left(n-k\right)!}=\frac{\prod_{i=n-k+1}^{n}i}{\prod_{i=1}^{k}i}=\prod_{i=1}^{k}\frac{n-k+i}{i}
\]
\[
\left(n-k+1\right)>\frac{\left(n-k+2\right)}{2}>\cdots>\frac{n}{k}
\]
 
\[
\binom{n}{k}\geqslant\left(\frac{n}{k}\right)^{k}
\]

\item Daher hat $s$ die folgende untere Schranke mit $k'\coloneqq\min\left(k,n-k\right)$:
\[
s\geqslant\frac{1}{n+1}\left(\frac{n}{k'}\right)^{k'}
\]

\item Es folgt:
\begin{eqnarray*}
\log s & \geqslant & k'\left(\log n-\log k'\right)-\log\left(n+1\right)\\
\log s+\log\left(n+1\right) & \geqslant & k'\left(\log n-\log k'\right)
\end{eqnarray*}

\item Weil $s\geqslant n$ und $\log n\geqslant1$, folgt: 
\begin{eqnarray*}
4\log s & = & \log s+3\log s\\
 & \geqslant & \log s+3\log n\\
 & \geqslant & \log s+\log\left(n+1\right)\\
 & \geqslant & k'\left(\log n-\log k'\right)
\end{eqnarray*}

\item Weil $n\geqslant k'$, folgt $\log n\geqslant\log k'$:
\begin{eqnarray*}
4\log s & \geqslant & k'\left(\log n-\log k'\right)\\
 & \geqslant & k'
\end{eqnarray*}

\item Aus der Bedingung $s\leqslant2^{n^{1-\epsilon}}$ folgt:
\begin{eqnarray*}
\log k' & \leqslant & \log(4\log s)\\
 & = & \log\log s+2\\
 & \leqslant & \log\log2^{n^{1-\epsilon}}+2\\
 & = & \log n^{1-\epsilon}+2\\
 & = & \left(1-\epsilon\right)\log n+2
\end{eqnarray*}

\item Schließlich folgt:
\begin{eqnarray*}
4\log s & \geqslant & k'\left(\log n-\log k'\right)\\
 & \geqslant & k'\left(\log n-\left(\left(1-\epsilon\right)\log n+2\right)\right)\\
 & \geqslant & k'\left(\epsilon\log n-2\right)\\
 & \geqslant & k'\frac{\epsilon\log n}{2}\\
\frac{8\log s}{\epsilon\log n} & \geqslant & k'
\end{eqnarray*}

\end{enumerate}
\end{proof}
Eine Partition, die höchstens $\frac{n}{2}$ Elemente enthält (und
deren Stabilisator einen subexponentiellen Index $\left[\mathrm{Sym}_{U}:\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right]\leqslant2^{n^{1-\epsilon}}$
hat) muss ein sehr großes Element enthalten.
\begin{lem}
\label{lem:lemma-20}(Lemma 20 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Für $\epsilon\in\mathbb{R}_{\left[0,1\right[}$, jedes hinreichend
große Universum $U\coloneqq\left[1,n\right]$ mit $n\geqslant\exp\frac{8}{\epsilon^{2}}$
und jede Partition $\mathcal{P}$ mit mit $\left|\mathcal{P}\right|\leqslant\frac{n}{2}$
gilt:

Falls der Index des Mengenstabilisators von $\mathcal{P}$ subexponentiell
in $n$ ist, 
\[
s\coloneqq\frac{\left|\mathrm{Sym}_{U}\right|}{\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right|}
\]
\[
n\leqslant s\leqslant2^{n^{1-\epsilon}}
\]
dann enthält das mächtigste Element von $\mathcal{P}$ alles bis auf
einen sublinearen Teil des Universums: 
\[
\max\left\{ \left|P\right|\mid P\in\mathcal{P}\right\} \geqslant n-\frac{33}{\epsilon}\cdot\frac{\log s}{\log n}\geqslant n-\frac{33}{\epsilon}n^{1-\epsilon}
\]
\end{lem}
\begin{proof}
Sei wieder $\mathcal{P}=\left\{ P_{1},\cdots,P_{k}\right\} $ mit
$p_{i}=\left|P_{i}\right|$ und $p_{1}<\cdots<p_{k}$. 
\begin{eqnarray*}
\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right| & \leqslant & k!\prod_{P\in\mathcal{P}}\left|P\right|!\\
 & = & k!p_{1}!\cdots p_{k}!
\end{eqnarray*}


Ohne Beschränkung der Annahme ist $p_{k-1}>1$, denn sonst ist $p_{k}=n-\left(k-1\right)$,
und einer der folgenden Fälle tritt nach $\min\left\{ k,n-k\right\} <\frac{8}{\epsilon}\frac{\log s}{\log n}$
ein:
\begin{casenv}
\item $k<\frac{8}{\epsilon}\frac{\log s}{\log n}<\frac{33}{\epsilon}\frac{\log s}{\log n}$,
so ist $p_{k}=n-\left(k-1\right)\geqslant n-\frac{33}{\epsilon}\frac{\log s}{\log n}$.
\item $k>n-\frac{8}{\epsilon}\frac{\log s}{\log n}\geqslant n-\frac{8}{\epsilon}\frac{n^{1-\epsilon}}{\log n}$,
und es folgt für hinreichend große $n\geqslant\exp\frac{8}{\epsilon^{2}}$
ein Widerspruch zu der Annahme $\left|\mathcal{P}\right|\leqslant\frac{n}{2}$:
\begin{eqnarray*}
\left|\mathcal{P}\right|=k & > & n-\epsilon n^{1-\epsilon}\\
 & = & n-\frac{\epsilon}{n^{\epsilon}}n\\
 & > & \frac{n}{2}
\end{eqnarray*}

\end{casenv}
Die Umverteilung aus dem vorhergehenden Beweis wird nun wiederholt
verwendet, um jeweils das erste Element mit $p_{i}>1$ zu Gunsten
des letzten Elements mit $p_{j}<p_{k-1}$ zu verkleinern, so dass
alle Terme $p_{1}\cdots p_{k-1}$ entweder den Wert $1$ oder $p_{k-1}$
bekommen. Der letzte Term $p_{i}$ mit $1<p_{i}<p_{k-1}$ wird zu
$p_{k-1}$ aufgerundet.
\[
p\coloneqq p_{k-1}
\]
 
\begin{eqnarray*}
\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right| & \leqslant & k!p_{1}!\cdots p!p_{k}!\\
 & \leqslant & k!\underset{k-\ell-1}{\underbrace{1!\cdots1!}}p_{i}!\underset{\ell-1}{\underbrace{p!\cdots p!}}p_{k}!\\
 & \leqslant & k!\left(p!\right)^{\ell}p_{k}!
\end{eqnarray*}


Hierbei ist $\ell$ wie folgt beschränkt:
\begin{eqnarray*}
k-\ell-1+\ell p\leqslant & \sum_{i=1}^{k-1}p_{i} & \leqslant k-1+\left(\ell+1\right)\left(p-1\right)
\end{eqnarray*}


Daher gilt:
\begin{eqnarray*}
\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right| & \leqslant & k!\left(p!\right)^{\ell}p_{k}\\
 & = & k!\left(p!\right)^{\ell}\left(n-\sum_{i=1}^{k-1}p_{i}\right)\\
 & \leqslant & k!\left(p!\right)^{\ell}\left(n-\left(k-1-\ell+\ell p\right)\right)!\\
 & = & k!\left(p!\right)^{\ell}\left(n-k-\ell\left(p-1\right)+1\right)!\\
 & \leqslant & \left(p!\right)^{\ell}\left(n-\ell\left(p-1\right)+1\right)!
\end{eqnarray*}


Die Stirling-Approximation $x!\leqslant e\sqrt{x}\left(\frac{x}{e}\right)^{x}$
erlaubt die folgende Abschätzung:
\begin{eqnarray*}
\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right| & \leqslant & \left(p!\right)^{\ell}e\sqrt{n}\left(\frac{n}{e}\right)^{n-\ell\left(p-1\right)+1}\\
 & \leqslant & \left(e\sqrt{p}\left(\frac{p}{e}\right)^{p}\right)^{\ell}e\sqrt{n}\left(\frac{n}{e}\right)^{n-\ell\left(p-1\right)+1}
\end{eqnarray*}


Wenn diese Abschätzung in $s$ eingesetzt wird, erhalten wir die folgende
Ungleichung:
\begin{eqnarray*}
s & = & \frac{n!}{\left|\mathrm{Stab}_{U}\left\{ \mathcal{P}\right\} \right|}\\
 & \geqslant & \frac{\left(\frac{n}{e}\right)^{n}}{\left(e\sqrt{p}\left(\frac{p}{e}\right)^{p}\right)^{\ell}e\sqrt{n}\left(\frac{n}{e}\right)^{n-\ell\left(p-1\right)+1}}\\
 & = & \frac{e^{p\ell}\cdot e^{n-\ell\left(p-1\right)+1}}{e^{n}\cdot e^{\ell}\cdot e}\cdot\frac{n^{n}}{\left(\sqrt{p}p^{p}\right)^{\ell}\sqrt{n}n^{n-\ell\left(p-1\right)+1}}\\
 & = & \frac{n^{\ell\left(p-1\right)-\frac{3}{2}}}{p^{\ell\left(p+\frac{1}{2}\right)}}
\end{eqnarray*}


Für den Logarithmus $\log s$ gilt dann:
\begin{eqnarray*}
\log s & \geqslant & \log\frac{n^{\ell\left(p-1\right)-\frac{3}{2}}}{p^{\ell\left(p+\frac{1}{2}\right)}}\\
 & \geqslant & \left(\ell\left(p-1\right)-\frac{3}{2}\right)\log n-\ell\left(p+\frac{1}{2}\right)\log p\\
 & \geqslant & \left(\ell\left(p-1\right)-\frac{3}{2}\right)\log n-\ell\left(p+\frac{1}{2}\right)\log p\\
 & = & \ell\left(p+\frac{1}{2}\right)\left(\log n-\log p\right)-\frac{3}{2}\left(\ell-1\right)\log n\\
 & \geqslant & \ell p\log\frac{n}{p}-\frac{3}{2}\left(\ell-1\right)\log n
\end{eqnarray*}


Weil $n<s$ und $\ell\geqslant1$, folgt:
\begin{eqnarray*}
\frac{5}{2}\log s & \geqslant & \ell p\log\frac{n}{p}-\frac{3}{2}\ell\log n\\
 & \geqslant & p\log\frac{n}{p}-\frac{3}{2}\log n\\
\frac{8}{2}\log s & \geqslant & p\log\frac{n}{p}
\end{eqnarray*}


Und weil $p<p_{k}$ und $p+p_{k}<n$ folgt $\frac{n}{p}\geqslant2$,
und daher $\log\frac{n}{p}\geqslant1$:
\begin{eqnarray*}
p & \leqslant & 4\log s
\end{eqnarray*}


Mit $p\leqslant4\log s\leqslant4n^{\left(1-\epsilon\right)}$ und
$\log p\leqslant\left(1-\epsilon\right)\log n+2$ folgt dann:
\begin{eqnarray*}
\frac{5}{2}\log s & \geqslant & \ell p\left(\log n-\left(1-\epsilon\right)\log n-2\right)-\frac{3}{2}\ell\log n\\
 & \geqslant & \frac{\epsilon\ell p}{2}\log n-\frac{3}{2}\ell\log n\\
5\frac{\log s}{\log n} & \geqslant & \ell\left(p\epsilon-3\right)
\end{eqnarray*}

\begin{casenv}
\item Wenn $3\leqslant\frac{p\epsilon}{2}$, dann folgt $\frac{10}{\epsilon}\frac{\log s}{\log n}\geqslant\ell p$.
Es gilt: 
\begin{eqnarray*}
\sum_{i=1}^{k-1}p_{i} & \leqslant & k-1+\left(\ell+1\right)\left(p-1\right)\\
 & \leqslant & k-1+2\ell p\\
 & \leqslant & \frac{8}{\epsilon}\frac{\log s}{\log n}+\frac{20}{\epsilon}\frac{\log s}{\log n}<\frac{33}{\epsilon}\frac{\log s}{\log n}
\end{eqnarray*}

\item Sonst ist $p<\frac{6}{\epsilon}$, und es folgt $\log p<3-\log\epsilon$.
Es gilt:
\begin{eqnarray*}
\frac{5}{2}\log s & \geqslant & \ell p\left(\log n-\log p\right)-\frac{3}{2}\ell\log n\\
 & \geqslant & \ell p\left(\log n-\left(3-\log\epsilon\right)\right)-\frac{3}{2}\ell\log n
\end{eqnarray*}
Und nach $\log n\geqslant\frac{8}{\epsilon^{2}}\geqslant2\left(3-\log\epsilon\right)$
folgt:
\begin{eqnarray*}
\frac{5}{2}\log s & \geqslant & \frac{\ell p}{2}\log n-\frac{3}{2}\ell\log n\\
 & = & \frac{\ell\left(p-3\right)}{2}\log n
\end{eqnarray*}


\begin{casenv}
\item Falls $p\geqslant5$, dann folgt $\frac{25}{2\epsilon}\frac{\log s}{\log n}\geqslant\ell p$
und damit:
\[
\sum_{i=1}^{k-1}p_{i}\leqslant\frac{8}{\epsilon}\frac{\log s}{\log n}+\frac{25}{\epsilon}\frac{\log s}{\log n}=\frac{33}{\epsilon}\frac{\log s}{\log n}
\]

\item Sonst ist $p<4$, und damit:
\begin{eqnarray*}
\sum_{i=1}^{k-1}p_{i} & \leqslant & p\left(k-1\right)\\
 & \leqslant & 4\cdot\frac{8}{\epsilon}\frac{\log s}{\log n}\leqslant\frac{33}{\epsilon}\frac{\log s}{\log n}
\end{eqnarray*}

\end{casenv}
\end{casenv}
\end{proof}

\section{Träger im Schaltkreis}
\begin{defn}
Sei $\mathcal{C}=\left(G,W,\Sigma,\Omega,U\right)$ ein rigider, symmetrischer
Schaltkreis über dem Universum $U$. 
\begin{enumerate}
\item Der \textbf{Stabilisator} eines Gates $g\in G$ sei die Gruppe aller
Permutationen von $U$, deren induzierter Automorphismus $v$ fixiert:
\[
\mathrm{Stab}_{\mathcal{C}}\left(g\right)\coloneqq\left\{ \pi\in\mathrm{Sym}_{U}\mid\hat{\pi}g=g\right\} 
\]

\item Eine Partition $\mathcal{P}$ von $U$ sei \textbf{Träger} von $g\in G$,
wenn sie ein Träger von $\mathrm{Stab}_{\mathcal{C}}\left(g\right)$
ist. Sei $\mathrm{SP}\left(g\right)\coloneqq\mathrm{SP}\left(\mathrm{Stab}_{\mathcal{C}}\left(g\right)\right)$
der gröbste Träger von $g$. (Wenn $g$ zum Beispiel von allen induzierten
Automorphismen fixiert wird, dann ist $\mathrm{SP}\left(g\right)=\mathcal{P}_{\max}=\left\{ U\right\} $.)
\item Der \textbf{Orbit} von $g\in G$ sei die Menge der Gates, auf die
$g$ durch einen Automorphismus abgebildet wird:
\[
\mathrm{Orb}_{\mathcal{C}}\left(g\right)\coloneqq\left\{ \hat{\pi}g\mid\pi\in\mathrm{Sym}_{U}\right\} 
\]
 
\end{enumerate}
\end{defn}

\begin{defn}
Für $X=\left\{ x_{1},\cdots,x_{k}\right\} \subseteq U$ sei $\mathcal{P}_{X}\coloneqq\left\{ \left\{ x_{1}\right\} ,\cdots,\left\{ x_{k}\right\} ,U\backslash X\right\} $
die gröbste Partition, die jedes Element $x\in X$ von jedem anderen
Element $u\in U$ trennt.

Für eine Partition $\mathcal{P}\in\mathrm{Part}_{U}$ und jede Menge
$P\in\mathcal{P}$ ist offensichtlich $\mathcal{P}_{U\backslash P}\preceq\mathcal{P}$
eine feinere Partition als $\mathcal{P}$: Es bleibt $P=U\backslash\left(U\backslash P\right)\in\mathcal{P}\cap\mathcal{P}_{P}$
erhalten, und alle übrigen Mengen werden in einzelne Elemente aufgeteilt.

Sei $\left\Vert \mathcal{P}\right\Vert \coloneqq\left|U\right|-\max_{P\in\mathcal{P}}\left(P\right)$
die Summe der Größen aller Mengen außer der größten. Somit ist $1+\left\Vert \mathcal{P}\right\Vert $
die minimale Größe einer Partition $\mathcal{P}_{P}$, die aus $\mathcal{P}$
entsteht: Die größte Partition bleibt unverändert, während alle kleineren
aufgeteilt werden.

Wir benutzen die Abkürzung $\mathrm{SP}\left(\mathcal{C}\right)$
für einen Schaltkreis $\mathcal{C}=\left(G,W,\Sigma,\Omega,U\right)$
wie folgt:
\[
\mathrm{SP}\left(\mathcal{C}\right)\coloneqq\max_{g\in G}\left(\left\Vert \mathrm{SP}\left(g\right)\right\Vert \right)
\]


Für $X,X'\subseteq U$ gilt $X\subseteq X'\Leftrightarrow\mathcal{P}_{X'}\preceq\mathcal{P}_{X}$.
Die größere Teilmenge $X'$ trennt mehr Elemente von $U$ voneinander,
und ist somit feiner.
\end{defn}
Anderson und Dawar verwenden die beschriebenen Lemmata (\ref{lem:lemma-19}
und \ref{lem:lemma-20}), um eine obere Schranke für den Träger jedes
Gates $g$ nachzuweisen:
\begin{lem}
(Theorem 21 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Für $\epsilon\in\mathbb{R}_{\left[\frac{2}{3},1\right]}$, $n>2^{\frac{56}{\epsilon^{2}}}$,
$U=\left[1,n\right]$ und einen rigiden (siehe Definition \ref{def:Rigidit=0000E4t})
symmetrischen Schaltkreis $\mathcal{C}$ über $U$ gilt:

Wenn der Orbit jedes Gates subexponentiell ist (für ein $\mathcal{C}$
mit $\mathrm{poly}\left(n\right)$-Größe garantiert),
\[
s\coloneqq\max_{g\in G}\left(\mathrm{Orb}_{\mathcal{C}}\left(g\right)\right)\leqslant2^{n^{1-\epsilon}}
\]
dann gilt $\mathrm{SP}\left(\mathcal{C}\right)\leqslant\frac{33}{\epsilon}\frac{\log s}{\log n}$. \end{lem}
\begin{cor}
\label{cor:korollar-23}(Korollar 23 aus \cite{anderson_et_al:LIPIcs:2014:4445})
Für jede symmetrische, rigide $\left(\sigma,\mathbb{B}\right)$-Schaltkreisfamilie
mit $\mathrm{poly}\left(n\right)$-Größe gilt $\mathrm{SP}\left(\mathcal{C}_{n}\right)\in\mathcal{O}\left(1\right)$.
\end{cor}

\chapter{Von Schaltkreisfamilien zu Formeln}


\section{Rigidität}

Um die Orbits und Träger jedes Gates eines Schaltkreises zu berechnen,
wird nun gefordert, dass der Schaltkreis \emph{rigide }gemäß Definition
\ref{def:Rigidit=0000E4t} ist.

Die Rigidität kann nicht in jeder booleschen Basis $\mathbb{B}$ problemlos
hergestellt werden, ohne die Tiefe zu verändern - während redundante
Vorgänger von $\mathtt{AND}$- und $\mathtt{OR}$-Gates ohne Beschränkung
der Annahme entfernt werden können, ist dies zum Beispiel bei $\mathtt{MAJ}$-
und $\mathtt{XOR}$-Gates nicht möglich.

In \cite{anderson_et_al:LIPIcs:2014:4445} werden redundante Gates
$H=\left(g_{1},\cdots,g_{k}\right)$ ,,in Reihe`` geschaltet, so
dass jedes Gate $g_{i}\in H\backslash\left\{ g_{1}\right\} $ durch
ein $\mathtt{AND}$-Gate mit dem Vorgänger $g_{i-1}$ ersetzt wird.
Dies vergrößert jedoch die Tiefe des Schaltkreises unbeschränkt.

Hier werden wir stattdessen die Definition des Schaltkreises auf Multigraphen
erweitern:
\begin{defn}
\textbf{Multimenge}

Eine Multimenge $\mathcal{W}:W\rightarrow\mathbb{N}$ sei eine Abbildung
einer Menge auf $\mathbb{N}$, wobei $\mathcal{W}\left(x\right)$
die Vielfachheit von $x$ in $\mathcal{W}$ angibt. Nach der in Definition
\ref{def:Relation} eingeführten Notation entspricht für eine gewöhnliche
Relation $W\subseteq G^{2}$ die Funktion $\left[W\right]:G^{2}\rightarrow\left\{ 0,1\right\} $
gerade der äquivalenten Multimenge.
\end{defn}

\begin{defn}
\textbf{Multischaltkreis}

Ein $\left(\sigma,\mathbb{B}_{\mathrm{std}}\right)$-Multischaltkreis
$\mathcal{C}=\left(G,\mathcal{W},\Sigma,\Omega,U\right)$ ist analog
zum $\left(\sigma,\mathbb{B}\right)$-Schaltkreis definiert, aber
$\left(G,\mathcal{W}\right)$ bildet einen azyklischen Multigraphen:
\[
\mathcal{W}:G\times G\rightarrow\mathbb{N}
\]


Für die Auswertung eines internen Gates gilt analog zu \ref{def:Auswertung-von-Schaltkreisen}:
\begin{eqnarray*}
j_{1} & \coloneqq & \sum_{h\in G}\left(\mathcal{C}\left[\mathfrak{A}\right]\left(h\right)\cdot\mathcal{W}\left(h,g\right)\right)\\
j_{0} & \coloneqq & \sum_{h\in G}\mathcal{W}\left(h,g\right)-j_{1}\\
\mathcal{C}\left[\mathfrak{A}\right]\left(g\right) & \coloneqq & \left[\Sigma\left(g\right)\right]\left(j_{0},j_{1}\right)
\end{eqnarray*}


Die Größe $\left|\mathcal{C}\right|$ eines Multischaltkreises $\mathcal{C}$
sei die Summe seiner Gates und Kanten:
\[
\left|\mathcal{C}\right|\coloneqq\left|G\right|+\sum_{g,g'\in G^{2}}\mathcal{W}\left(g,g'\right)
\]


Die Symmetrie wird auf natürliche Weise angepasst: Der von $\pi$
induzierte Automorphismus bildet $\left(G,W\right)$ auf den isomorphen
Multigraphen $\left(\hat{\pi}G,\hat{\pi}W\right)$ mit $\mathcal{W}\left(\hat{\pi}g,\hat{\pi}g'\right)=\mathcal{W}\left(g,g'\right)$
ab.

Die Rigidität wird ebenfalls angepasst: Ein rigider Schaltkreis enthält
keine Gates $g,g'$ mit $\Sigma\left(g\right)=\Sigma\left(g'\right)$
und $\mathcal{W}\left(h,g\right)=\mathcal{W}\left(h,g'\right)$ für
alle $h\in G$.\end{defn}
\begin{lem}
(nach Lemma 24 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Es existiert ein Algorithmus, der einen beliebigen $\left(\sigma,\mathbb{B}\right)$-Schaltkreis
$\mathcal{C}$ in einen rigiden Multischaltkreis $\hat{\mathcal{C}}$
umwandelt, wobei $T\left(\hat{\mathcal{C}}\right)=T\left(\mathcal{C}\right)$
und $\left|\hat{\mathcal{C}}\right|\leqslant\left|\mathcal{C}\right|+\left|\mathcal{C}\right|^{2}$.
Der Algorithmus arbeitet in Polynomialzeit $\mathrm{poly}\left(\left|G\right|+\left|U\right|\right)$.\end{lem}
\begin{proof}
Sei $\mathcal{C}''=\left(G,W,\Sigma,\Omega,U\right)$ ein beliebiger
$k$-stelliger Schaltkreis. Wir erzeugen zunächst den äquivalenten
Multischaltkreis $\mathcal{C}\coloneqq\left(G,\mathcal{W},\Sigma,\Omega,U\right)$
mit $\mathcal{W}\coloneqq\left[W\right]$, wobei die Tiefe unverändert
bleibt und die Größe zu $\left|\mathcal{C}\right|=\left|G\right|+\left|W\right|\leqslant\left|\mathcal{C}''\right|+\left|\mathcal{C}''\right|^{2}$
wird.

Der Multischaltkreis $\mathcal{C}$ wird nun wiederholt reduziert,
bis er rigide ist: Berechne dazu die Äquivalenzrelation $\sim_{\mathcal{C}}\subseteq G\times G$,
so dass $g\sim_{\mathcal{C}}g'$ genau dann wenn
\begin{enumerate}
\item $\Sigma\left(g\right)=\Sigma\left(g'\right)$, und
\item für alle $h\in W$ gilt $\mathcal{W}\left(h,g\right)=\mathcal{W}\left(h,g'\right)$.
\end{enumerate}
Wenn keine Gates $g,g'\in G$ mit $g\sim_{\mathcal{C}}g'$ mehr existieren,
so ist der Schaltkreis rigide, und der Algorithmus ist fertig.

Ansonsten sei $E\subseteq G$ eine Äquivalenzklasse von $\sim_{\mathcal{C}}$
mit mindestens zwei Gates und minimaler Tiefe $T\left(E\right)$. 

Wir berechnen die Funktion $c:G\rightarrow\left[0,\left|E\right|\right]$,
die für jedes Gate $h\in G$ die Vorgänger in $E$ zählt:
\[
c\left(h\right)\coloneqq\sum_{g'\in E}\mathcal{W}\left(g',h\right)
\]


Sei $g\in E$ beliebig, und sei $f_{g,E}\left(\mathcal{C}\right)\coloneqq\left(G',\mathcal{W}',\Sigma',\Omega',U\right)$
der folgende Multischaltkreis:
\begin{eqnarray*}
G' & \coloneqq & G\backslash\left(E\backslash\left\{ g\right\} \right)\\
\Sigma' & \coloneqq & \Sigma_{\backslash E\backslash\left\{ g\right\} }
\end{eqnarray*}

\begin{enumerate}
\item Es werden die eingehenden Kanten der Gates $E\backslash\left\{ g\right\} $
entfernt. Außerdem werden die von $E$ ausgehenden Kanten entfernt
und durch Kanten von $g$ ersetzt:
\[
\mathcal{W}'\left(h,i\right)\coloneqq\begin{cases}
c\left(i\right) & \mathrm{falls}\,h=g\\
0 & \mathrm{falls}\,h\in E\backslash\left\{ g\right\} \\
0 & \mathrm{falls}\,i\in E\backslash\left\{ g\right\} \\
\mathcal{W}\left(h,i\right) & \mathrm{sonst}
\end{cases}
\]

\item Die Output-Funktion wird wie folgt angepasst:
\[
\Omega'\left(\bar{t}\right)\coloneqq\begin{cases}
g & \mathrm{falls}\,\Omega\left(t\right)\in E\backslash\left\{ g\right\} \\
\Omega\left(t\right) & \mathrm{sonst}
\end{cases}
\]

\end{enumerate}
Der Schaltkreis $\mathcal{C}'\coloneqq f_{g,E}\left(\mathcal{C}\right)$
ist äquivalent zu dem Schaltkreis $\mathcal{C}$ über jeder Struktur
$\mathfrak{A}\in\mathbf{FIN}^{U}\left(\sigma\right)$, was induktiv
über die Tiefe (ausgehend von $g$) nachgewiesen wird:
\begin{enumerate}
\item Offensichtlich gilt $\mathcal{C}'\left[\mathfrak{A}\right]\left(g\right)=\mathcal{C}\left[\mathfrak{A}\right]\left(g\right)=\mathcal{C}\left[\mathfrak{A}\right]\left(g'\right)$
für alle $g'\in E$, da die Gates die gleichen Vorgänger und die gleiche
Beschriftung $\Sigma'\left(g\right)=\Sigma\left(g\right)=\Sigma\left(g'\right)$
besitzen.
\item Für jeden direkten Nachfolger $h\in G$ eines Gates $g'\in E$ gilt:
\begin{eqnarray*}
j_{1} & \coloneqq & \sum_{i\in G'}\mathcal{W}\left(i,h\right)\cdot\mathcal{C}\left[\mathfrak{A}\right]\\
j_{0} & \coloneqq & \sum_{i\in G'}\mathcal{W}\left(i,h\right)-j_{1}\\
j_{1}' & \coloneqq & \sum_{i\in G'}\mathcal{W}'\left(i,h\right)\cdot\mathcal{C}'\left[\mathfrak{A}\right]\\
j_{0}' & \coloneqq & \sum_{i\in G'}\mathcal{W}'\left(i,h\right)-j_{1}'
\end{eqnarray*}
Aus der Definition von $\mathcal{W}'$ folgt $j_{1}=j_{1}'$ und $j_{0}=j_{0}'$,
da die $c\left(h\right)-1$ entfernten Vorgänger $g'\in E\backslash\left\{ g\right\} $
durch $c\left(h\right)-1$ zusätzliche $\left(g,h\right)$-Kanten
ersetzt wurden, und $\mathcal{C}\left[\mathfrak{A}\right]\left(g\right)=\mathcal{C}\left[\mathfrak{A}\right]\left(g'\right)$.
Daher gilt: 
\begin{eqnarray*}
\mathcal{C}'\left[\mathfrak{A}\right]\left(g\right) & \coloneqq & \left[\Sigma'\left(g\right)\right]\left(j_{0}',j_{1}'\right)\\
 & = & \left[\Sigma\left(g\right)\right]\left(j_{0},j_{1}\right)\\
 & = & \mathcal{C}\left[\mathfrak{A}\right]
\end{eqnarray*}

\item Für jedes übrige Gate $h\in G$ folgt die Äquivalenz aus der Induktionsannahme
und der Tatsache, dass die Vorgänger von $h$ unverändert bleiben.
\end{enumerate}

Für jedes Tupel $\bar{t}\in U^{k}$ mit $\Omega\left(\bar{t}\right)=g'\in E$
gilt nun:
\begin{eqnarray*}
\left\llbracket \mathcal{C}'\right\rrbracket \left(\mathfrak{A},\bar{t}\right) & = & \mathcal{C}'\left[\mathfrak{A}\right]\left(\Omega'\left(\bar{t}\right)\right)\\
 & = & \mathcal{C}'\left[\mathfrak{A}\right]\left(g\right)\\
 & = & \mathcal{C}\left[\mathfrak{A}\right]\left(g\right)\\
 & = & \mathcal{C}\left[\mathfrak{A}\right]\left(g'\right)\\
 & = & \mathcal{C}\left[\mathfrak{A}\right]\left(\Omega\left(\bar{t}\right)\right)=\left\llbracket \mathcal{C}\right\rrbracket \left(\mathfrak{A},\bar{t}\right)
\end{eqnarray*}

\begin{description}
\item [{Größe:}] Die Umrechnung von $\mathcal{C}$ zu $f_{g,E}\left(\mathcal{C}\right)$
lässt die Tiefe unverändert, und vergrößert den Schaltkreis nicht:
Es werden $\sum_{h\in G}c\left(h\right)$ Kanten eingefügt und mindestens
$\sum_{g',h'\in E\times G}$ Kanten entfernt, wobei gilt:
\[
\sum_{h\in G}c\left(h\right)=\sum_{h\in G}\sum_{g'\in E}\mathcal{W}\left(g',h\right)=\sum_{g',h'\in E\times G}
\]

\item [{Symmetrie:}] Wenn alle Äquivalenzklassen $\bar{E}=\left(E_{1},\cdots,E_{m}\right)$
der gleichen Tiefe reduziert werden, dann bewahrt der neue Schaltkreis
$f_{g_{1,}E_{1}}\cdots f_{g_{m},E_{m}}\left(\mathcal{C}\right)=\mathcal{C}'$
die Symmetrie von $\mathcal{C}$:


Sei $\pi\in\mathrm{Sym}_{U}$ eine beliebige Permutation, und $\hat{\pi}$
ein induzierter Automorphismus. Offensichtlich muss $\hat{\pi}$ die
Äquivalenzklassen $\bar{E}$ aufeinander abbilden, da $\hat{\pi}g\sim_{\mathcal{C}}\hat{\pi}g'$
für alle $g\sim_{\mathcal{C}}g'$ gilt.


Der Automorphismus $\hat{\pi}$ auf $\mathcal{C}$ wird wie folgt
zu einem auf $\mathcal{C}'$ angepasst:
\[
\hat{\pi}'g\coloneqq\begin{cases}
g_{i} & \mathrm{falls}\,\hat{\pi}g\in E_{i}\\
\hat{\pi}g & \mathrm{sonst}
\end{cases}
\]



Da $\mathcal{W}\left(\hat{\pi}g,\hat{\pi}g'\right)=\mathcal{W}\left(g,g'\right)$,
folgt $\mathcal{W}'\left(\hat{\pi}g,\hat{\pi}g'\right)$.

\end{description}
Die Umrechnung von $\mathcal{C}$ zu $\mathcal{C}'$ verkleinert die
Äquivalenzklasse des Gates $g$ zu $\left\{ g\right\} $, da alle
äquivalenten Gates entfernt werden, und lässt alle anderen Äquivalenzklassen
der Tiefe $i\leqslant T\left(g\right)$ unverändert.

Daher haben nach höchstens $\left|G\right|$ Wiederholungen alle Äquivalenzklassen
der Tiefe $i\leqslant T\left(g\right)$ die Größe $1$, und nach höchstens
$T\left(\mathcal{C}\right)\cdot\left|G\right|$ Wiederholungen wird
ein äquivalenter, rigider Schaltkreis erzeugt.
\end{proof}

\section{Berechnung der Orbits}
\begin{lem}
\label{lem:rigide-eindeutig}(nach Satz 9 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Sei $\mathcal{C}$ ein rigider $\left(\sigma,\mathbb{B}\right)$-Multischaltkreis
über $U$. Sei $\pi\in\mathrm{Sym}_{U}$ beliebig.

Falls $\pi$ einen Automorphismus in $\mathcal{C}$ induziert, dann
ist dieser eindeutig.\end{lem}
\begin{proof}
Sei $\mathcal{C}=\left(G,\mathcal{W},\Sigma,\Omega,U\right)$ und
$\pi\in\mathrm{Sym}_{U}$ beliebig. Seien $\hat{\pi}_{1},\hat{\pi}_{2}:\mathcal{C}\tilde{\rightarrow}\mathcal{C}$
zwei von $\pi$ induzierte Automorphismen.

Durch Induktion über die Tiefe wird bewiesen, dass $\hat{\pi}_{1}g=\hat{\pi}_{2}g$
für jedes Gate $g\in G$ gilt.
\begin{description}
\item [{Anfang:}] Wenn $g$ eine Konstante mit $\Sigma\left(g\right)\in\left\{ \mathbf{0},\mathbf{1}\right\} $
ist, dann ist $g$ das einzige Gate mit der Beschriftung $\Sigma\left(g\right)$:
\[
\hat{\pi}_{1}g=g=\hat{\pi}_{2}
\]
Wenn $g$ ein relationales Input mit $\Sigma\left(g\right)=R\bar{t}$,
$R/k\in\sigma$ und $\bar{t}\in U^{k}$ ist, dann existiert auf Grund
der Rigidität nur ein Gate $g'\in G$ mit $\Sigma\left(g'\right)=R\pi\bar{t}$:
\[
\hat{\pi}_{1}g=g'=\hat{\pi}_{2}g
\]

\item [{Schritt:}] Wenn $g$ ein internes Gate mit $\Sigma\left(g\right)\in\mathbb{B}$
ist, dann muss gelten:
\begin{eqnarray*}
\Sigma\left(\hat{\pi}_{1}g\right) & = & \Sigma\left(\hat{\pi}_{2}g\right)=\Sigma\left(g\right)\\
\mathcal{W}\left(\hat{\pi}_{1}h,\hat{\pi}_{1}g\right) & = & \mathcal{W}\left(\hat{\pi}_{2}h,\hat{\pi}_{2}g\right)=\mathcal{W}\left(h,g\right)\\
 &  & \mathrm{f.a.}\,h\in G
\end{eqnarray*}
Auf Grund der Rigidität von $\mathcal{C}$ muss $\hat{\pi}_{1}g=\hat{\pi}_{2}g$
gelten.
\end{description}
\end{proof}
\pagebreak{}
\begin{lem}
\label{lem:algo-auto}(nach Lemma 25 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Es existiert ein deterministischer Algorithmus, der bei Eingabe eines
rigiden $\left(\sigma,\mathbb{B}\right)$-Multischaltkreises $\mathcal{C}=\left(G,\mathcal{W},\Sigma,\Omega,U\right)$
und einer Permutation $\pi\in\mathrm{Sym}_{U}$ in $\mathrm{poly}\left(\left|\mathcal{C}\right|\right)$-Zeit
für jedes Gate $g\in G$ das Gate $\hat{\pi}g$ ausgibt, falls $\pi$
einen Automorphismus $\hat{\pi}$ induziert.\end{lem}
\begin{proof}
Analog zu dem Beweis von Lemma \ref{lem:rigide-eindeutig} wird gezeigt,
dass der eindeutige Automorphismus in Polynomialzeit bestimmt wird:
\begin{enumerate}
\item Zunächst sei für jedes konstante Gate $\hat{\pi}g\coloneqq g$. Für
jedes relationale Input $g\in G$ mit $\Sigma\left(g\right)=R\bar{t}$
finde das einzige Gate $g'\in G$ mit $\Sigma\left(g\right)=R\pi\bar{t}$
und gib $\hat{\pi}g\coloneqq g'$ aus.
\item Finde ein beliebiges Gate $g\in G$, für dessen Vorgänger $h\in G$
mit $\mathcal{W}\left(h,g\right)>0$ bereits $\hat{\pi}h=h'$ ausgegeben
wurde.
\item Finde ein Gate $g'\in G$ mit $\Sigma\left(g\right)=\Sigma\left(g'\right)$
und $\mathcal{W}\left(\hat{\pi}h,g'\right)=\mathcal{W}\left(h,g\right)$
für die Vorgänger $h\in G$, so dass $g'$ sonst keine Vorgänger hat.
(Wegen der Rigidität gibt es höchstens eines.) Gib $\hat{\pi}g=g'$
aus.
\item Wiederhole die Schritte 2 bis 3 solange bis $\hat{\pi}$ für jedes
Gate $g\in G$ berechnet wurde. (Wenn zu irgendeinem $g$ kein Gate
gefunden wird, ist der Schaltkreis nicht symmetrisch und der Algorithmus
bricht ab.)
\end{enumerate}
Die Schritte 2 bis 3 werden höchstens $\left|G\right|$-mal wiederholt,
und jeder Schritt erfordert $\left|G\right|^{2}$-Zeit, so dass der
Algorithmus in $\left|G\right|^{3}$-Zeit arbeitet.\end{proof}
\begin{lem}
(nach Lemma 26 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Es existiert ein deterministischer Algorithmus, der bei Eingabe eines
rigiden $\left(\sigma,\mathbb{B}\right)$-Multischaltkreises $\mathcal{C}=\left(G,\mathcal{W},\Sigma,\Omega,U\right)$
in $\mathrm{poly}\left(\left|\mathcal{C}\right|\right)$ entscheidet,
ob dieser symmetrisch ist, und gegebenenfalls die Orbits $\mathrm{Orb}_{\mathcal{C}}\left(g\right)$
und Träger $\mathrm{SP}\left(g\right)$ jedes Gates $g\in G$ ausgibt.\end{lem}
\begin{proof}
Um die Symmetrie nachzuweisen, genügt es, den Algorithmus aus Lemma
\ref{lem:algo-auto} für jede Transposition $\left(uv\right)\in\mathrm{Sym}_{U}$
durchzuführen. Diese Transpositionen erzeugen die gesamte Symmetriegruppe
$\mathrm{Sym}_{U}$, und daher ist für jede Permutation $\pi=\left(u_{1}v_{1}\right)\cdots\left(u_{k}v_{k}\right)\in\mathrm{Sym}_{U}$
die Abbildung $\hat{\pi}=\hat{\pi}_{\left(u_{1}v_{1}\right)}\cdots\hat{\pi}_{\left(u_{k}v_{k}\right)}$
ein von $\pi$ induzierter Automorphismus.
\begin{enumerate}
\item Berechne den von $\left(uv\right)\in\mathrm{Sym}_{U}$ induzierten
Automorphismus $\hat{\pi}_{\left(uv\right)}$ für jedes Paar $u,v\in U$
mit $u\neq v$. Wenn nicht alle Automorphismen existieren, ist der
Schaltkreis nicht symmetrisch; es wird abgebrochen.
\item Für jedes Gate $g\in G$ wird der Träger $\mathrm{SP}\left(g\right)$
aufgebaut, in dem für jede Transposition $\left(uv\right)\in\mathrm{Sym}_{U}$
geprüft wird, ob $\hat{\pi}_{\left(uv\right)}$ das Gate $g$ fixiert.
In diesem Fall werden die Elemente $u,v$ in der Partition kombiniert:
\begin{eqnarray*}
\mathcal{P}_{\left(uv\right)} & \coloneqq & \left\{ \left\{ u,v\right\} \right\} \cup\left\{ \left\{ w\right\} \mid w\in U\backslash\left\{ u,v\right\} \right\} \\
\mathcal{P}_{g} & \coloneqq & \bigsqcup_{\begin{subarray}{c}
\left(uv\right)\in\mathrm{Sym}_{U}\\
\hat{\pi}_{\left(uv\right)}g=g
\end{subarray}}\mathcal{P}_{\left(uv\right)}
\end{eqnarray*}

\item Für jedes Gate $g\in G$ sei $S_{0}\coloneqq\left\{ g\right\} $.
Iterativ wird der Orbit von $g$ wie folgt aufgebaut, bis mit $S_{i+1}=S_{i}$
ein Fixpunkt erreicht wird (spätestens bei $S_{\left|U\right|}$):
\[
S_{i+1}\coloneqq S_{i}\cup\bigcup_{\left(uv\right)\in\mathrm{Sym}_{U}}\hat{\pi}_{\left(uv\right)}S_{i}
\]

\end{enumerate}
Nach den Definitionen aus Kapitel 7 ist jede Partition $\mathcal{P}_{\left(uv\right)}$
Träger von $g$, wenn $\hat{\pi}_{\left(uv\right)}g=g$, und daher
ist $\mathcal{P}_{g}$ ebenfalls ein Träger von $g$. Wenn es einen
gröberen Träger $\mathcal{P}'$ gäbe, dann müsste dieser zwei Elemente
$u,v\in U$ kombinieren, die in $\mathcal{P}_{g}$ getrennt sind,
und für die $\hat{\pi}_{\left(uv\right)}g=g$ gilt. In diesem Fall
ist aber die Partition $\mathcal{P}_{\left(uv\right)}$ mit in $\mathcal{P}_{g}$
aufgenommen worden, und es gilt $\mathcal{P}_{\left(uv\right)}\preceq\mathcal{P}_{g}=\mathrm{SP}\left(g\right)$.

Für die Mengen $\left(S_{i}\right)_{i\in\mathbb{N}}$ gilt $S_{i}\subseteq\mathrm{Orb}_{\mathcal{C}}\left(g\right)$,
denn per Induktion existiert für jedes Gate $g'\in S_{i}$ eine Folge
von $i$ Transpositionen $\pi_{1}\cdots\pi_{i}$, so dass $\hat{\pi}_{1}\cdots\hat{\pi}_{i}$
das Gate $g$ auf $g'$ abbildet. Ferner besteht jede Permutation
$\pi$ aus einer Folge von höchstens $\left|U\right|$ Transpositionen,
so dass $S_{\left|U\right|}\supseteq\mathrm{Orb}_{\mathcal{C}}\left(g\right)$
den gesamten Orbit von $g$ enthält.

Es existieren weniger als $\left|U\right|^{2}$ Transpositionen, so
dass der Schritt 1 in $\left|G\right|^{3}\left|U\right|^{2}$-Zeit
abgeschlossen wird. Ebenso wird Schritt 2 in $\left|U\right|^{3}$-Zeit
abgeschlossen (die Operation $\mathcal{P}\sqcup\mathcal{P}'$ für
Partitionen ist durch eine Union-Find-Datenstruktur effektiv in $\left|U\right|$-Zeit
berechenbar). Schritt 3 erfordert eine Iteration bis $S_{\left|U\right|}$,
wobei jeder Durchlauf $\left|U\right|^{2}$-Zeit benötigt. Insgesamt
läuft der Algorithmus in $\left|G\right|^{3}\left|U\right|^{3}$-Zeit.
\end{proof}

\section{Auswertung}

Für eine rigide, symmetrische $k$-stellige $\left(\sigma,\mathbb{B}\right)$-Multischaltkreisfamilie
$\left(\mathcal{C}_{n}\right)_{n\in\mathbb{N}}$ gilt nach Korollar
\ref{cor:korollar-23} $\mathrm{SP}\left(\mathcal{C}_{n}\right)\in\mathcal{O}\left(1\right)$.
Seien also $n_{0},c\in\mathbb{N}$ so gewählt, dass $\mathrm{SP}\left(\mathcal{C}_{n}\right)\leqslant c$
für $n\geqslant n_{0}$.

Zur Erinnerung: $\mathrm{SP}\left(\mathcal{C}\right)$ misst die maximale
Größe der Vereinigung aller nicht-größten Teile $U\backslash P_{m}$
des gröbsten Trägers $\mathrm{SP}\left(g\right)=\left\{ P_{1},\cdots,P_{m}\right\} $,
$\left|P_{1}\right|\leqslant\cdots\leqslant\left|P_{m}\right|$ jedes
Gates $g$ von $\mathcal{C}$.

Per Definition ist $\mathcal{P}_{U\backslash P_{m}}=\left\{ \left\{ u\right\} \mid u\in U\backslash P_{m}\right\} \cup\left\{ P_{m}\right\} \preceq\mathrm{SP}\left(g\right)$
ein Träger von $g$, und $\left|\mathcal{P}_{U\backslash P_{m}}\right|\coloneqq1+\left|U\backslash P_{m}\right|\leqslant1+c$.

Es sei $\mathrm{sp}\left(g\right)\coloneqq U\backslash P_{m}$ die
Menge der in $\mathcal{P}_{U\backslash P_{m}}$ getrennten Elemente;
diese Menge nennen wir den \textbf{kanonischen Träger} des Gates $g$.

Wir möchten $\mathcal{C}_{n}$ auf beliebigen Strukturen $\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
(nicht nur $\mathfrak{A}\in\mathbf{FIN}^{\left[1,n\right]}\left(\sigma\right)$)
auswerten, wofür eine beliebige Einbettung $\pi:A\rightarrow\left[1,n\right]$
definiert werden muss. Es wird nun gezeigt, dass die Auswertung des
Gates $g$ nur von dem Teil der Abbildung $\pi$ abhängt, der Elemente
auf $\mathrm{sp}\left(g\right)$ abbildet. Die Abbildung auf die übrigen
Elemente $U\backslash\mathrm{sp}\left(g\right)$ ist für $g$ unbedeutend.

Die Folgerung in diesem Abschnitt passt den Abschnitt 4.3 aus \cite{anderson_et_al:LIPIcs:2014:4445}
für Multischaltkreise an.
\begin{defn}
\textbf{Bildreduktion}

Für eine bijektive Funktion $f:A\rightarrow B$ und eine Teilmenge
$B'\subseteq B$ sei $f_{\Vert B'}:f^{-1}\left(B'\right)\rightarrow B'$
die Reduktion von $f$ auf den Teil des Definitionsbereichs, der auf
$B'$ abgebildet wird:
\begin{eqnarray*}
f_{\Vert B'} & \coloneqq & f_{\mid f^{-1}\left(B'\right)}\\
 & = & \left(\left(f^{-1}\right)_{\mid B'}\right)^{-1}
\end{eqnarray*}

\end{defn}

\begin{defn}
\textbf{Konsistenz}

Zwei bijektive Abbildungen $f,f':A\rightarrow B$ seien konsistent
in $A'\subseteq A$ (kurz $f\sim_{A'}f'$), wenn sie im Teilbereich
$A'$ identisch sind. 
\[
f\sim_{A'}f'\Leftrightarrow f_{\mid A'}=f'_{\mid A'}
\]


Für $B'\subseteq B$ heißen sie bildkonsistent in $B'$, wenn $f^{-1}\sim_{B'}f^{-1}$
beziehungsweise wenn $f=\tau f'$ mit einer Permutation $\tau\in\mathrm{Stab}_{B}\left(B'\right)$,
die die Elemente von $B'$ fixiert.\end{defn}
\begin{prop}
\label{prop:konsistenz}Sei $\mathcal{C}=\left(G,\mathcal{W},\Sigma,\Omega,U\right)$
ein rigider, symmetrischer Multischaltkreis mit $n=\left|U\right|$,
und sei $g\in G$ ein beliebiges Gate mit den Vorgängern $H\coloneqq\left\{ h\in G\mid\mathcal{W}\left(h,g\right)>0\right\} $.
Sei $\mathfrak{A}\in\mathbf{FIN}^{\left(n\right)}\left(\sigma\right)$
eine beliebige Struktur. Seien $\pi_{1},\pi_{2}:A\rightarrow U$ zwei
beliebige Einbettungen von $\mathfrak{A}$ in $U$, die bildkonsistent
in $\mathrm{sp}\left(g\right)$ sind. So gilt:
\begin{eqnarray}
\mathcal{C}\left[\pi_{1}\mathfrak{A}\right]\left(g\right) & = & \mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(g\right)\label{eq:cons-1}\\
\sum_{h\in H}\mathcal{W}\left(h,g\right)\cdot\mathcal{C}\left[\pi_{1}\mathfrak{A}\right]\left(h\right) & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\cdot\mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(h\right)\label{eq:cons-2}
\end{eqnarray}
\end{prop}
\begin{proof}
Sei $\tau\in\mathrm{Sym}_{U}$ die Permutation $\tau\coloneqq\pi_{1}\pi_{2}^{-1}$,
so dass $\pi_{1}=\tau\pi_{2}$.

Weil $\pi_{1}$ und $\pi_{2}$ bildkonsistent in $\mathrm{sp}\left(g\right)$
sind, gilt $\pi_{1}^{-1}u=\pi_{2}^{-1}u$ für $u\in\mathrm{sp}\left(g\right)$.
\begin{eqnarray*}
\tau u & = & \pi_{1}\pi_{2}^{-1}u\\
 & = & \pi_{1}\pi_{1}^{-1}u=u
\end{eqnarray*}


Wegen der Symmetrie und Rigidität induziert $\tau$ einen eindeutigen
Automorphismus $\hat{\tau}$ im Schaltkreis $\mathcal{C}$. Weil $\tau$
die Elemente von $\mathrm{sp}\left(g\right)$ fixiert, fixiert $\hat{\tau}$
auch das Gate $g$:
\begin{eqnarray*}
\tau & \in & \mathrm{Stab}_{U}\left(\mathrm{sp}\left(g\right)\right)\\
 & \subseteq & \mathrm{Stab}_{\mathcal{C}}\left(g\right)
\end{eqnarray*}
Damit ist Gleichung \ref{eq:cons-1} bewiesen:
\begin{eqnarray*}
\mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(g\right) & = & \mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(\hat{\tau}g\right)\\
 & = & \mathcal{C}\left[\tau\pi_{2}\mathfrak{A}\right]\left(g\right)\\
 & = & \mathcal{C}\left[\pi_{1}\mathfrak{A}\right]\left(g\right)
\end{eqnarray*}


Da $\hat{\tau}g=g$, muss auch $\hat{\tau}H=H$ auch für die Vorgänger
gelten. Außerdem hat $\hat{\tau}h$ die gleiche Anzahl von Kanten
zu $g$ wie $\tau$:
\begin{eqnarray*}
\mathcal{C}\left[\pi_{2}\right]\left(h\right) & = & \mathcal{C}\left[\tau\pi_{2}\right]\left(\hat{\tau}g\right)\\
\mathcal{W}\left(h,g\right) & = & \mathcal{W}\left(\hat{\tau},g\right)
\end{eqnarray*}
Es folgt die Gleichung \ref{eq:cons-2} für das Gewicht der mit $1$
belegten Vorgänger von $g$:
\[
\sum_{h\in H}\mathcal{W}\left(h,g\right)\cdot\mathcal{C}\left[\pi_{1}\mathfrak{A}\right]\left(h\right)=\sum_{h\in H}\mathcal{W}\left(h,g\right)\cdot\mathcal{C}\left[\pi_{2}\mathfrak{A}\right]\left(h\right)
\]
\end{proof}
\begin{defn}
Für jedes Gate $g$ des Schaltkreises $\mathcal{C}$ über dem Universum
$U$ beschreiben wir die Menge der verschiedenen Bijektionen $\pi:U\rightarrow A$,
für die $\mathcal{C}\left[\pi^{-1}\mathfrak{A}\right]\left(g\right)=1$.
Per Satz \ref{prop:konsistenz} müssen nur deren Reduktionen auf $\mathrm{sp}\left(g\right)$
betrachtet werden. Sei $\mathrm{EV}\left(g\right)$ die Menge dieser
Belegungen von $\mathrm{sp}\left(g\right)$:

\[
\mathrm{EV}\left(g\right)\coloneqq\left\{ \pi{}_{\mid\mathrm{sp}\left(g\right)}\mid\pi\in\mathrm{Abb}\left(U,A\right),\,\mathcal{C}\left[\pi^{-1}\mathfrak{A}\right]\left(g\right)=1\right\} 
\]


Für jede injektive Funktion $\rho:\mathrm{sp}\left(g\right)\rightarrow A$
sei $M_{\rho}$ die Menge der zu $\rho$ konsistenten Bijektionen
$\pi:U\rightarrow A$ :
\[
M_{\rho}\coloneqq\left\{ \pi\in\mathrm{Abb}\left(U,A\right)\mid\pi_{\mid\mathrm{sp}\left(g\right)}=\rho\right\} 
\]


Zusätzlich beschreiben wir für jeden Vorgänger $h\in H$ von $g$
und jede injektive Funktion $\rho:\mathrm{sp}\left(g\right)\rightarrow A$
die Menge $\Pi_{\rho}\left(h\right)$ der unterschiedlichen $\mathrm{sp}\left(h\right)$-Reduktionen
von Bijektionen $\pi:U\rightarrow A$, die auf $\mathrm{sp}\left(g\right)$
konsistent zu $\pi$ sind: 
\[
\Pi_{\rho}\left(h\right)\coloneqq\left\{ \pi_{\mid\mathrm{sp}\left(h\right)}\mid\pi\in M_{\rho}\right\} 
\]
\end{defn}
\begin{claim}
\label{claim:claim-28}(nach Behauptung 28 aus \cite{anderson_et_al:LIPIcs:2014:4445})

Sei $\pi:U\rightarrow A$ eine beliebige Bijektion, und $\rho\coloneqq\pi_{\mid\mathrm{sp}\left(g\right)}$.
Das Gesamtgewicht der unter $\pi^{-1}\mathfrak{A}$ erfüllten Vorgänger
$h\in H$ gleicht der gewichteten Summe von $\frac{\left|\Pi_{\rho}\left(h\right)\cap\mathrm{EV}\left(h\right)\right|}{\left|\Pi_{\rho}\left(h\right)\right|}$,
dem Anteil der erfüllenden Bijektionen in $\Pi_{\rho}\left(h\right)$:

\begin{equation}
r\coloneqq\sum_{h\in H}\mathcal{W}\left(h,g\right)\mathcal{C}\left[\pi^{-1}\mathfrak{A}\right]\left(h\right)=\sum_{h\in H}\mathcal{W}\left(h,g\right)\frac{\left|\Pi_{\rho}\left(h\right)\cap\mathrm{EV}\left(h\right)\right|}{\left|\Pi_{\rho}\left(h\right)\right|}\label{eq:behauptung-28}
\end{equation}
\end{claim}
\begin{proof}
Nach Gleichung \ref{eq:cons-2} ist das Gesamtgewicht der unter $\pi'^{-1}\mathfrak{A}$
erfüllten Gates $h\in G$ für alle $\pi'\in M_{\rho}$ gleich, so
dass $\left|M_{\rho}\right|r$ die Summe der Gesamtgewichte für jede
Belegung $\pi'\in M_{\rho}$ ist.

Weiterhin können wir für jeden Vorgänger $h\in H$ die Belegungen
$M_{\rho}$ in Äquivalenzklassen bezüglich der Konsistenz zu einer
Belegung $\rho'\in\Pi_{\rho}\left(h\right)$ von $\mathrm{sp}\left(h\right)$
partitionieren: 
\begin{eqnarray*}
\left|M_{\rho}\right|r & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\sum_{\pi'\in M_{\rho}}\mathcal{C}\left[\pi'\mathfrak{^{-1}A}\right]\left(h\right)\\
 & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\sum_{\rho'\in\Pi_{\rho}\left(h\right)}\sum_{\begin{subarray}{c}
\pi'\in M_{\rho}\\
\pi'_{\mid\mathrm{sp}\left(h\right)}=\rho'
\end{subarray}}\mathcal{C}\left[\pi'^{-1}\mathfrak{A}\right]\left(h\right)
\end{eqnarray*}


Nach der Definition der Menge $\mathrm{EV}\left(h\right)$ gilt für
alle Belegungen $\pi':U\rightarrow A$, dass $\mathcal{C}\left[\pi'^{-1}\mathfrak{A}\right]\left(h\right)=1$
genau dann wenn $\pi'_{\mid\mathrm{sp}\left(h\right)}\in\mathrm{EV}\left(h\right)$.
Daher können wir $\left[\mathrm{EV}\left(h\right)\right]\left(\rho'\right)\in\left\{ 0,1\right\} $
einfach mit der Größe von $\left\{ \pi'\in M_{\rho}\mid\pi'_{\mid\mathrm{sp}\left(h\right)}=\rho'\right\} $
multiplizieren: 
\begin{eqnarray*}
\left|M_{\rho}\right|r & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\sum_{\rho'\in\Pi_{\rho}\left(h\right)}\sum_{\begin{subarray}{c}
\pi'\in M_{\rho}\\
\pi'_{\mid\mathrm{sp}\left(h\right)}=\rho'
\end{subarray}}\left[\mathrm{EV}\left(h\right)\right]\left(\rho'\right)\\
 & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\sum_{\rho'\in\Pi_{\rho}\left(h\right)}\left[\mathrm{EV}\left(h\right)\right]\left(\rho'\right)\left|\left\{ \pi'\in M_{\rho},\,\pi'_{\mid\mathrm{sp}\left(h\right)}=\rho'\right\} \right|
\end{eqnarray*}


Weil die Partitionierung $M_{\rho}=\biguplus_{\rho'\in\Pi_{\pi}\left(h\right)}\left\{ \pi'\in M_{\rho},\,\pi'_{\mid\mathrm{sp}\left(h\right)}=\rho'\right\} $
die Menge $M_{\rho}$ in isomorphe Klassen teilt, gilt $\left|\left\{ \pi'\in M_{\rho},\,\pi'_{\mid\mathrm{sp}\left(h\right)}=\rho'\right\} \right|=\frac{\left|M_{\rho}\right|}{\left|\Pi_{\rho}\left(h\right)\right|}$
für $\rho'\in\Pi_{\rho}\left(h\right)$.

\begin{eqnarray*}
\left|M_{\rho}\right|r & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\sum_{\rho'\in\Pi_{\rho}\left(h\right)}\left[\mathrm{EV}\left(h\right)\right]\left(\rho'\right)\frac{\left|M_{\rho}\right|}{\left|\Pi_{\rho}\left(h\right)\right|}\\
 & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\sum_{\rho'\in\Pi_{\rho}\left(h\right)\cap\mathrm{EV}\left(h\right)}\frac{\left|M_{\rho}\right|}{\left|\Pi_{\rho}\left(h\right)\right|}\\
 & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)\frac{\left|\Pi_{\rho}\left(h\right)\cap\mathrm{EV}\left(h\right)\right|\left|M_{\rho}\right|}{\left|\Pi_{\rho}\left(h\right)\right|}
\end{eqnarray*}


Durch das Kürzen von $\left|M_{\rho}\right|$ entsteht die Gleichung
\ref{eq:behauptung-28} aus der Behauptung.
\end{proof}
Sei nach Definition \ref{def:Tupel} $\bar{U}$ das geordnete Tupel
aller Elemente des Universums, und $\bar{\mathrm{sp}}\left(g\right)$
das Tupel der Elemente von $\mathrm{sp}\left(g\right)$.

Sei $\bar{M}_{\rho}\subseteq A^{n}$ die Relation der $n$-Tupel $\pi\bar{U}$
für $\pi\in M_{\rho}$, sei $\bar{\Pi}_{\rho}\left(h\right)\subseteq A^{\left|\mathrm{sp}\left(h\right)\right|}$
die Relation der Tupel $\rho\bar{\mathrm{sp}}\left(h\right)$ für
$\rho\in\Pi_{\rho}\left(h\right)$, und sei $\bar{\mathrm{EV}}\left(g\right)\subseteq A^{\left|\mathrm{sp}\left(g\right)\right|}$
die Relation der Tupel $\rho\bar{\mathrm{sp}}\left(g\right)$ für
$\rho\in\mathrm{EV}\left(g\right)$. 
\begin{eqnarray*}
\bar{M}_{\rho} & \coloneqq & \left\{ \pi\bar{U}\mid\pi\in M_{\rho}\right\} \\
\bar{\mathrm{EV}}\left(g\right) & \coloneqq & \left\{ \rho\bar{\mathrm{sp}}\left(g\right)\mid\rho\in\mathrm{EV}\left(g\right)\right\} 
\end{eqnarray*}


Wir werden nun für jedes Gate $g\in G$ mit den Vorgängern $H\subseteq G$
die Menge $\bar{\mathrm{EV}}\left(g\right)$ rekursiv durch $\left(\bar{\mathrm{EV}}\left(h\right)\right)_{h\in H}$
und $\mathfrak{A}$ definieren, wobei $\rho_{\bar{a}}:\mathrm{sp}\left(g\right)\rightarrow A$
für $\bar{a}\in A^{\left|\mathrm{sp}\left(g\right)\right|}$ die Abbildung
$\rho_{\bar{a}}=\left(\bar{\mathrm{sp}}\left(g\right)\mapsto\bar{a}\right)$
bezeichne.
\begin{casenv}
\item Falls $g$ eine Konstante mit $\Sigma\left(g\right)\in\left\{ \mathbf{0},\mathbf{1}\right\} $
ist, dann ist $\mathrm{sp}\left(g\right)=\emptyset$, da $g$ ein
Fixpunkt aller Automorphismen ist. In diesem Fall gilt:
\[
\bar{\mathrm{EV}}\left(g\right)=\begin{cases}
\emptyset & \mathrm{falls}\,\Sigma\left(g\right)=\mathbf{0}\\
\left\{ \left\langle \right\rangle \right\}  & \mathrm{falls}\,\Sigma\left(g\right)=\mathbf{1}
\end{cases}
\]

\item Falls $g$ ein relationales Input mit $\Sigma\left(g\right)=R\bar{t}$,
$R/k\in\sigma$ und $\bar{t}\in\mathrm{sp}\left(g\right)^{k}$ ist,
dann gilt:
\[
\bar{\mathrm{EV}}\left(g\right)=R^{\mathfrak{A}}\cap\left\{ \rho_{\bar{a}}\bar{t}\mid\bar{a}\in A^{\left|\mathrm{sp}\left(g\right)\right|}\right\} 
\]

\item Falls $\Sigma\left(g\right)=\mathtt{AND}$ ist, dann gilt für jedes
Tupel $\bar{a}\in A^{\left|\mathrm{sp}\left(g\right)\right|}$ , dass
$\rho_{\bar{a}}\in\mathrm{EV}\left(g\right)$ genau dann wenn jede
zu $\rho_{\bar{a}}$ konsistente Bijektion $\pi\in M_{\rho_{\bar{a}}}$
alle Vorgänger $h\in H$ erfüllt: 
\begin{eqnarray*}
\sum_{h\in H}\mathcal{W}\left(h,g\right)\mathcal{C}\left[\pi^{-1}\mathfrak{A}\right]\left(h\right) & = & \sum_{h\in H}\mathcal{W}\left(h,g\right)
\end{eqnarray*}
Beziehungsweise nach Behauptung \ref{claim:claim-28}:
\[
\sum_{h\in H}\mathcal{W}\left(h,g\right)\frac{\left|\Pi_{\rho_{\bar{a}}}\left(h\right)\cap\mathrm{EV}\left(h\right)\right|}{\left|\Pi_{\rho_{\bar{a}}}\left(h\right)\right|}=\sum_{h\in H}\mathcal{W}\left(h,g\right)
\]
Dies ist gleichbedeutend mit $\Pi_{\rho_{\bar{a}}}\left(h\right)\subseteq\mathrm{EV}\left(h\right)$.
Demnach gilt:
\[
\bar{\mathrm{EV}}\left(g\right)=\left\{ \bar{a}\in A^{\left|\mathrm{sp}\left(g\right)\right|}\mid\bigwedge_{h\in H}\bar{\Pi}_{\rho_{\bar{a}}}\left(h\right)\subseteq\bar{\mathrm{EV}}\left(h\right)\right\} 
\]

\item Falls $\Sigma\left(g\right)=\mathtt{OR}$ ist, dann ist $\rho_{\bar{a}}\in\mathrm{EV}\left(g\right)$
genau dann wenn mindestens eine Bijektion $\pi\in M_{\rho}$ mindestens
einen Vorgänger $h\in H$ erfüllt:
\[
\sum_{h\in H}\mathcal{W}\left(h,g\right)\frac{\left|\Pi_{\rho_{\bar{a}}}\left(h\right)\cap\mathrm{EV}\left(h\right)\right|}{\left|\Pi_{\rho_{\bar{a}}}\left(h\right)\right|}>0
\]
\[
\bar{\mathrm{EV}}\left(g\right)=\left\{ \bar{a}\in A^{\left|\mathrm{sp}\left(g\right)\right|}\mid\bigvee_{h\in H}\left(\bar{\Pi}_{\rho_{\bar{a}}}\left(h\right)\cap\bar{\mathrm{EV}}\left(h\right)\neq\emptyset\right)\right\} 
\]

\item Falls $\Sigma\left(g\right)=\mathtt{MAJ}$ ist, dann ist $\rho_{\bar{a}}\in\mathrm{EV}\left(g\right)$
genau dann wenn mindestens die Hälfte der Vorgänger erfüllt sind:
\[
\sum_{h\in H}\mathcal{W}\left(h,g\right)\frac{\left|\Pi_{\rho\bar{a}}\left(h\right)\cap\mathrm{EV}\left(h\right)\right|}{\left|\Pi_{\rho_{\bar{a}}}\left(h\right)\right|}\geqslant\frac{1}{2}\sum_{h\in H}\mathcal{W}\left(h,g\right)
\]

\item Falls $\Sigma\left(g\right)=\neg$, dann hat $g$ per Definition des
Schaltkreises genau einen Vorgänger $h$, es gilt $\mathrm{sp}\left(g\right)=\mathrm{sp}\left(h\right)$
und $\mathcal{C}\left[\pi^{-1}\mathfrak{A}\right]\left(g\right)=1-\mathcal{C}\left[\pi^{-1}\mathfrak{A}\right]\left(h\right)$.
Also:
\[
\bar{\mathrm{EV}}\left(g\right)=A^{\left|\mathrm{sp}\left(g\right)\right|}\backslash\bar{\mathrm{EV}}\left(h\right)
\]

\end{casenv}
Die vom Schaltkreis $\mathcal{C}$ berechnete Anfrage $q_{\mathcal{C}}$
ist äquivalent zu der folgenden Relation:
\[
q_{\mathcal{C}}\left(\mathfrak{A}\right)\coloneqq\left\{ \bar{a}\in A^{k}\mid\mathrm{ex.}\,\bar{t}\in U^{k}\,\mathrm{mit}\,\bar{a}\in\mathrm{EV}\left(\Omega\left(\bar{t}\right)\right)\right\} 
\]


\pagebreak{}


\section{Kodierung}

eine $\mathrm{LFP}\left[\sigma\cup\left\{ \mathrm{EV}\left(h\right)\mid h\in H\right\} \right]$-Formel
$\varphi_{\mathrm{EV}\left(g\right)}\left(\bar{x}\right)$ aufbauen,
die die Relation $\bar{\mathrm{EV}}\left(g\right)$ definiert.


\chapter{Schluss}

\pagebreak{}

\bibliographystyle{plain}
\nocite{*}
\bibliography{master}


\pagebreak{}


\chapter*{Eidesstattliche Erklärung}

\addcontentsline{toc}{chapter}{Eidesstattliche Erklärung}

Hiermit versichere ich an Eides statt, dass ich den Inhalt der vorliegenden
Arbeit selbständig ohne fremde Hilfe angefertigt und nur die angegebenen
Hilfsmittel verwendet habe.

\vspace{2em}


Frankfurt, den \today

\vspace{5em}


Christoph Burschka
\end{document}
